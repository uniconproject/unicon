\chapter{The Unicon Component Library}

\section{GUI Classes}

This section presents the various methods and class fields making up the
classes implemented in the Unicon GUI library. The library is a package
(gui) defined by a set of files in their own directory (uni/gui). In
this section if a class has superclasses, their names are given,
separated by colons. Superclasses should be consulted for additional
methods and class fields used by \index{subclass}subclasses. The
default is to have no superclass.
If a required field is omitted, an error message may be produced,
such as:

\iconcode{
gui.icn : error processing object TextList : x position unspecified
}

\noindent This means that the x position of a \texttt{TextList} object was not specified,
probably because the \texttt{set\_pos()} method had not been invoked.

You will generally need to consult
"Graphics Programming in Icon", by
Griswold, \linebreak Jeffery, and Townsend
in order to make the best use of these classes.

\medskip\noindent {\ttfamily\bfseries \index{Notification}Notification}

An instance of this class is generated by components and passed to the
connected event handler method. It holds three elements, which
are accessed as follows:

\begin{itemize}
\item \noindent\texttt{get\_source()} returns the component associated with the event. This may
be a subclass of either  \texttt{Component} or a  \texttt{MenuComponent}. If this is
\texttt{\&null}, then an Icon event has occurred which has not produced an  \texttt{Event}
from any component.

\item\noindent\texttt{get\_type()} returns a field to distinguish between different types of
event generated by the same component (\texttt{ACTION\_EVENT},
\texttt{MOUSE\_PRESS\_EVENT}, etc.).

\item\noindent\texttt{get\_param()} returns the parameter associated with the event, if any.
\end{itemize}

\newpage
\medskip\noindent{\ttfamily\bfseries \index{Dialog}Dialog : Container}

This is the parent class of a dialog window.

\begin{itemize}
\item\noindent\texttt{resize\_win(w, h)} resizes the window to the given dimensions.

\item\noindent\texttt{get\_win()} returns the Icon window associated with the dialog.

\item\noindent\texttt{set\_min\_size(w, h)} sets the minimum dimensions for a window. The user
will not be able to resize the window below this size.

\item\noindent\texttt{set\_focus(c)} sets the keyboard focus to component \texttt{c}.
\texttt{clear\_focus()} clears the focus.

\item\noindent\texttt{dialog\_event(e:Event)} must be defined in the subclass. It is
invoked on each event.

\item\noindent\texttt{dispose(x)} is normally invoked in response to an event.
It sets a flag to indicate that the dialog should be closed. If x is non-null,
the window is closed already.

\item\noindent\texttt{set\_unique(c)} is called by a component c to indicate the beginning of
unique event processing, whereby one component alone receives all events.

\item\noindent\texttt{clear\_unique(x)} unsets unique event processing mode. If x is \texttt{\&null}
then the final event in unique processing mode will be passed to all
objects; otherwise it will not.

\item\noindent\texttt{show\_modal(d)} opens and displays the dialog window, and accepts events
into it. As events occur they are handled, until a call to \texttt{dispose()}
is made, then the window is closed and the method returns. Parameter d
is the parent dialog, if any.

\item\noindent\texttt{Open()} opens the dialog window.

\item\noindent\texttt{Close()} closes the dialog window.

\item\noindent\texttt{process\_event(e)} processes Icon event e, calling event handlers.

\item\noindent\texttt{win : window} is the dialog's window.

\item\noindent\texttt{is\_open : flag} indicates whether the window is open.

\item\noindent\texttt{focus : Component} specifies the component with the current focus.

\item\noindent\texttt{unique\_flag : flag} controls unique processing, where one
component receives all events.

\item\noindent\texttt{re\_process\_flag : flag} tells whether to distribute last
Icon event during unique mode.

\item\noindent\texttt{buffer\_win} is a buffer window for double buffering.

\item\noindent\texttt{min\_width : integer} is the minimum width of window, or \texttt{\&null} if no
minimum.

\item\noindent\texttt{min\_height : integer} is the minimum height of window, or \texttt{\&null} if no
minimum.
\end{itemize}

\noindent{\ttfamily\bfseries \index{Component}Component}

This is the parent class of all the GUI components. All of its methods
and variables therefore apply to its sub-classes.

\begin{itemize}
\item\noindent\texttt{get\_x\_reference()}, \texttt{get\_y\_reference()},
\texttt{get\_w\_reference()}, and
\texttt{get\_h\_reference()} produce this
object's x position, y position, width, and height
values from which to compute absolute positions. May be over-ridden;
by default returns \texttt{self.x}, \texttt{self.y}, \texttt{self.w},
\texttt{self.h}.

\item\noindent\texttt{get\_cwin\_reference()}, \texttt{get\_cbwin\_reference()} produce
the cloned window (the reference object inherits the attributes by
cloning this window) and cloned buffer window.

\item\noindent\texttt{fatal(s)} prints an error message s together with the class name, and
stops the program.

\item\noindent\texttt{generate\_components() : Component*} generates the components for the
object. By default this just returns the component itself.

\item\noindent\texttt{is\_shaded() : flag?} succeeds if the component is shaded. A shaded
component, such as a button, may be displayed differently, and will not
generate events.

\item\noindent\texttt{set\_is\_shaded()} sets the shaded status of the component to
shaded.

\item\noindent\texttt{clear\_is\_shaded()} sets the shaded status of the component to not
shaded.

\item\noindent\texttt{toggle\_is\_shaded()} swaps the shaded status of the component.

\item\noindent\texttt{set\_draw\_border()} sets the component such that a border is
drawn.

\item\noindent\texttt{clear\_draw\_border()} sets the component such that a border is not
drawn.

\item\noindent\texttt{toggle\_draw\_border()} toggles whether or not to draw a border around
the component. Different objects respond differently to this flag being
set; some ignore it altogether.

\item\noindent\texttt{display(buffer\_flag)} draws, or re-draws, the component in the dialog
window. If \texttt{buffer\_flag} is not null, then the component is displayed
into the buffer window, not the dialog window (this is used for
double-buffering purposes).

\item\noindent\texttt{set\_accepts\_tab\_focus()} sets the
\texttt{accepts\_tab\_focus\_flag}, meaning
that the object will gain the keyboard focus by way of the user
pressing the \texttt{tab} key repeatedly.

\item\noindent\texttt{clear\_accepts\_tab\_focus()} clears the \texttt{accepts\_tab\_focus\_flag}.

\item\noindent\texttt{attrib(x[])} sets the graphic attributes of the component to the given
parameter list. For example:
\texttt{w.attrib("font=helvetica", "bg=pale blue")}. Arguments may be either
strings or lists of strings. A description of the attributes is in
Chapter 7 and detailed in \cite{GJT98}.

\item\noindent\texttt{get\_parent\_win() : window} returns the window in which
the component resides.

\item\noindent\texttt{set\_pos(x, y)} sets the x and y position of the component. Each
coordinate can be either an absolute pixel position, or a
percentage plus or minus an offset.

\iconcode{
\>c.set\_pos(100, "25\%") \\
\>c.set\_pos("50\%-20", "25\%+100")
}

\item\noindent\texttt{set\_align(x\_align:"l", y\_align:"t")} sets the alignment of the
component. Options for \texttt{x\_align} are \texttt{"l"}, \texttt{"c"} and \texttt{"r"}
for left, center, and right alignment. Options for \texttt{y\_align} are
\texttt{"t"}, \texttt{"c"} and \texttt{"b"} for top, center and bottom alignment.
Examples:

\iconcode{
\>\# \\
\>\# Place c centered in the center of the window, \\
\>\# its top left corner at (10,10). \\
\>\# \\
\>c.set\_pos("50\%", "50\%") \\
\>c.set\_align("c", "c") \\
\>c.set\_pos(10, 10) \\
\>c.set\_align("l", "t")
}

\item\noindent\texttt{set\_size(w, h)} sets the size of the component; parameters are as
for \texttt{set\_pos()} above. Some components have sensible default sizes,
but on others the size must be set explicitly.

\item\noindent\texttt{handle\_event(e) : Event?} is over-ridden by all this
class's subclasses. It is the method that handles an
Icon event e. It would not normally be called by a user program. Its
result is passed to the \texttt{dialog\_event()} method of the dialog.\\
The first two fields of the  \texttt{Event} structure are the Icon event e and the
object itself. The third field is the code, which can be any integer.
For example:

\iconcode{
\>method handle\_event(e) \\
\>\>... \\
\>\>return Event(e, self, 0) \\
\>end
}

\item\noindent\texttt{do\_shading(w)} is called from a component's
\texttt{display()}
method. This method filters the component to give a shaded appearance
if the \texttt{is\_shaded\_flag} is set. \texttt{w} is the window to
use (normally \texttt{cwin}).

\item\noindent\texttt{in\_region(x:\&x,y:\&y)} succeeds for unshaded components if
(x,y) lies within the component.

\item\noindent\texttt{got\_focus()} is called when the component gets the keyboard focus. It
may be extended in subclasses. For example:

\iconcode{
\>method got\_focus() \\
\>\>self\$Component.got\_focus() \\
\>\>\# \\
\>\>\# Display the box cursor \\
\>\>\# \\
\>\>display() \\
\>end
}

\item\noindent\texttt{lost\_focus()} is called when the component loses the keyboard focus; it
may be extended.

\item\noindent\texttt{unique\_start()} initiates unique event processing for this object by
calling the parent dialog's \texttt{set\_unique()}
method.

\item\noindent\texttt{unique\_end(x)} ends unique event processing for this object by calling
the parent dialog's \texttt{clear\_unique(x)} method.

\item\noindent\texttt{init()} sets up the cloned windows for the component. This method should
be called for any components created and used inside any custom
components.

\item\noindent\texttt{set\_parent\_dialog(x)} sets the owning \texttt{Dialog} of the component to
x.

\item\noindent\texttt{get\_parent\_dialog() : Dialog} returns the parent dialog of the
component.

\item\noindent\texttt{firstly()} is invoked after the position of the object has been
computed,
but before the object has been displayed in the window. This method may
be extended in subclasses.

\item\noindent\texttt{finally()} is invoked before the window is closed; it may
be extended in subclasses:

\iconcode{
\>method finally() \\
\>\>self\$Component.finally() \\
\>\>\# \\
\>\>\# Do something here \\
\>\>\# \\
\>\>... \\
\>\>return \\
\>end
}

\item\noindent\texttt{resize()} computes the absolute positions and sizes from the
specifications given by \texttt{set\_pos()}.

\item\noindent\texttt{set\_size()}. This method needs
to be extended for a component that contains other components. See the
section on custom components for an example.

\item\noindent\texttt{x\_spec}, \texttt{y\_spec} are the x and y positions as specified by \texttt{set\_pos()},
e.g. \texttt{"50\%"}.

\item\noindent\texttt{w\_spec}, \texttt{h\_spec} are the width and height specifiers
as used in \texttt{set\_size()}, e.g. \texttt{"100\%"}.

\item\noindent\texttt{x\_align}, \texttt{y\_align} are the x and y alignment as specified in
\texttt{set\_align()}, e.g. \texttt{"l"}, \texttt{"b"}.
\end{itemize}

The following four attributes are absolute dimensions in pixels,
compiled from \texttt{x\_spec}, \texttt{y\_spec}, \texttt{w\_spec},
and \texttt{h\_spec}, and the
dimensions of the enclosing object or window.
\begin{itemize}
\item\noindent\texttt{x} and \texttt{y} are the x and y positions computed from \texttt{x\_spec} and
\texttt{y\_spec}.

\item\noindent\texttt{w} and \texttt{h} are the width and height computed from \texttt{w\_spec} and \texttt{h\_spec}.

\item\noindent\texttt{cwin} is a cloned window created by combining the
\texttt{Dialog}'s canvas with the \texttt{Component}'s
attributes, so drawing into this window will draw straight to the
\texttt{Dialog} window with the correct attributes. \texttt{cbwin} is a cloned window
created by combining a buffer window with the
\texttt{Component}'s attributes. This is used solely for
double-buffering purposes.

\item\noindent\texttt{parent\_dialog} is the  \texttt{Dialog} class \index{instance}instance of which
this  \texttt{Component} is a part.

\item\noindent\texttt{attribs} is a list of strings specifying graphics attributes, e.g.
\texttt{["bg=blue", "resize=on"]}.

\item\noindent\texttt{has\_focus : flag} indicates whether the  \texttt{Component} currently has the
keyboard focus.

\item\noindent\texttt{accepts\_tab\_focus\_flag : flag} indicates whether the
 \texttt{Component} accepts keyboard focus by way of the tab key being pressed.

\item\noindent\texttt{draw\_border\_flag : flag} indicates whether the  \texttt{Component} should have a
border drawn around it. Many components (such as  \texttt{TextButton}s) ignore
this flag.

\item\noindent\texttt{is\_shaded\_flag : flag} indicates whether the  \texttt{Component}
currently is shaded.

\item\noindent\texttt{reference} links to the object used to calculate absolute sizes from
percentage sizes. For objects placed directly in the  \texttt{Dialog}, rather
than in some other object, this will point to the  \texttt{Dialog} itself,
which over-rides the several methods \texttt{get\_x\_reference()} etc.,
appropriately.
\end{itemize}

\medskip\noindent {\ttfamily\bfseries \index{Container}Container : Component}

This class contains other components. The container itself is
invisible. Many of \texttt{Component}'s methods are over-ridden
by \texttt{Container}. A \texttt{Dialog} is a sub-class of this
class.
\begin{itemize}
\item\noindent\texttt{add(c:Component)} adds the component c to the  \texttt{Container}.
\end{itemize}
Instance variable components are the components inside the  \texttt{Container}.

\medskip\noindent {\ttfamily\bfseries
\index{VisibleContainer}VisibleContainer : Component}

This is similar to a  \texttt{Container}, except that the object itself is a
capable of display.

\begin{itemize}
\item\noindent\texttt{add(c:Component)} adds the component c to the  \texttt{VisibleContainer}.
\end{itemize}

components are the components inside the  \texttt{VisibleContainer}.

\medskip\noindent{\ttfamily\bfseries \index{Button}Button : Component}

This is the parent class of button classes including  \texttt{TextButton} and
 \texttt{IconButton}. A button produces an  \texttt{Event} of code 0 when the button is
depressed, and code 1 when it is released. By default, when a button
holds the \index{keyboard}keyboard focus a dashed line appears just
within the button. When return is pressed an event of code 2 is
generated. The method \texttt{Dialog.set\_initial\_focus()} can be used to give
the button the keyboard focus when the dialog is first displayed.

\begin{itemize}
\item\noindent\texttt{set\_no\_keyboard()} disables the keyboard control over the button
described above. No dashed line will ever appear in the button
display and return will have no effect on the button even if it has the
focus.
\end{itemize}

\medskip\noindent {\ttfamily\bfseries \index{TextButton}TextButton : Button}

A button with a text label. The size of the button can either be set
using \texttt{set\_size()} or be left to default to a size based on the given
label.

\begin{itemize}
\item\noindent\texttt{set\_internal\_alignment(x)} sets the alignment of the label within the
button. The \linebreak parameter should be either \texttt{"l"}, \texttt{"c"} or \texttt{"r"} to
set the alignment to left, center or right respectively. If this method
is not invoked, then the alignment is centered.

\item\noindent\texttt{set\_label(x)} sets the label in the button to the given string.
Examples:

\iconcode{
\>b := TextButton() \\
\>b.set\_label("Cancel") \\
\>b.set\_pos("50\%", "80\%") \\
\>b.set\_align("c", "c") \\
\>add(b)
}
\end{itemize}

\medskip\noindent {\ttfamily\bfseries \index{IconButton}IconButton : Button}

This is a button with an Icon image within it. There is a useful program
in the Icon program library called xpmtoims, which will take an xpm
file and output the equivalent Icon image string, which can then be
inserted into a program. See also the X Window programs sxpm and pixmap
for viewing and editing xpm files respectively.

A border may be requested with \texttt{set\_draw\_border()}. Unless explicitly
specified, the size will default to the image's size,
plus a standard surrounding area if a border is requested.

\begin{itemize}
\item\noindent\texttt{set\_img(s:string)} sets the image to \texttt{s}, which should
be in Icon image format. Examples:

\iconcode{
\>\# \\
\>\# Create a button with a diamond image and a border \\
\>\# \\
\>b := IconButton() \\
\>b.set\_draw\_border() \\
\>b.set\_img("11,c1,\_ \\
\~{}\~{}\~{}\~{}\~{}0\~{}\~{}\~{}\~{}\~{}\_ \\
\~{}\~{}\~{}\~{}000\~{}\~{}\~{}\~{}\_ \\
\~{}\~{}0000000\~{}\~{}\_ \\
\~{}000000000\~{}\_ \\
\~{}\~{}0000000\~{}\~{}\_ \\
\~{}\~{}\~{}\~{}000\~{}\~{}\~{}\~{}\_ \\
\~{}\~{}\~{}\~{}\~{}0\~{}\~{}\~{}\~{}\~{}\_ \\
")
}
\end{itemize}

\medskip\noindent {\ttfamily\bfseries \index{ButtonGroup}ButtonGroup}

This class groups several  \texttt{Button}s together. Then, when the mouse is
clicked down on one of the  \texttt{Button}s and then dragged onto another before
being released, the other  \texttt{Button} will go
"down". This is the common behavior for
buttons in a bar along the top of an application.

\medskip\noindent{\sffamily\bfseries \bf Note:}\ {\sffamily
A  \texttt{Button} must be added to both the  \texttt{ButtonGroup} and the  \texttt{Dialog} too.}\medskip

Examples:

\iconcode{
\>bg := ButtonGroup() \\
\>b := TextButton() \\
\>b.set\_label("Okay") \\
\>add(b) \\
\>bg.add(b)
}

\begin{itemize}
\item\noindent\texttt{add(c:Button)} adds the given  \texttt{Button} to the  \texttt{ButtonGroup}.
\end{itemize}

\medskip\noindent{\ttfamily\bfseries \index{Label}Label : Component}

This simply creates a text label in the dialog window. Calling
\texttt{set\_draw\_border()} adds a border around the label. The size will
default if not set.

\begin{itemize}
\item\noindent\texttt{set\_label(s:string)} sets the label to the given string.

\item\noindent\texttt{set\_internal\_alignment(x)} sets the horizontal alignment of the label
within the area of the component; should be \texttt{"l"}, \texttt{"c"} or \texttt{"r"}. Default is
\texttt{"l"}. If the horizontal size is left to
default, then setting this field should make no difference, because the
size of the component will be set so that the string just fits into it.
\end{itemize}

\newpage
\noindent {\ttfamily\bfseries \index{Icon}Icon : Component}

This displays an icon, supplied in Icon image format. A border may be
requested with \texttt{set\_draw\_border()}. The size defaults to the
image's size, plus a standard surrounding area if a
border is requested.

\begin{itemize}
\item\noindent\texttt{set\_img(s:string)} sets the image to be displayed.
\end{itemize}

\medskip\noindent{\ttfamily\bfseries \index{Image}Image : Component}

This class loads an image from a file and displays it. The image should
be in GIF format. A border may be included with \texttt{set\_draw\_border()}.
The size of the area into which the image is drawn must be set with
\texttt{set\_size()}.

\begin{itemize}
\item\noindent\texttt{set\_filename(s:string)} sets the name of the file from which to load
the image; redisplay the image from the new file if appropriate.

\item\noindent\texttt{set\_scale\_up()} scales the image up to fit in the space
specified by \texttt{set\_size()}. The image is not distorted, but will be
expanded to fill one of the dimensions depending on its shape. If the
image is bigger than the specified size then it will be scaled down.

\item\noindent\texttt{set\_internal\_alignment(x:"c", y:"c")} sets the horizontal
and vertical alignment of the image within the component;
x should be \texttt{"l"}, \texttt{"c"} or \texttt{"r"},
y should be \texttt{"t"}, \texttt{"c"} or \texttt{"b"}.
\end{itemize}

\medskip\noindent {\ttfamily\bfseries \index{Border}Border : VisibleContainer}

This class provides decorative borders. The \texttt{add(c)} method
may optionally be used to set one other
component to be the title of the Border. This would normally be a
 \texttt{Label} object, but it could also be a  \texttt{CheckBox},  \texttt{Icon}, or whatever is
desired.
\begin{itemize}
\item\noindent\texttt{set\_internal\_alignment(x)} sets the alignment of the title
to \texttt{"l"}, \texttt{"c"} or \texttt{"r"}.
\end{itemize}

\iconcode{
\>b := Border() \\
\>\# \\
\>\# Add a Label as the title \\
\>\# \\
\>l := Label() \\
\>l.set\_label("Title String") \\
\>b.add(l) \\
\>add(b)
}

\medskip\noindent {\ttfamily\bfseries \index{ScrollBar}ScrollBar : Component}

This class provides horizontal and vertical scroll bars.
The first way to use a scroll bar is to set a total\_size
(represented by the whole bar), a page\_size (represented by the
draggable button) and an increment\_size (being the amount
added/subtracted when the top/bottom button is pressed). The value
then ranges from zero to (total\_size - page\_size) inclusive. An
initial value must be set with the \texttt{set\_value()} method. For example:

\iconcode{
\>vb := ScrollBar() \\
\>vb.set\_pos("85\%", "25\%") \\
\>vb.set\_size(20, "40\%") \\
\>vb.set\_total\_size(130) \\
\>vb.set\_page\_size(30) \\
\>vb.set\_increment\_size(1) \\
\>vb.set\_value(0) \\
\>add(vb)
}

Alternatively, a scroll bar can be used as a slider over a given range
of values. In this case, the range is set with \texttt{set\_range()}.
It is still necessary to set the \texttt{increment\_size} and the
\texttt{initial\_value}, but \texttt{page\_size} and
\texttt{total\_size} should not be set.
Real numbers as opposed to integers can be used for the range settings
if desired. For example:

\iconcode{
\>vb := ScrollBar() \\
\>vb.set\_pos("85\%", "25\%") \\
\>vb.set\_size(20, "40\%") \\
\>vb.set\_range(2, 25) \\
\>vb.set\_value(10) \\
\>vb.set\_increment\_size(1) \\
\>add(vb)
}

An  \texttt{Event} is returned whenever the buttons are pressed or the bar
dragged; the value can be retrieved by \texttt{get\_value()}. The event code
(obtainable by \texttt{get\_code()}) is 1 if the bar has been dragged, and 0 if
either button has been pressed or the bar released after being dragged.
This fact can be used to reduce the number of events which are
processed by the user's program - just ignore events
with code 1.

\begin{itemize}
\item\noindent\texttt{set\_is\_horizontal()} makes the scroll bar horizontal (default is
vertical).

\item\noindent\texttt{set\_range(x, y)} sets the scroll bar range (integer or real)
from x to y inclusive.

\item\noindent\texttt{set\_total\_size(x)} sets the total size which the scroll bar area
represents.

\item\noindent\texttt{get\_total\_size()} returns the total size.

\item\noindent\texttt{set\_page\_size(x)} sets the size that the bar in the scroll bar area
represents.

\item\noindent\texttt{get\_page\_size()} gets the page size.

\item\noindent\texttt{set\_value(x)} sets the value representing the top of the bar in the
scroll bar. The value is forced into range if it is not in range
already.

\item\noindent\texttt{get\_value()} gets the value.

\item\noindent\texttt{set\_increment\_size(x)} sets the amount by which to increase when a
button is pressed.
\end{itemize}

\medskip\noindent {\ttfamily\bfseries \index{TextField}TextField : Component}

 \texttt{TextField} is a class for a single input line of text. The text can
scroll within the area specified. By default, a border surrounds the
text area; this can be turned of by using \texttt{clear\_draw\_border()}. The
horizontal size must be set by the \texttt{set\_size()} method: there is no
default (the vertical size will default, however). An event is
generated when return is pressed (with code 0), and whenever the
contents are changed (with code 1).

\begin{itemize}
\item\noindent\texttt{get\_contents()} returns the present contents of the text field.
\texttt{set\_contents(x)} sets the contents of the field. If not invoked then
the initial content is the empty string. Examples:

\iconcode{
\>t := TextField() \\
\>t.set\_pos(50, 250) \\
\>\# \\
\>\# Vertical size will default \\
\>\# \\
\>t.set\_size(100) \\
\>t.set\_contents("Initial string") \\
\>add(t)
}

\item\noindent\texttt{set\_displaychar()} controls whether the characters that are typed
into the text field are displayed or not. \texttt{set\_displaychar("*")}
will display a ``\texttt{*}'' character for each character typed (useful
for hiding passwords). The default is \texttt{set\_displaychar(\&null)}
which displays the typed characters normally.
\end{itemize}

\medskip\noindent {\ttfamily\bfseries \index{CheckBox}CheckBox : Component}

This class creates a small button with a label which is either
in an on or off state. The button is an  Icon image, which may be
specified by the user if desired. The images and size default to
appropriate values if not specified.

\begin{itemize}
\item\noindent\texttt{set\_imgs(x, y)} sets the up/down images for the button. The images
should be in  Icon image format. The two images must have the same
dimensions.

\item\noindent\texttt{is\_checked()} succeeds if the button is down (checked); fail
otherwise.

\item\noindent\texttt{toggle\_is\_checked()} toggles the initial status of the button.

\item\noindent\texttt{set\_is\_checked()} sets the status of the button to checked.

\item\noindent\texttt{clear\_is\_checked()} sets the status of the button to not checked.

\item\noindent\texttt{set\_label(x)} sets the label of the component to the given
string.

\item\noindent\texttt{get\_status()} returns 1 if the  \texttt{CheckBox} is checked,
\texttt{\&null} otherwise.
Examples:

\iconcode{
\>c := CheckBox() \\
\>c.set\_pos(200, 100) \\
\>c.set\_label("Checkbox") \\
\>add(c)
}
\end{itemize}

\medskip\noindent {\ttfamily\bfseries \index{CheckBoxGroup}CheckBoxGroup}

This class contains \texttt{CheckBox} objects that act together as
"radio buttons". The image style of \texttt{CheckBox}es in a
 \texttt{CheckBoxGroup} draws diamonds rather
than boxes. The status of a  \texttt{CheckBoxGroup} should be set with the
\texttt{set\_which\_one()} method, not by turning the individual  \texttt{CheckBox}es
on/off with their own methods - that would confuse the program.

\medskip\noindent{\sffamily\bfseries \bf Note:}\ {\sffamily
A  \texttt{CheckBox} must be added to both the  \texttt{CheckBoxGroup} and the dialog box.}

\begin{itemize}
\item\noindent\texttt{set\_by\_flag(i)} sets the  \texttt{CheckBox} which is down according to the
integer i. If i = 1 then the first  \texttt{CheckBox} is down, if i = 2 the
second is down, etc for i = 4, 8, 16.

\item\noindent\texttt{get\_by\_flag()} returns an integer in the range 1, 2, 4, 8 ...
depending upon whether the first, second, third etc  \texttt{CheckBox} is down.

\item\noindent\texttt{add(c:CheckBox)} adds c to the  \texttt{CheckBoxGroup}.

\item\noindent\texttt{get\_which\_one()} returns the  \texttt{CheckBox} which is currently down.

\item\noindent\texttt{set\_which\_one(x:CheckBox)} sets which  \texttt{CheckBox} is down to x. Examples:

\iconcode{
\>\# \\
\>\# Create a CheckBoxGroup of 3 CheckBoxes \\
\>\# \\
\>c := CheckBoxGroup() \\
\>c1 := CheckBox() \\
\>c1.set\_pos(200, 50) \\
\>c1.set\_label("Checkbox 1") \\
\>add(c1) \\
\>c.add(c1) \\
\ \\
\>c2 := CheckBox() \\
\>c2.set\_pos(200, 90) \\
\>c2.toggle\_is\_shaded() \\
\>c2.set\_label("Checkbox 2") \\
\>add(c2) \\
\>c.add(c2) \\
\ \\
\>c3 := CheckBox() \\
\>c3.set\_pos(200, 130) \\
\>c3.set\_label("Checkbox 3") \\
\>add(c3) \\
\>c.add(c3) \\
\>\# \\
\>\# Initially, set the first one "on" \\
\>\# \\
\>c.set\_which\_one(c1)
}
\end{itemize}

\medskip\noindent {\ttfamily\bfseries \index{TextList}TextList : Component}

This class displays a list of strings. See the class  \texttt{EditableTextList}
if you require a multiline text input region. Horizontal and
vertical scroll bars are displayed if necessary.

Optionally the user can be allowed to
select either one line only, or several lines. In either case, an
event is generated when a line is selected.

\begin{itemize}
\item\noindent\texttt{get\_contents()} : list returns the current contents as a list of
strings.

\item\noindent\texttt{set\_contents(x:list, line, left\_pos, preserve\_selections)} sets the
contents to \texttt{x} and sets the position to line and left\_pos. If
these parameters are omitted then the default is to start at line 1,
with left offset zero if the window is not already open, or to retain
the existing position if it is. If the last parameter is non-null then
the current selections are retained; otherwise they are reset. This
method has no effect if the component is in editable mode and the
window is already open.

\iconcode{
\>tl := TextList() \\
\>tl.set\_contents(data) \\
\>... \\
|>\# \\
\>\# Amend data and go to end of data \\
\>\# \\
\>put(data, "New line") \\
\>tl.set\_contents(data, *data, 0)
}
\end{itemize}

The method \texttt{set\_select\_one()} specifies that only one line of the list
may be highlighted, while method \texttt{set\_select\_many()} specifies that
several lines of the list may be highlighted. Of no effect if in editable mode.

\begin{itemize}
\item\noindent\texttt{get\_selections()} : list returns a list of the numbers of the lines
that are highlighted.

\item\noindent\texttt{set\_selections(L)} sets the highlighted selections to a
given list of line numbers.

\iconcode{
\>tl := TextList() \\
\>tl.set\_pos("50\%", "50\%") \\
\>tl.set\_size("70\%", "50\%") \\
\>tl.set\_align("c", "c") \\
\>tl.set\_contents(data)\>\>\>\>\>\>\>\>\> \# data is a list of strings \\
\>add(tl)
}
\end{itemize}

\medskip\noindent {\ttfamily\bfseries \index{DropDown}DropDown}

This class is a superclass of  \texttt{List} and  \texttt{EditList} below.

\begin{itemize}
\item\noindent\texttt{set\_selection\_list(x)} sets the list of selections to the list
x.

\item\noindent\texttt{get\_selection():integer} returns the index of the item in the
list presently selected.
\end{itemize}

\medskip\noindent {\ttfamily\bfseries \index{List}List : Component : DropDown}

This component is for selecting one string from a list. When
a button is pressed a list appears (possibly with a scroll bar) from
which one item can be selected. An  \texttt{Event} is generated whenever an item
is selected. A width must be specified for this component.

\begin{itemize}
\item\noindent\texttt{set\_selection(x)} sets the selected item to element x.

\item\noindent\texttt{set\_constant\_label(x)} supplies a string that will always appear in
the text part of the component, rather than the currently selected item.
\end{itemize}

The methods for handling the list of selections are mostly
inherited from \texttt{DropDown}.

\iconcode{
\>L := List() \\
\>L.set\_selection\_list(["Red","Green","Yellow","Blue","Orange"]) \\
\>L.set\_size(120) \\
\>L.set\_pos(100, 100) \\
\>L.set\_selection(2)\>\>\>\>\>\>\>\>\> \# Green will be the first selection \\
\>add(L)
}

\medskip\noindent{\ttfamily\bfseries \index{EditList}EditList : Component : DropDown}

An \texttt{EditList} works like a \texttt{List}, but the user may
edit the item that is selected. An extra method is therefore supplied
to get the content, as it may not correspond to an element of the list.
An  \texttt{Event} is generated with code 0 if an element of the list is
selected, with code 1 if return is pressed, and with code 2 if the user
edits the selected item.

\begin{itemize}
\item\noindent\texttt{get\_contents()} returns the contents of the selected item (which may
have been edited).

\item\noindent\texttt{set\_contents(x)} sets the initial contents of the text to the given
string.
\end{itemize}

\medskip\noindent {\ttfamily\bfseries \index{MenuBar}MenuBar : Component}

This class is the base from which menu systems are created.  \texttt{Menu} items
are added to this class; they are not separate components added to the
dialog itself. The default position is (0, 0); the default size is
100\% of the width of the screen and a reasonable height based on the
font specified.

\begin{itemize}
\item\noindent\texttt{add(c:Menu)} adds c to the  \texttt{MenuBar}. This will be one
drop down menu. Items are then added to the  \texttt{Menu}.
\end{itemize}

\medskip\noindent {\ttfamily\bfseries \index{MenuButton}MenuButton : Component}

This is similar to  \texttt{MenuBar}, but holds just a single drop-down menu,
rather than several.

\begin{itemize}
\item\noindent\texttt{set\_menu(x:Menu)} sets the menu to be displayed
when the component is clicked.
\end{itemize}

\medskip\noindent {\ttfamily\bfseries \index{MenuComponent}MenuComponent}

This is the superclass of all the objects that make up the menu system
(other than  \texttt{MenuBar} of course). For components that appear in a menu
with a label, an optional left/right string/image can be set.

\begin{itemize}
\item\noindent\texttt{set\_label\_left(x)} sets the optional left label to the given
string.

\item\noindent\texttt{set\_label\_right(x)} sets the optional right label to the given
string.

\item\noindent\texttt{set\_img\_left(x)} sets the optional left image to the given Icon
image.

\item\noindent\texttt{set\_img\_right(x)} sets the optional right image to the given Icon
image.

\item\noindent\texttt{toggle\_is\_shaded()} toggles whether or not the item is shaded. If it
is, it is displayed in a filtered way and will not accept input.

\item\noindent\texttt{set\_is\_shaded()} sets the shaded status of the component to
shaded.

\item\noindent\texttt{clear\_is\_shaded()} sets the shaded status of the component to not
shaded.

\item\noindent\texttt{set\_label(x)} sets the center label to the given string.
\end{itemize}

\medskip\noindent {\ttfamily\bfseries \index{SubMenu}SubMenu : MenuComponent}

This class encapsulates a \texttt{Menu} object that when selected will
display something outside the menu itself (for example a sub-menu of
other menu items). It is intended to be extended by custom menu
components, and should not be instantiated. Methods are empty.

\begin{itemize}
\item\noindent\texttt{hide\_non\_menu()} and \texttt{set\_which\_open(x)} are called
by  \texttt{Menu} for any  \texttt{SubMenu} object,
but would not normally need to be over-ridden by a custom class.

\item\noindent\texttt{resize()} may be overridden to initialize the width and height
of the object.

\item\noindent\texttt{display()} must be over-ridden; it displays the object.

\item\noindent\texttt{handle\_event(e)} handles the Icon event e and must be over-ridden.

\item\noindent\texttt{hide()} hides (closes) the object's display and must be
over-ridden.
\end{itemize}

\medskip\noindent {\ttfamily\bfseries \index{Menu}Menu : SubMenu}

This class encapsulates a drop down menu, or a sub-menu. The left,
center and right labels/images of the elements within it are formatted
within the menu automatically.

\begin{itemize}
\item\noindent\texttt{add(c:Component)} adds the given component to the  \texttt{Menu}.
\end{itemize}

\medskip\noindent{\ttfamily\bfseries TextMenuItem : MenuComponent}

This class encapsulates a single text item in a  \texttt{Menu}. It has no
additional methods that the user need call other than are contained in
its parent class,  \texttt{MenuComponent}.

\medskip\noindent{\ttfamily\bfseries \index{CheckBoxMenuItem}CheckBoxMenuItem : MenuComponent}

This class encapsulates a check box in a menu. Several  \texttt{CheckBoxMenuItem}s
may be added to a  \texttt{CheckBoxGroup} structure to give "radio
buttons" within menus.

\begin{itemize}
\item\noindent\texttt{set\_imgs(x, y)} sets the up and down images to x and y respectively.
The default is boxes, unless
the component is in a  \texttt{CheckBoxGroup} in which case the
default is diamonds.

\item\noindent\texttt{is\_checked()} succeeds if the component is checked; fail
otherwise.

\item\noindent\texttt{set\_is\_checked()} sets the status of the button to checked.

\item\noindent\texttt{clear\_is\_checked()} sets the status of the button to not checked.
\end{itemize}

\medskip\noindent{\ttfamily\bfseries \index{MenuSeparator}MenuSeparator : MenuComponent}

This is a horizontal bar in a  \texttt{Menu}, for decorative purposes. It
has no user methods.

\medskip\noindent{\ttfamily\bfseries \index{TableColumn}TableColumn : TextButton}

This class provides one column within a  \texttt{Table} class, which displays a
table of data. A column has a label with a button that produces an
event when clicked. The column may be expanded or contracted by
dragging the right edge of the button. Calling the \texttt{set\_label(x)} method
of the superclass,  \texttt{TextButton}, sets the label.

\begin{itemize}
\item\noindent\texttt{set\_column\_width(x)} sets the initial width of the column in pixels;
this is required.

\iconcode{
\>c1 := TableColumn() \\
\>c1.set\_internal\_alignment("r")\>\>\>\>\>\>\>\>\> \# Label is right aligned \\
\>c1.set\_column\_width(80) \\
\>c1.set\_label("Number")
}
\end{itemize}

\medskip\noindent{\ttfamily\bfseries \index{Table}Table : Component}

This class displays a table, the columns of which are set up using
 \texttt{TableColumn}s.

\begin{itemize}
\item\noindent\texttt{set\_button\_bar\_height(x)} sets the height of the buttons at the top
in pixels.

\item\noindent\texttt{set\_contents(x)} sets the contents of the table. The parameter should be
a two dimensional list. Each element of the list should correspond
to one row of the table.

\item\noindent\texttt{set\_contents(x, line:1, left\_pos, preserve\_selections)} sets the
contents to x and sets the position to \texttt{line} and
\texttt{left\_pos}. The default \texttt{left\_pos} offset is
the existing position if the window is already open, or zero
otherwise. The
last parameter is a flag that directs whether to retain the current selections.


\item\noindent\texttt{add(c:TableColumn)} adds the given  \texttt{TableColumn} to the  \texttt{Table}.

\item\noindent\texttt{set\_select\_one()} specifies that only one row of the table may be
highlighted.

\item\noindent\texttt{set\_select\_many()} allows several rows of the table to be
highlighted.

\item\noindent\texttt{get\_selections()} returns a list of the numbers of the rows which are
highlighted.

\item\noindent\texttt{set\_selections(L)} sets the line numbers that are selected to the
list of line numbers L.
\end{itemize}

\medskip\noindent{\ttfamily\bfseries \index{TabItem}TabItem : Container}

This class represents a single pane in a \texttt{TabSet}.  \texttt{Component}s are added to
the  \texttt{TabItem} using  \texttt{Container}'s \texttt{add()} method. They are
then displayed and accept input when that  \texttt{TabItem} is selected.
 \texttt{Component}s added to the  \texttt{TabItem} are positioned relative to the position
and size of the parent  \texttt{TabSet}. Therefore for example
\texttt{set\_pos("50\%", "50\%")} refers to the center of the \texttt{TabSet}
rather than the center of the screen. The components also inherit any
window attributes of the \texttt{TabSet}, such as font, color and so on.

\begin{itemize}
\item\noindent\texttt{set\_label(x)} sets the  \texttt{TabItem}'s label.
\end{itemize}

\medskip\noindent{\ttfamily\bfseries \index{TabSet}TabSet : VisibleContainer}

This class holds the several  \texttt{TabItem}s.
\begin{itemize}
\item\noindent\texttt{set\_which\_one(x)} sets the displayed  \texttt{TabItem};
default is the first one.

\item\noindent\texttt{add(c:TabItem)} adds the given  \texttt{TabItem} to the  \texttt{TabSet}.
\end{itemize}

\medskip\noindent{\ttfamily\bfseries \index{Panel}Panel : VisibleContainer}

This class simply contains other components. The components inside have
their sizes and positions computed relative to the  \texttt{Panel} and also
inherit the  \texttt{Panel}'s windowing attributes.  \texttt{Component}s
are added using the \texttt{add()} method of  \texttt{VisibleContainer}.

\medskip\noindent{\ttfamily\bfseries \index{OverlayItem}OverlayItem : Container}

This class is one "pane" in an  \texttt{OverlaySet},
which is rather like a \texttt{TabSet} except that there are no tabs, and
control over which pane is displayed is entirely the affair of the
program. The components inside have their sizes and positions computed
relative to the parent  \texttt{OverlaySet} and also inherit the
 \texttt{OverlaySet}'s windowing attributes.  \texttt{Component}s are
added using the \texttt{add()} method of  \texttt{Container}.

\medskip\noindent{\ttfamily\bfseries \index{OverlaySet}OverlaySet : VisibleContainer}

An  \texttt{OverlaySet} is a set of  \texttt{OverlayItem}s.

\begin{itemize}
\item\noindent\texttt{set\_which\_one(x)} sets the currently displayed  \texttt{OverlayItem};
default is the first.

\item\noindent\texttt{add(c:OverlayItem)} adds the given  \texttt{OverlayItem} to the  \texttt{OverlaySet}.
\end{itemize}

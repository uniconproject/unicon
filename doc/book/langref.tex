\chapter{Language Reference}	% use when build the Unicon book
%\section{Introduction}		% use when building UTR8

Unicon is expression-based. Nearly everything is an expression,
including the common \index{control structure}control structures such
as while loops. The only things that are not expressions are
declarations for procedures, methods, variables, records, classes, and
linked libraries.

In the reference, types are listed for parameters and results. If an
identifier is used, any type is allowed. For results,
\index{generator}generator expressions are further annotated with an
asterisk (\texttt{\textbf{*}}) and non-generators that can
\index{expression failure}fail are annotated with a question mark
(\texttt{?}). A question mark by itself (short for \textsf{null?})
denotes a predicate whose success or failure is what matters; the
predicate return value (\texttt{\&null}) is not significant.

\index{thread safety}
A ``Road Narrows''  \WarningNotThreadSafe\ sign in either margin
--- like the sign reproduced here --- indicates that the function
or operation is not thread-safe and should be protected from different
threads executing it at the same time (the sign is intended to suggest
that only one thing should be allowed through at any one time). In some cases,
notably the augmented operations (\texttt{+:= } etc.) and the 3D operations,
the entire group is not thread-safe. In these cases the signs that would be
beside the individual functions or operations are replaced by a single cautionary
sign at the head of the group.
In a few instances, a small sign showing parallel arrows\ConcurrencyIssue\ is used to highlight a general
comment about concurrency (rather than a specific thread-safety issue).

\section{Immutable Types: Numbers, Strings, Csets, Patterns}

Unicon's immutable types are integers, real numbers,
strings, and csets. Values of these types cannot change. Operators and
functions on immutable types produce new values rather than modify
existing ones. The simplest expressions are literal values, which occur
only for immutable types. A literal value evaluates to itself.

\subsection*{Integer}

Integers may have an arbitrary magnitude. Decimal \index{integer}integer
literals are contiguous sequences of the digits 0 through 9, optionally
preceded by a + or - sign.  Suffixes K, M, G, T, or P multiply
a literal by 1024, 1024\^{}2, 1024\^{}3, 1024\^{}4, and
1024\^{}5, respectively.

Radix integer literals use the format
\textit{radix}R\textit{digits}, where \textit{radix} is a base in the
range 2 through 36, and \textit{digits} consists of one or more
numerals in the supplied radix. After values 0-9, the letters A-Z are
used for values 10-35. Radix literals are case insensitive, unlike the
rest of the language, so the R may be upper or lower case, as may the
following alphabetic digits.

\subsubsection{Large Integers}
Unicon automatically converts an integer value into a ``large
integer'' value when its magnitude exceeds the limits of the
underlying hardware's native integer representation. Large integers
are interchangeable with native integers in most circumstances, but
there are a few places where only a native integer (here denoted by
\texttt{i}, \texttt{j} and \texttt{k}) is acceptable.
\begin{description}
\item[--] \texttt{i to j by k} and, by implication, \texttt{!i}
\item[--] \texttt{seq(i,j)}
\item[--] Assignment to integer valued keywords
\item[--] \textit{expr}~\verb+\+~\texttt{i}
\item[--] \texttt{exit(i)}\\
  A number of other standard functions will cause a runtime error ---
  or fail, depending on the value of \texttt{\&error} --- if given a
  large integer as a parameter (for example, \texttt{delay} or the
  second parameter of \texttt{get}), but it is difficult to envisage a
  situation where a large integer value makes sense in most of these
  contexts. Perhaps, as the capabilities of computers increase, this
  view will come to be seen as a failure of imagination.
\end{description}

The penalty paid for supporting large integers if they are not used is
very small so, although the support for large integers can be removed
via a build option, almost all implementations provide it (and it is
enabled by default).

Note that large integer literals in a program are converted to actual
large integers when evaluated during program execution. Consequently,
such literals should not be placed in loops or other places in which
they are evaluated frequently.  Arithmetic operations on native
integers are considerably faster than using large integers so, if they
can avoided without major effort, it is probably worth doing so.

\subsection*{Real}

\index{real number}Reals are double-precision floating-point values.
Real decimal literals are contiguous sequences of the digits 0 through
9, with a decimal point (a period) somewhere within or at either end of
the digits. Real exponent literals use the format
\textit{number}E\textit{integer}; E may be upper or lower case.
Note that the integer must be a decimal integer (including the optional
+ or - sign); Radix integer literals are not supported in an exponent.

\subsection*{String}

\index{string}Strings are sequences of 0 or more characters, where a
character is a value with a platform-dependent size and symbolic
representation. On platforms with multi-byte character sets, multiple
Icon characters represent a single symbol using a platform-dependent
encoding.
String literals consist of 0 or more characters enclosed in double
quotes. A string literal may include escape sequences that use multiple
characters to encode special characters. The escape sequences are given
in Table A-1. Incomplete \index{string!multi-line}string literals may
be continued on the next line if the last character on a line is an
underscore (\_). In that case, the underscore, the newline, and any
whitespace at the beginning of the next line are not part of the string
literal.

\begin{center}
{\sffamily\bfseries Table A-1}

{\sffamily\bfseries Escape Codes and Characters}
\end{center}

\begin{center}
\begin{xtabular}{|m{0.38in}|m{0.8in}|m{0.4in}|m{0.855in}|m{0.38in}|m{1.14in}|m{0.38in}|m{0.68in}|}
\hline
{\sffamily\bfseries Code} &
{\sffamily\bfseries Character} &
{\sffamily\bfseries Code} &
{\sffamily\bfseries Character} &
{\sffamily\bfseries Code} &
{\sffamily\bfseries Character} &
{\sffamily\bfseries Code} &
{\sffamily\bfseries Character}\\\hline
\ \ {\textbackslash}b & backspace &
\ \ {\textbackslash}d & delete &
\ \ {\textbackslash}e & escape &
\ \ {\textbackslash}f & form feed\\\hline
\ \ {\textbackslash}l & line feed &
\ \ {\textbackslash}n & newline &
\ \ {\textbackslash}r & carriage return &
\ \ {\textbackslash}t & tab\\\hline
\ \ {\textbackslash}v & vertical tab &
\ {\textbackslash}' & quote &
\ \ {\textbackslash}" & double quote &
\ \ {\textbackslash}{\textbackslash} & backslash\\\hline
\ {\textbackslash}\textit{ooo} & octal &
\ {\textbackslash}x\textit{hh} & hexadecimal  &
\ {\textbackslash}\^{}\textit{x} & Control-\textit{x} &
~
 &
~
\\\hline
\end{xtabular}
\end{center}


\subsection*{Cset}

\index{cset}Csets are sets of 0 or more characters. Cset literals
consist of 0 or more characters enclosed in single quotes. As with
strings, a \index{cset literal}cset literal may include escape
sequences that use multiple characters to encode special characters.

\subsection*{Pattern}

\index{pattern}Patterns are an immutable structure type used in
matching, parsing or categorizing strings.  Pattern literals consist
of regular expressions enclosed in less than ($<$) and greater than
($>$) symbols. Within such marks, operators and reserved words do not
have their normal meaning; instead concatenation becomes the implicit
operator and a few characters have special interpretations, including
asterisk, plus, question mark, curly braces, square brackets, and the
period character.  In addition to pattern literals, patterns may be
composed using a number of pattern constructor operators and functions.

\section{Mutable Types: Containers and Files}

Mutable types' values may be altered. Changes to a
\index{mutable value}mutable value affect its allocated memory or its
associated OS resource. Mutable types include lists, tables,
sets, records, objects, and files, including windows, network
connections and \index{database}databases. These types are described in
the entries for \index{constructor}constructors that
create them. \index{structure types}Structure types hold
collections of elements that may be of arbitrary, mixed type.
\AreNotThreadSafe{Mutable types}

\subsection*{List}

\index{list}Lists are dynamically sized, ordered sequences of zero or
more values. They are constructed by function, by an explicit
operator, or implicitly by a call to a variable argument procedure.
They change size by \index{stack}stack and \index{queue}queue functions.

\subsection*{Table}

\index{table}Tables are dynamically sized, unordered mappings from keys
to elements. They are constructed by function. The keys may be of
arbitrary, mixed type.

\subsection*{Set}

\index{set}Sets are unordered collections. They are constructed by function.

\subsection*{Record}

\index{record}Records are ordered, fixed length sequences of elements
accessed via named fields.

\subsection*{Object}

\index{object}Objects are ordered, fixed length sequences of elements that may
be accessed via named fields and methods. Accessing an object's fields from
outside its methods (using it as a record) is legal but deprecated.

\subsection*{File}

\index{file}Files are system resources corresponding to data on secondary
storage, areas on users' displays, network connections, or
\index{database}databases. Operations on files cause input or output side
effects on the system outside of the program execution.

\section{Variables}

Variables are names for locations in memory where values can be stored.
Values are stored in variables by \index{assignment}assignment
operators. A \index{variable}variable name begins with a letter or
underscore, followed by zero or more letters, underscores, or digits.
Variable names are case-sensitive.
A variable name cannot be the same as one of Icon's
reserved words, nor can it be the same as one of
Icon's keywords if it follows an adjacent ampersand
character. Variables can hold values of any type, and may hold
different types of values at different times during program execution.

There are four kinds of variables: \index{global}global,
\index{local}local, \index{static, and class}static, and class. Global,
local, and static variables are declared by introducing one of the
reserved words (\texttt{global}, \texttt{local}, or \texttt{static})
followed by a comma-separated list of variable names. Global variables
are declared outside of any procedure or method body, while local and
static variables are declared at the beginning of procedure and method
bodies. Local and static variable names may be followed by
an assignment operator and an initial value; otherwise variables
other than procedure and class names begin with the value
\texttt{\&null}.

\index{aliasing}\textit{Aliasing} occurs when two or more variables
refer to the same value, such that operations on one variable might
affect the other. Aliasing is a common source of program bugs.
Variables holding integer, real, string, or cset values are never
aliased, because those types are immutable.

\subsection*{Global}

Global variables are visible everywhere in the program, and exist at the same
location for the entire program execution. Declaring a procedure declares a
global variable initialized to the procedure value that corresponds to the
code for that procedure.
\AreNotThreadSafe{Global variables}

\subsection*{Local}

Local variables exist and are visible within a single procedure or method only
for the duration of a single procedure invocation, including suspensions and
resumptions, until the procedure returns, fails, or is \textit{vanquished} by
the return or failure of an ancestor invocation while it is suspended.
Undeclared variables in any \index{scope}scope are implicitly local, but this
dangerous practice should be avoided in large programs.

Variables that are declared as \textit{parameters} are local variables
that are preinitialized to the values of actual parameters at the time
of a procedure or method invocation. The semantics of parameter passing
are the same as those of assignment.

\subsection*{Static}

Static variables are visible only within a single procedure or method, but exist
at the same location for the entire program execution. The value stored in a
static variable is preserved between multiple calls to the procedure in which it
is declared.
\AreNotThreadSafe{Static variables}

\subsection*{Class}

Class variables are visible within the methods of a declared class.  Class
variables are created for each \index{instance!class}instance (object) of the
class. The lifespan of class variables is the life span of the instance to which
they belong. The value stored in a class variable is preserved between multiple
calls to the methods of the class in which it is declared.
\AreNotThreadSafe{Class variables}

\section{Keywords}

Keywords are names with global \index{scope}scope and special semantics within
the language. They begin with an ampersand character. Some keywords are names of
common constant values, while others are names of variables that play a special
role in Icon's \index{control structure}control structures. The
name of the keyword is followed by a : if it is read-only, or a := if it is a
variable, followed by the type of value the keyword holds.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&allocated : integer* } \hfill {\bf report memory use}

\noindent
\index{memory use}\texttt{\&allocated} generates the cumulative number
of bytes allocated in heap, static, string, and block regions during
the entire program execution.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&ascii : cset } \hfill {\bf ASCII character set}

\noindent
\index{ASCII, \&ascii}\texttt{\&ascii} produces a cset corresponding to
the ASCII characters.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&clock : string } \hfill {\bf time of day}

\noindent
\texttt{\&clock} produces a string consisting of the current
\index{time of day \&clock}time of day in hh:mm:ss format.
See also keyword \texttt{\&now}.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&collections : integer* } \hfill {\bf garbage collection activity}

\noindent
\index{garbage collection}\texttt{\&collections} generates the number of
times memory has been reclaimed in heap, static, string, and block
regions.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&column : integer } \hfill {\bf source code column}

\noindent
\texttt{\&column} returns the \index{source code}source code
\index{column number}column number of the current execution point. This
is especially useful for execution monitoring.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&cset : cset } \hfill {\bf universal character set}

\noindent
\index{cset, universal \&cset}\texttt{\&cset} produces a cset constant
corresponding to the universal set of all characters.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&current :co{}-expression } \hfill {\bf current co{}-expression}

\noindent
\index{current co-expression}\texttt{\&current} produces the
co-expression that is currently executing.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&date : string } \hfill {\bf today's date}

\noindent
\index{today \&date}\texttt{\&date} produces the current
\index{date}date in yyyy/mm/dd format.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&dateline : string } \hfill {\bf time stamp}

\noindent
\index{time stamp}\texttt{\&dateline} produces a human-readable time
stamp that includes the day of the week, the date, and the current
time, down to the minute.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&digits : cset } \hfill {\bf digit characters}

\noindent
\index{digits, cset \&digits}\texttt{\&digits} produces a cset constant
corresponding to the set of digit characters 0-9.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&dump := integer } \hfill {\bf termination dump}

\noindent
\texttt{\&dump} controls whether the program dumps information on
program termination or not. If \texttt{\&dump} is nonzero when the
program halts, a dump of local and global variables and their values is
produced.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&e : real } \hfill {\bf natural log e}

\noindent
\index{natural log, \&e}\texttt{\&e} is the base of the natural
logarithms, 2.7182818...

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&errno : integer? } \hfill {\bf system error code}

\noindent
\texttt{\&errno} is the platform-specific error code for the previous
failed system call, if there was one.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&error := integer } \hfill {\bf fail on error}

\noindent
\index{error!convert to failure}\texttt{\&error} controls whether
runtime errors are converted into expression failure. By assigning to
this keyword, error conversion can be enabled or disabled for specific
sections of code. The integer \&error is decremented by one on each
error, and if it reaches zero, a runtime error is generated. Assigning
a value of -1 effectively disables runtime errors indefinitely. 
There is not one \texttt{\&error} integer for each thread \ConcurrencyIssue\
--- the value applies to the whole program, not just the thread that sets it.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&errornumber : integer? } \hfill {\bf runtime error code}

\noindent
\texttt{\&errornumber} is the error number of the last runtime error
that was converted to failure, if there was one.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&errortext : string? } \hfill {\bf runtime error message}

\noindent
\index{error!message, \&errortext}\texttt{\&errortext} is the error
message of the last error that was converted to failure.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&errorvalue : any? } \hfill {\bf offending value}

\noindent
\texttt{\&errorvalue} is the erroneous value of the last error that was
converted to failure.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&errout : file } \hfill {\bf standard error file}

\noindent
\index{error!standard file \&errout}\texttt{\&errout} is the standard
error file. It is the default destination to which runtime errors and
program termination messages are written.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&eventcode := integer } \hfill {\bf program execution event}

\noindent
\index{event code!program execution}\texttt{\&eventcode} indicates the
kind of behavior that occurred in a monitored program at the time of
the most recent call to \texttt{EvGet()}. This keyword is only
supported under interpreters built with execution monitoring support.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&eventsource := co{}-expression } \hfill {\bf source of program execution events}

\noindent
\texttt{\&eventsource} is the co-expression that transmitted the most
recent event to the current program. This keyword is null unless the
program is an execution monitor. See also \texttt{\&source}. Under a
monitor coordinator, \texttt{\&eventsource} is the coordinator and
global variable Monitored is the target program.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&eventvalue := any } \hfill {\bf program execution value}

\noindent
\index{event value!program execution}\texttt{\&eventvalue} is a value
from the monitored program that was being processed at the time of the
last program event returned by \texttt{EvGet()}. This keyword is only
supported under interpreters built with execution monitoring support.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&fail : none } \hfill {\bf expression failure}

\noindent
\index{expression failure!\&fail}\texttt{\&fail} never produces a
result. Evaluating it always fails.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&features : string* } \hfill {\bf platform features}

\noindent
\index{features}\texttt{\&features} generates strings that indicate the
non-portable features supported on the current platform.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&file : string? } \hfill {\bf current source file}

\noindent
\texttt{\&file} is the name of the \index{source file}source file for
the current execution point, if there is one. This is especially useful
for execution monitoring.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&host : string } \hfill {\bf host machine name}

\noindent
\index{host machine name, \&host}\texttt{\&host} is a string that
identifies the host computer Icon is running on.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&input : file } \hfill {\bf standard input file}

\noindent
\index{input!standard file \&input}\texttt{\&input} is a standard input
file. It is the default source for file input functions.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&lcase : cset } \hfill {\bf lowercase letters}

\noindent
\index{lowercase, cset \&lcase}\texttt{\&lcase} is a cset consisting of
the lowercase letters from a to z.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&letters : cset } \hfill {\bf letters}

\noindent
\index{letters, cset \&letters}\texttt{\&letters} is a cset consisting
of the upper and lowercase letters A-Z and a-z.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&level : integer } \hfill {\bf call depth}

\noindent
\index{call depth}\texttt{\&level} gives the nesting level of the
currently active procedure call. This keyword is not supported under
the optimizing compiler, iconc.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&line : integer } \hfill {\bf current source line number}

\noindent
\index{line number}\texttt{\&line} is the line number in the
\index{source code!line}source code that is currently executing.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&main : co{}-expression } \hfill {\bf main task}

\noindent
\index{main task}\texttt{\&main} is the co-expression in which program
execution began.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&now : integer } \hfill {\bf current time}

\noindent
\index{now}\texttt{\&now} produces the current time as the
number of seconds since the epoch beginning 00:00:00 GMT, January 1,
1970. See also \&clock

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&null : null } \hfill {\bf null value}

\noindent
\index{null value}\texttt{\&null} produces the null value.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&output : file } \hfill {\bf standard output file}

\noindent
\index{output!standard file \&output}\texttt{\&output} is the standard
output file. It is the default destination for file output.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&phi : real } \hfill {\bf golden ratio}

\noindent
\index{phi, golden ratio \&phi}\index{golden ratio, \&phi}\texttt{\&phi}
is the golden ratio, 1.618033988...

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&pi : real } \hfill {\bf pi}

\noindent
\index{pi, 3.14... \&pi}\texttt{\&pi} is the value of pi, 3.141592653...

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&pos := integer } \hfill {\bf string scanning position}

\noindent
\index{position, string}\texttt{\&pos} is the position within the
current subject of string scanning. It is assigned implicitly by
entering a string scanning environment, moving or tabbing within the
environment, or assigning a new value to \texttt{\&subject}.
\texttt{\&pos} may not be assigned a value that is outside the range of
legal indices for the current \texttt{\&subject} string.
Each thread has its own instance of
\texttt{\&pos}; \ConcurrencyIssue assigning a value to it in one
thread does not affect the string scanning environment of any another thread.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&progname := string } \hfill {\bf program name}

\noindent
\index{program name}\texttt{\&progname} is the name of the current
executing program.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&random := integer } \hfill {\bf random number seed}

\noindent
\index{random!number seed}\texttt{\&random} is the seed for random
numbers produced by the random operator, unary \texttt{?}. It is
assigned a different sequence for each execution but may be explicitly
set for reproducible results. Each thread has its own instance of
\texttt{\&random}; \ConcurrencyIssue setting it in one thread does
not affect the random sequence produced by another thread.
\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&regions : integer* } \hfill {\bf region sizes}

\noindent
\index{region sizes}\texttt{\&regions} produces the sizes of the static
region, the string region, and the block region. The first result is
zero; it is included for backward compatibility reasons.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&source : co{}-expression } \hfill {\bf invoking co{}-expression}

\noindent
\texttt{\&source} is the co-expression that activated the current
co-expression.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&storage : integer* } \hfill {\bf memory in use}

\noindent
\index{memory use}\texttt{\&storage} gives the amount of memory
currently used within the static region, the string region, and the
block region. The first result is always zero and is included for
backward compatibility reasons.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&subject := string } \hfill {\bf string scanning subject}

\noindent
\index{subject, string scanning}\texttt{\&subject} holds the default
value used in string scanning and analysis functions. Assigning to
\texttt{\&subject} implicitly assigns the value \texttt{1} to
\texttt{\&pos}.
Each thread has its own instance of 
\texttt{\&subject}; \ConcurrencyIssue assigning a value to it in one
thread does not affect the string scanning environment of any another thread.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&time : integer } \hfill {\bf elapsed time}

\noindent
\index{elapsed time}\texttt{\&}\index{time!since start}\texttt{time}
gives the number of milliseconds of CPU time that have elapsed since
the program execution began. For wall clock time see \texttt{\&now} or
\texttt{\&clock}.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&trace := integer } \hfill {\bf trace program}

\noindent
\texttt{\&trace} specifies the number of procedure actions
(call, return, suspend, resume, or fail) for which
program execution will be traced. 0 means no \index{tracing}tracing.
A negative value enables tracing with no limit.
\texttt{\&trace} can be set outside the program using the \texttt{TRACE}
\index{environment variable!TRACE}environment variable, or set to -1 via
the \texttt{{}-t} compiler option.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&ucase : cset } \hfill {\bf upper case letters}

\noindent
\index{upper case}\texttt{\&ucase} is a cset consisting of all the upper
case letters from A to Z.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&version : string } \hfill {\bf version}

\noindent
\index{version}\texttt{\&version} is a string that indicates which
version of Unicon or Icon is executing.

\subsection*{Graphics keywords}

Several of the graphics keywords are variables with assignment
restricted to value of a particular type or types. Graphics keywords
are more fully described in [Griswold98].

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&col := integer } \hfill {\bf mouse location, text column}

\noindent
\texttt{\&col} is the mouse location in text columns during the most
recent \texttt{Event()}. If \texttt{\&col} is assigned, \texttt{\&x}
gets a corresponding pixel location in the current font on
\texttt{\&window}.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&control : integer } \hfill {\bf control modifier flag}

\noindent
\texttt{\&control} produces the null value if the control key was
pressed at the time of the most recently processed event, otherwise
\texttt{\&control} fails.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&interval : integer } \hfill {\bf time since last event}

\noindent
\texttt{\&interval} produces the time between the most recently
processed event and the event that preceded it, in milliseconds.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&ldrag : integer } \hfill {\bf left mouse button drag}

\noindent
\texttt{\&ldrag} produces the integer that indicates a left button drag
event.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&lpress : integer } \hfill {\bf left mouse button press}

\noindent
\texttt{\&lpress} produces the integer that indicates a left button
press event.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&lrelease : integer } \hfill {\bf left mouse button release}

\noindent
\texttt{\&lrelease} produces the integer that indicates a left button
release event.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&mdrag : integer } \hfill {\bf  middle mouse button drag}

\noindent
\texttt{\&mdrag} produces the integer that indicates a middle button drag event.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&meta : integer } \hfill {\bf meta modifier flag}

\noindent
\texttt{\&meta} produces the null value if the meta (Alt) key was
pressed at the time of the most recently processed event, otherwise
\texttt{\&meta} fails.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&mpress : integer } \hfill {\bf middle mouse button press}

\noindent
\texttt{\&mpress} produces the integer that indicates a middle button
press event.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&mrelease : integer } \hfill {\bf middle mouse button release}

\noindent
\texttt{\&mrelease} produces the integer that indicates a middle button
release event.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&pick : string* } \hfill {\bf pick 3D objects}

\noindent
\texttt{\&pick} generates the object IDs selected at point
(\texttt{\&x},\texttt{\&y}) at the most recent \texttt{Event()}, if the
event was read from a 3D window with the attribute \texttt{pick=on}.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&rdrag : integer } \hfill {\bf right mouse button drag}

\noindent
\texttt{\&rdrag} produces the integer that indicates a right button drag
event.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&resize : integer } \hfill {\bf window resize event}

\noindent
\texttt{\&resize} produces the integer that indicates a window resize
event.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&row := integer } \hfill {\bf mouse location, text row}

\noindent
\texttt{\&row} is the mouse location in text rows during the most recent
\texttt{Event()}. If \texttt{\&row} is assigned, \texttt{\&y} gets a
corresponding pixel location in the current font on \texttt{\&window}.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&rpress : integer } \hfill {\bf right mouse button press}

\noindent
\texttt{\&rpress} produces the integer that indicates a right button
press event.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&rrelease : integer } \hfill {\bf right mouse button release}

\noindent
\texttt{\&rrelease} produces the integer that indicates a right button
release event.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&shift : integer } \hfill {\bf shift modifier flag}

\noindent
\texttt{\&shift} produces the null value if the shift key was pressed at
the time of the most recently processed event, otherwise
\texttt{\&shift} fails.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&window := window } \hfill {\bf default window}

\noindent
\texttt{\&window} is the default window argument for all window
functions. \texttt{\&window} may be assigned any value of type
window.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&x := integer } \hfill {\bf mouse location, horizontal}

\noindent
\texttt{\&x} is the horizontal mouse location in pixels during the most
recent \texttt{Event()}. If \texttt{\&x} is assigned, \texttt{\&col}
gets a corresponding text coordinate in the current font on
\texttt{\&window}.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \&y := integer } \hfill {\bf mouse location, vertical}

\noindent
\texttt{\&y} is the vertical mouse location in pixels during the most
recent \texttt{Event()}. If \texttt{\&y} is assigned, \texttt{\&row}
gets a corresponding text coordinate in the current font on
\texttt{\&window}.

\section{Control Structures and Reserved Words}

Unicon has many \index{reserved word}reserved words. Some are used in
declarations, but most are used in \index{control structure}control
structures. This section summarizes the syntax and semantics
introduced by all the reserved words of the language. The reserved
word under discussion is written in a bold font. The surrounding
syntax uses square brackets for optional items and an asterisk for
items that may repeat.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf abstract} \hfill {\bf declare unimplemented method}

\noindent
The \index{abstract}\texttt{abstract} reserved word declares that a
named method must by provided by subclasses that implement a given
class. The presence of one or more abstract methods implies that a
class itself is abstract and should only be instantiated indirectly
via a subclass that implements the abstract methods.


\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf break expr } \hfill {\bf exit loop}

\noindent
The \index{break expression}\texttt{break} expression exits the nearest
enclosing loop. \textit{expr} is evaluated and treated as the result of
the entire loop expression. If \textit{expr} is another
\texttt{break} expression, multiple loops will be exited.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf expr1 to expr2 by expr3 } \hfill {\bf step increment}

\noindent
\index{by, to-by step}The \texttt{by} reserved word supplies a step
increment to a \texttt{to}{}-expression (the default is 1).

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf case expr of \{ ? \} } \hfill {\bf select expression}

\noindent
The \index{case expression}\texttt{case} expression selects one of
several branches of code to be executed.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \textbf{class} name [: superclass]* (fields) methods [initially] end } \hfill {\bf class declaration}

\noindent
\index{class!declaration}The \texttt{class} declaration introduces a new
object type into the program. The \texttt{class} declaration may
include lists of superclasses, fields, methods, and an
initially section.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf create expr } \hfill {\bf create co{}-expression}

\noindent
\index{create}The \texttt{create} expression produces a new
co-expression to evaluate \textit{expr}.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf critical x : expr } \hfill {\bf serialize on x}

\noindent
\index{critical section}The \texttt{critical} expression serializes the
execution of \textit{expr} on value {\textit x}. Value {\textit x} must
be a mutex or protected object that has a mutex. The critical section
causes {\textit x} to be locked before evaluating {\textit expr} and
unlocked afterward. Breaking, returning or failing out of {\textit expr} 
does not automatically unlock {\textit x}.\WarningNotThreadSafe

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf default : expr } \hfill {\bf default case branch}

\noindent
\index{default!case branch}The \texttt{default} branch of a case
expression is taken if no other case branch is taken.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf do expr } \hfill {\bf iteration expression}

\noindent
\index{do, iteration}The \texttt{do} reserved word specifies an
expression to be executed for each iteration of a preceding
\texttt{while}, \texttt{every}, or \texttt{suspend} loop (yes,
\texttt{suspend} is a looping construct).

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf if expr1 then expr2 else expr3 } \hfill {\bf else branch}

\noindent
\index{else}The \texttt{else} expression is executed if \textit{expr1}
\index{expression failure}fails to produce a result.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf end } \hfill {\bf end of declared body}

\noindent
\index{end}The reserved word \texttt{end} signifies the end of a
procedure, method, or class body.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \textbf{every} \textit{expr1} [do \textit{expr2}] } \hfill {\bf generate all results}

\noindent
\index{every}The \texttt{every} expression always fails, causing
\textit{expr1} to be resumed for all its results.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf fail } \hfill {\bf produce no results}

\noindent
\index{fail}The \texttt{fail} reserved word causes the enclosing
procedure or method invocation to terminate immediately and produce no
results. The invocation may not be resumed. See also the keyword
\texttt{\&fail}, which produces a less drastic expression failure.
\texttt{fail} is equivalent to \texttt{return \&fail}

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \textbf{global} \textit{var} [, \textit{var}]* } \hfill {\bf declare global variables}

\noindent
\index{global}Reserved word \texttt{global} introduces one or more
global variables.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \textbf{if} \textit{expr} then \textit{expr2} [else \textit{expr3}] } \hfill {\bf conditional expression}

\noindent
\index{if}The \texttt{if} expression evaluates \textit{expr2} only if
\textit{expr1} produces a result.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \textbf{import} \textit{name} [, \textit{name}]* } \hfill {\bf import package}

\noindent
\index{import}The \texttt{import} declaration introduces the names from
package \textit{name} so that they may be used without prefixing them
with the package name.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf initial expr } \hfill {\bf execute on first invocation}

\noindent
\index{initial}The \texttt{initial} expression is executed the first
time a procedure or method is invoked.
Any subsequent invocations (of the procedure or method) \ConcurrencyIssue
will not proceed until the \texttt{initial} expression has finished execution.
A recursive invocation of the procedure inside the \texttt{initial} expression
causes a runtime error.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \textbf{initially} [(parameters)] } \hfill {\bf initialize object}

\noindent
\index{initially}The \texttt{initially} section defines a special method
that is invoked automatically when an object is created. If the
\texttt{initially} section has declared parameters, they are used as
the parameters of the \index{constructor!class}constructor for objects
of that class.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \textbf{invocable} \textit{procedure} [, \textit{procedure}]* } \hfill {\bf allow string invocation}

\noindent
\index{invocable}
{\textbf{invocable all} } \hfill {\bf allow string invocation}

\noindent
The \texttt{invocable} declaration indicates that procedures may be used
in string invocation.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \textbf{link} \textit{filename} [, \textit{filename}]* } \hfill {\bf link code module}

\noindent
The \index{link}\texttt{link} declaration directs that the code in
\textit{filename} will be added to the executable when this program is
linked. \textit{filename} may be an identifier or a string literal file
path.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \textbf{local} \textit{var} [:=\textit{initializer} ] [, \textit{var}\ [:=\textit{ initializer} ] ]* } \hfill {\bf declare local variables}

\noindent
\index{local}The \texttt{local} declaration introduces local
variables into the current procedure or method.
\index{variable}Variable declarations must be at the beginning of a
procedure or method.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf method name (params) body end } \hfill {\bf declare method}

\noindent
\index{method}The \texttt{method} declaration introduces a procedure
that is invoked with respect to \index{instance!class}instances of
a given class. The \textit{params} and \textit{body}
are as in procedures, described below.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf next } \hfill {\bf iterate loop}

\noindent
\index{next, iteration}The \texttt{next} expression causes a loop to
immediate skip to its next iteration.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf not expr } \hfill {\bf negate expression failure}

\noindent
\index{not}The \texttt{not} expression fails if \textit{expr} succeeds,
and succeeds (producing null) if \textit{expr} fails.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf case expr of \{ ? \}\ } \hfill {\bf introduce case branches}

\noindent
\index{of}The \texttt{of} reserved word precedes a special compound
expression consisting of a sequence of case branches of the form
\textit{expr} : \textit{expr}. Case branches are evaluated in sequence
until one matches the expression given between the word
\texttt{case} and the \texttt{of}.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf package name } \hfill {\bf declare package}

\noindent
\index{package}The \texttt{package} declaration segregates the global
names in the current source file. In order to refer to them, client
code must either import the package, or prepend
\texttt{\textit{name.}} (the package name followed by a period)
onto the front of a name in the package.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf procedure name (params) body end } \hfill {\bf declare procedure}

\noindent
\index{procedure}The \texttt{procedure} declaration specifies a
procedure with parameters and code body. The parameters
are a comma-separated list of zero or more variable names. The last
parameter may be suffixed by [ ] to indicate that
following parameters will be supplied to the procedure in a list. The
body is an optional sequence of local and static variable declarations,
followed by a sequence of zero or more expressions.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf record name (fields) } \hfill {\bf declare record}

\noindent
\index{record}The \texttt{record} declaration introduces a new record
type into the program.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf repeat expr } \hfill {\bf infinite loop}

\noindent
\index{repeat loop}\index{infinite loop}The \texttt{repeat} expression
introduces an infinite loop that will reevaluate \textit{expr} forever.
Of course, \textit{expr} may exit the loop or terminate the program in
any number of ways.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf return expr } \hfill {\bf return from invocation}

\noindent
\index{return}The \texttt{return} expression exits a procedure or method
invocation, producing \textit{expr} as its result. The invocation may
not be resumed.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \textbf{static} \textit{var} [, \textit{var}]* } \hfill {\bf declare static variables}

\noindent
\index{static}The \texttt{static} declaration introduces 
local variables that persist for the entire program execution
into the current procedure or method body. Variable
declarations must be at the beginning of a procedure or method.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \textbf{suspend} \textit{expr} [do \textit{expr}] } \hfill {\bf produce result from invocation}

\noindent
\index{suspend}The \texttt{suspend} expression produces one or more
results from an invocation for use by the calling expression. The
procedure or method may be resumed for additional results if the
calling expression needs them. Execution in the suspended invocation
resumes where it left off, in the \texttt{suspend} expression. A single
evaluation of a \texttt{suspend} expression may produce multiple
results for the caller if \textit{expr} is a
\index{generator}generator. An optional \texttt{do} expression is
evaluated each time the \texttt{suspend} is resumed.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf if expr1 then expr2 } \hfill {\bf conditional expression}

\noindent
\index{then}The \textit{expr2} following a \texttt{\bf then} is evaluated
only if \textit{expr1} following an \texttt{if} succeeds. In that case,
the result of the whole expression is the result of \textit{expr2}.


\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf thread expr } \hfill {\bf create thread}

\noindent
\index{thread}The \texttt{\bf thread} expression creates and launches
a concurrent thread to evaluate \textit{expr}.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf expr1 to expr2 } \hfill {\bf generate arithmetic sequence}

\noindent
\index{to, generator}The \texttt{to} expression produces the integer
sequence from \textit{expr1} to \textit{expr2}.
Neither \textit{expr1} nor \textit{expr2} may be a large integer.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \textbf{until} \textit{expr1} [do \textit{expr2}] } \hfill {\bf loop until success}

\noindent
\index{until}\index{success}The \texttt{until} expression loops as long
as \textit{expr1} fails.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \textbf{while} \textit{expr1} [do \textit{expr2}] } \hfill {\bf loop until failure}

\noindent
\index{while}The \texttt{while} expression loops as long as
\textit{expr1} succeeds.

\section{Operators and Built-in Functions}

Icon's built-ins operators and functions utilize
automatic type conversion to provide flexibility and ease of
programming. Automatic \index{type conversion}type
\index{conversion, type}conversions are limited to
integer, real, string, and cset data types. Conversions to a "number" will
convert to either an integer or a real, depending whether the value to
be converted has a decimal. Conversions between numeric types and csets
go through an intermediate conversion to a string value and are not
generally useful.

Indexes start at 1. Index 0 is the position after the last element of a
string or list. Negative \index{index, subscript}indexes are positions
relative to the end. Subscripting operators and string analysis
functions can take two indices to specify a section of the string or
list. When two indices are supplied, they select the same string
section whether they are in ascending or descending order.

\subsection*{Operators}

\index{operators}The result types of operators are the same as the
operand types except as noted.

\subsection*{Unary operators}

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf ! x : any* } \hfill {\bf generate elements}

\noindent
\index{generate elements}The \index{generate operator "!x}generate
operator produces the elements of \texttt{x}. If
\texttt{x} is a string variable or refers to a structure value, the
generated elements are variables that may be assigned. \texttt{!i} is
equivalent to \texttt{(1 to i)} for integer \texttt{i}. List, record,
string, and file elements are generated in order, with string elements
consisting of one-letter substrings. Set and table elements are
generated in an undefined order. If \texttt{x} is a messaging
connection to a POP server, \texttt{!x} produces complete messages as
strings. Other types of files, including network connections, produce
elements consisting of text lines.
Care should be taken \WarningNotThreadSafe\ when generating the elements
of a variable that might change during the generation.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf / x } \hfill {\bf null test}
\index{null test /x}

\noindent
{\bf {\textbackslash} x } \hfill {\bf nonnull test}
\index{nonnull test {\textbackslash}x}

\noindent
The null and nonnull tests succeed
and produce their operand if it satisfies the test.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf {}- number } \hfill {\bf negate}

\noindent
{\bf + number } \hfill {\bf numeric identity}

\noindent
Negation reverses the sign of its operand. Numeric identity does not
change its operand's value other than to convert to a
required numeric type.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf = pattern } \hfill {\bf anchored pattern match} \\
{\bf = string } \hfill {\bf tab/match} \\

\noindent
\index{anchored pattern match ( =p )}The unary equals operator
performs a pattern match on its operand in the current string scanning
environment and advances the position beyond the matched string
if successful.
\index{tab/match ( =s )}When the operand is a string, this is
equivalent to calling \texttt{tab(match(s))} on its operand.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf * x : integer? } \hfill {\bf size}

\noindent
The \index{size operator}size operator returns the number of elements in
string, cset, thread message queue or structure \texttt{x}.
Other types are converted to a string and the size of the string is returned.
Runtime error 112 occurs if the conversion to a string fails.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf . x : x } \hfill {\bf dereference}

\noindent
The \index{dereference}dereference operator returns the value
\texttt{x}.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf ? x : any } \hfill {\bf random element}

\noindent
The \index{random!operator, ?x}random operator produces a random element
from \texttt{x}. If \texttt{x} is a string, \texttt{?x} produces a
random one-letter substring. The result is a variable that may be
assigned. If \texttt{x} is a positive integer, \texttt{?x} produces a
random integer between 1 and x.  \texttt{?0} returns a real in the
range from 0.0-1.0.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf {\textbar} x : x* } \hfill {\bf repeated alternation}

\noindent
The repeated \index{alternation, repeated}alternation operator generates
results from evaluating its operand over and over again in an infinite
loop.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \~{} cset } \hfill {\bf cset complement}

\noindent
The \index{complement, cset}complement operator returns a cset
consisting of all characters not in its operand.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \^{} co{}-expression } \hfill {\bf refresh co{}-expression}

\noindent
\index{refresh, co-expression}The refresh operator restarts a
co-expression so the next time it is activated it will begin with its
first result.

\subsection*{Binary operators}

\index{binary operator}Most binary operators may be augmented with an
\index{assignment!augmented}assignment
--- see page \pageref{AugOps} for the full list.
If such an operator is followed
by a \texttt{:=} the left operand must be a variable, and the
expression \texttt{x }\texttt{\textit{op}}\texttt{:= y} is equivalent
to \texttt{x := x }\texttt{\textit{op}}\texttt{ y}. For example,
\texttt{x +:= 5} is equivalent but faster than the expression
\ \texttt{x := x+5.}
\AreNotThreadSafe{In general, augmented operators} \
They are only safe if applied to a local (non static) variable that
has an atomic type. For example, sets are mutable (not safe anywhere)
whereas csets are atomic (unsafe if global or static; safe if local).

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \textit{number1} \^{} \textit{number2} } \hfill {\bf power}
\index{power, exponent \^{}}

\noindent
{\bf \textit{number1} * \textit{number2} } \hfill {\bf multiply}

\noindent
{\bf \textit{number1} / \textit{number2} } \hfill {\bf divide}

\noindent
{\bf \textit{number1} \% \textit{number2} } \hfill {\bf modulo}
\index{modulo \%}

\noindent
{\bf \textit{number1} + \textit{number2} } \hfill {\bf add}

\noindent
{\bf \textit{number1} - \textit{number2} } \hfill {\bf subtract}

\noindent
The \index{arithmetic operator}arithmetic operators may be augmented.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf set1 ** set2 } \hfill {\bf intersection}

\noindent
{\bf set1 ++ set2 } \hfill {\bf union}

\noindent
{\bf set1 -{}- set2 } \hfill {\bf difference}

\noindent
The set operators work on sets, csets, or tables (via their keys).
They may be augmented. In table union and intersection, the result
table values are those of the left operand if available.

\bigskip\hrule\vspace{0.1cm}

\noindent
{\bf x . name } \hfill {\bf field}
\index{field, record or class}

\noindent
{\bf \textit{object} . name (params) } \hfill {\bf method invocation}
\index{method!invocation}

\noindent
{\bf \textit{object} \$ superclass .name (params) } \hfill {\bf superclass method invocation}
\index{superclass}

\noindent
The field operator selects field name out of a record,
object, or package. For objects, \textit{name} may be a method, in
which case the field operator is being used as part of a method
invocation. Superclass method invocation consists of a dollar sign and
superclass name prior to the field operator.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf number1 = number2 } \hfill {\bf equal}

\noindent
\index{equal!numeric =}
{\bf number1 \~{}= number2 } \hfill {\bf not equal}

\noindent
{\bf number1 {\textless} number2 } \hfill {\bf less than}

\noindent
{\bf number1 {\textless}= number2 } \hfill {\bf less or equal}

\noindent
{\bf number1 {\textgreater} number2 } \hfill {\bf greater than}

\noindent
{\bf number1 {\textgreater}= number2 } \hfill {\bf greater or equal}

\noindent
{\bf string1 == string2 } \hfill {\bf string equal}
\index{string!comparison}\index{equal!string ==}

\noindent
{\bf string1 \~{}== string2 } \hfill {\bf string not equal}

\noindent
{\bf string1 {\textless}{\textless} string2 } \hfill {\bf string less than}

\noindent
{\bf string1 {\textless}{\textless}= string2 } \hfill {\bf string less or equal}

\noindent
{\bf string1 {\textgreater}{\textgreater} string2 } \hfill {\bf string greater than}

\noindent
{\bf string1 {\textgreater}{\textgreater}= string2 } \hfill {\bf string greater or equal}

\noindent
{\bf x1 === x2 } \hfill {\bf equivalence}
\index{equal!reference ===}

\noindent
{\bf x1 \~{}=== x2 } \hfill {\bf non equivalence}

\noindent
Relational operators produce their right operand if they succeed. They
may be augmented.

\bigskip\hrule\vspace{0.1cm}

\noindent
{\bf var := expr } \hfill {\bf assign}

\noindent
{\bf var1 :=: var2 } \hfill {\bf swap}\WarningNotThreadSafe
\index{swap}

\noindent
{\bf var {\textless}- expr } \hfill {\bf reversible assignment}
\index{assignment!reversible}\index{reversible assignment}

\noindent
{\bf var1 {\textless}-{\textgreater} var2 } \hfill {\bf reversible swap}\WarningNotThreadSafe
\index{reversible swap}

\noindent
The several \index{assignment}assignment
operators all require variables for their left operands, and swap
operators also require variables for their right operands.

Assignment operators are usually thread safe \ConcurrencyIssue
but there are some situations where they are not. 
See the discussion of thread safe assignment without a mutex (on page
\pageref{ThreadSafeAssignment}) for details. If in doubt, protect the
global variable with a mutex.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf string ? expr } \hfill {\bf scan string}

\noindent
\index{scan string}String scanning evaluates \textit{expr}
with \texttt{\&subject} equal to string and \texttt{\&pos} starting at
1. It may be augmented.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf string ?? pattern } \hfill {\bf pattern match}

\noindent
\index{pattern match}Pattern matching produces the substring(s) where
\textit{pattern} occurs within a string. It is conducted within a new
string scanning environment as per string scanning above. It may be augmented.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf x ! y } \hfill {\bf apply}

\noindent
\index{bang!binary}The binary bang (exclamation) operator calls x,
using y as its parameters.  x may be a procedure, or the string name of
a procedure.  y is a list or record.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf [x] @ co-expression } \hfill {\bf activate co-expression}
\index{activate co-expression}

\noindent
The activate operator transfers execution
control from the current co-expression to its right operand
co-expression. The transmitted value is \texttt{x}, or \texttt{\&null}
if no left operand is supplied. Activation may be augmented.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf [x] @$>$ [y] } \hfill {\bf send message}
\index{activate co-expression} \linebreak
\noindent
{\bf [x] @$>>$ [y] } \hfill {\bf blocking send message}

\noindent
The send operator places a message in another thread's public
inbox, or in the current thread's public outbox. The normal version fails
if the box is full; the blocking version waits for space to become
available.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf [x] $<$@ [y] } \hfill {\bf receive message}
\index{activate co-expression} \linebreak
\noindent
{\bf [x] $<<$@ [y] } \hfill {\bf blocking receive message}

\noindent
The receive operator obtains a message from another thread's public
outbox, or the current thread's public inbox. The normal version fails
if the box is empty; the blocking version waits for a message to become
available.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf string1 {\textbar}{\textbar} string2 } \hfill {\bf concatenation}

\noindent
{\bf pattern1 {\textbar}{\textbar} pattern2 } \hfill {\bf pattern concatenation}

\noindent
{\bf list1 {\textbar}{\textbar}{\textbar} list2 } \hfill {\bf list concatenation}

\noindent
The \index{concatenation}concatenation operators produce new values
(or patterns that will match values)
consisting of the left operand followed by the right
operand. They may be augmented.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf x1 \& x2 } \hfill {\bf conjunction}

\noindent
{\bf expr1 {\textbar} expr2 } \hfill {\bf alternation}

\noindent
{\bf pattern1 .{\textbar} pattern2 } \hfill {\bf pattern alternation}

\noindent
The \index{conjunction \&}conjunction operator produces \texttt{x2} if
\texttt{x1} succeeds. Conjunction may be augmented.
The \index{alternation operator ( {\textbar} )}
alternation operator produces the results of \texttt{expr1} followed
by the results of \texttt{expr2}; it is a \index{generator}generator.
The \index{pattern alternative operator ( .{\textbar} )}
pattern alternation operator produces a pattern that will match
the results of \texttt{pattern1} followed
by the results of \texttt{pattern2}.


\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf p -$>$ v } \hfill {\bf conditional assignment}

\noindent
{\bf p =$>$ v } \hfill {\bf immediate assignment}

\noindent
{\bf  .$>$ v } \hfill {\bf cursor position assignment}

\noindent
The \index{conditional assignment} conditional assignment operator
assigns the substring matched by its left operand (a pattern) to a
variable (its right operand) at the end of matching, if the whole
pattern match succeeds.
The \index{immediate assignment} immediate assignment operator assigns
the substring matched by its left operand (a pattern) to a variable
(its right operand) at the point during the match that the pattern
match of the left operand occurs, whether or not the whole match succeeds.
The \index{cursor position assignment}cursor position assignment operator
assigns the cursor position at a point during a pattern match to a
variable (its operand).



\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf x1 {\textbackslash} integer } \hfill {\bf limitation}

\noindent
The \index{limitation {\textbackslash}}limitation operator fails if it
is resumed after its left operand has produced a number of results
equal to its right operand.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf ( expr [, expr]* ) } \hfill {\bf mutual evaluation}
\index{mutual evaluation}

\noindent
{\bf p ( expr [, expr]* ) } \hfill {\bf invocation}
\index{invocation}

\noindent
By themselves, \index{parentheses}parentheses are used
to override operator precedence in surrounding expressions. A
comma-separated list of expressions is evaluated left to right, and
fails if any operand fails. Its value is the right of the rightmost
operand.

When preceded by an operand, parentheses form an
\index{call, procedure}invocation. The operand may be a procedure,
a method, a string that is converted to a procedure name, or an integer
that selects the parameter to use as the result of the entire expression.

\bigskip\hrule\vspace{0.1cm}

\noindent
{\bf \textbf{[} \textbf{]} } \hfill {\bf empty list creation}
\index{empty list}

\noindent
{\bf \textbf{[} expr [, expr]* \textbf{]} } \hfill {\bf list creation}
\index{list creation}

\noindent
{\bf \textbf{[:} expr \textbf{:]} } \hfill {\bf list comprehension}
\index{list creation}

\noindent
{\bf \textbf{[} expr : expr [; expr : expr ]* \textbf{]} } \hfill {\bf
initialized table creation}
\index{table!initializer}

\noindent
{\bf expr1 \textbf{[} expr2 [, expr]* \textbf{]} } \hfill {\bf subscript}
\index{subscript}

\noindent
{\bf expr1 \textbf{[} expr2 : expr3 \textbf{]} } \hfill {\bf subsection}\WarningNotThreadSafe
\index{slice}\index{subsection}

\noindent
{\bf expr1 \textbf{[} expr2 +: expr3 \textbf{]} } \hfill {\bf forward relative subsection}

\noindent
{\bf expr1 \textbf{[} expr2 -: expr3 \textbf{]} } \hfill {\bf backward relative subsection}

\noindent
With no preceding operand, square brackets create and initialize lists.
Initializer values are comma-separated, except in list comprehension
where the expression's values (obtained as if by \textbf{every}) are used
to provide the initial list elements.
When preceded by an operand, square brackets form a subscript or
subsection. Multiple comma-separated subscript operands are equivalent
to separate subscript operations with repeating square brackets, so
\texttt{x[y,z]} is equivalent to \texttt{x[y][z]}.

Subscripting selects an element from a structure and allows that element
to be assigned or for its value to be used. Lists and strings are
subscripted using 1-based integer indices, tables are subscripted using
arbitrary keys, and records may be subscripted by either string
fieldname or 1-based integer index. Message connections may be
subscripted by string header to obtain server responses; POP
connections may also be subscripted by 1-based integer message numbers.

Subsectioning works on strings and lists. For strings, the subsection is
a variable if the string was a variable, and
\index{assignment!substring}assignment to the subsection makes the
\index{variable}
variable hold the new, modified string constructed by replacing the subsection.
For lists, a subsection is a new
list that contains a copy of the elements from the original list.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf expr1 ; expr2 } \hfill {\bf bound expression}

\noindent
A semicolon bounds \texttt{expr1}. Once \texttt{expr2} is entered,
\texttt{expr1} cannot be resumed for more results. The result of
\texttt{expr2} is the result of the entire expression.
\index{semicolon insertion}Semicolons are automatically
inserted at ends of lines wherever it is syntactically
allowable to do so. This results in many \textit{implicitly} 
\index{bounded expressions}\textit{bounded} expressions.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \{ expr [; expr]* \} } \hfill {\bf compound expression}
\index{compound expression}

\noindent
{\bf p \{ expr [, expr]* \} } \hfill {\bf programmer defined control structure}
\index{programmer defined control structure}
\index{control structure!programmer defined}

\noindent
Curly brackets typically cause a sequence
of bounded expressions to be treated as a single expression. Preceded
by a procedure value, curly brackets introduce a programmer defined
control structure in which a co-expression is created for each
argument; the procedure is called with these co-expressions as its
parameters, and can determine for itself whether, and in what order, to
activate its parameters to obtain values.

\subsection*{Built-in functions}

Unicon's \index{built-in functions}built-in functions
are a key element of its ease of learning and use. They provide
substantial functionality in a consistent and easily memorized manner.

In addition to automatic type conversion, built-in functions make
extensive use of optional parameters with default values. Default
values are indicated in the function descriptions, with the exception
of string scanning functions.
\index{default parameters!string scanning functions}String scanning
functions end with three parameters that
default to the string \texttt{\&subject}, the integer \texttt{\&pos},
and the end of string (0) respectively. The position argument defaults
to 1 when the string argument is supplied rather than defaulted.

\bigskip
\hrule\vspace{0.1cm}
\index{abs}
\noindent
{\bf abs(N) : number} \hfill {\bf absolute value}

\noindent
\index{absolute value}\texttt{abs(N)} produces the maximum of
\texttt{N} or \texttt{{}-N}.

\bigskip
\hrule\vspace{0.1cm}
\index{acos}
\noindent
{\bf acos(r) : real} \hfill {\bf arc cosine}

\noindent
\index{arc cosine}\texttt{acos(r)} produces the arc cosine of
\texttt{r}. The argument is given in radians.

\bigskip
\hrule\vspace{0.1cm}
\index{any}
\noindent
{\bf any(c, s, i, i) : integer? } \hfill {\bf cset membership}

\noindent
\index{any()}\index{cset membership}String scanning function
\texttt{any(c,s,i1,i2)} produces \texttt{min(i1,i2)+1} if \texttt{s[min(i1,i2)]}
is in cset \texttt{c}, but fails otherwise.

\bigskip
\hrule\vspace{0.1cm}
\index{args}
\noindent
{\bf args(x,i) : any } \hfill {\bf number of arguments}

\noindent
\index{args(p)}\texttt{args(p)} produces the number of arguments
expected by procedure \texttt{p}. If \texttt{p} takes a variable number
of arguments, \texttt{args(p)} returns a negative number to indicate
that the final argument is a list conversion of an arbitrary number of
arguments. For example, \texttt{args(p)} for a procedure \texttt{p}
with formal parameters \texttt{(x, y, z[ ])} returns a \texttt{{}-3}.
\texttt{args(C)} produces the number of arguments in the current
operation in co-expression \texttt{C}, and \texttt{args(C,i)} produces
argument number \texttt{i} within co-expression \texttt{C}.

\bigskip
\hrule\vspace{0.1cm}
\index{asin}
\noindent
{\bf asin(real) : real } \hfill {\bf arc sine}

\noindent
\index{arc sine}\texttt{asin(r1)} produces the arc sine of \texttt{r1}.
The argument is given in radians.

\bigskip
\hrule\vspace{0.1cm}
\index{atan}
\noindent
{\bf atan(r, r:1.0) : real } \hfill {\bf arc tangent}

\noindent
\index{arc tangent}\texttt{atan(r1)} produces the arc tangent of
\texttt{r1}. \texttt{atan(r1,r2)} produces the arc tangent of
\texttt{r1} and \texttt{r2}. Arguments are given in radians.

\bigskip
\hrule\vspace{0.1cm}
\index{atanh}
\noindent
{\bf atanh(r) : real } \hfill {\bf inverse hyperbolic tangent}

\noindent
\index{inverse hyperbolic tangent}\texttt{atanh(r)} produces the inverse
hyperbolic tangent of \texttt{r}. Arguments are given in radians.

\bigskip
\hrule\vspace{0.1cm}
\index{bal}
\noindent
{\bf bal(cs:\&cset, cs:'(', cs:')', s, i, i) : integer* } \hfill {\bf balance string}

\noindent
\index{balance string}\index{string!balance}String scanning function
\texttt{bal(c1,c2,c3,s,i1,i2)} generates the integer positions in
\texttt{s} at which a member of \texttt{c1} in \texttt{s[i1:i2]} is
balanced with respect to characters in \texttt{c2} and \texttt{c3}.

\bigskip
\hrule\vspace{0.1cm}
\index{center}
\noindent
{\bf center(s, i:1, s:" ") : string } \hfill {\bf center string}

\noindent
\index{center()}\index{string!center}\texttt{center(s1,i,s2)} produces a
string of \texttt{i} characters. If \texttt{i {\textgreater} *s1} then
\texttt{s1} is padded equally on the left and right with \texttt{s2} to
length \texttt{i}. If \texttt{i {\textless} *s1} then the center
\texttt{i} characters of \texttt{s1} are produced.

\bigskip
\hrule\vspace{0.1cm}
\index{channel}
\noindent
{\bf channel(TH) : list } \hfill {\bf communications channel}

\noindent
\index{channel}\texttt{channel(TH)} creates a communications channel
between the current thread and thread {\textit TH}.

\bigskip
\hrule\vspace{0.1cm}
\index{char}
\noindent
{\bf char(i) : string } \hfill {\bf encode character}

\noindent
\index{character}\texttt{char(i)} produces a string consisting of the
character encoded by integer \texttt{i}.

\bigskip
\hrule\vspace{0.1cm}
\index{chdir}
\noindent
{\bf chdir(s) : string } \hfill {\bf change directory}\WarningNotThreadSafe

\noindent
\index{directory}\index{chdir()}\texttt{chdir(s)} changes the current
working directory to \texttt{s}. \texttt{chdir()} returns the current
working directory, which is shared between threads.


\bigskip
\hrule\vspace{0.1cm}
\index{chmod}
\noindent
{\bf chmod(f, m) : ? } \hfill {\bf file permissions}

\noindent
\index{permissions, file}
\index{file!permissions}\index{chmod()}\texttt{chmod(f, m)}
sets the access permissions ("mode") of
a string filename (or on UNIX systems, an open file) \texttt{f} to a
string or integer mode \texttt{m}. The mode indicates the change to be
performed. The string is of the form

\iconcode{
\>   [ugoa]*[+-=][rwxRWXstugo]* }%iconcode

The first group describes the set of mode bits to be changed: \texttt{u}
is the owner set, \texttt{g} is the group and \texttt{o} is the set of
all others. The character \texttt{a} designates all the fields. The
operator (\texttt{+-=}) describes the operation to be performed:
\texttt{+} adds a permission, \texttt{{}-} removes a permission, and
\texttt{=} sets a permission. The permissions themselves are: 

\ \ \ \ \ \texttt{r} \ \ \ \ \ \ \ \ read\\
 \ \ \ \ \texttt{w} \ \ \ \ \ \ \ write\\
 \ \ \ \ \texttt{x} \ \ \ \ \ \ \ \ execute\\
 \ \ \ \ \texttt{R} \ \ \ \ \ \ \ read if any other set already has
r\\
 \ \ \ \ \texttt{W} \ \ \ \ \ \ write if any other set already has
w\\
 \ \ \ \ \texttt{X} \ \ \ \ \ \ \ execute if any other set already has
x\\
 \ \ \ \ \texttt{s} \ \ \ \ \ \ \ \ setuid (if the first part contains u
and/or setgid if the first part contains g\\
 \ \ \ \ \texttt{t} \ \ \ \ \ \ \ \ sticky if the first part has
o\\
 \ \ \ \ \texttt{u} \ \ \ \ \ \ \ the u bits on the same file\\
 \ \ \ \ \texttt{g} \ \ \ \ \ \ \ the g bits on the same file\\
 \ \ \ \ \texttt{o} \ \ \ \ \ \ \ the o bits on the same file

If the first group is missing, then it is treated as
"all" except that any bits in the
user's umask will not be modified in the mode. Not all
platforms make use of all mode bits described here; the mode bits that
are used is a property of the filesystem on which the file resides.

\bigskip
\hrule\vspace{0.1cm}
\index{classname}
\noindent
{\bf classname(r) : string } \hfill {\bf class name}

\noindent
\texttt{classname(r)} produces the name of \texttt{r}'s
class.

\bigskip
\hrule\vspace{0.1cm}
\index{close}
\noindent
{\bf close(f) : file {\textbar} integer } \hfill {\bf close file}

\noindent
\index{file!close}\index{close file}\texttt{close(f)} closes file, pipe,
window, network or message connection, or \index{database}database \texttt{f}
and returns any resources associated with it to the operating system.
If \texttt{f} was a window, \texttt{close(f)} causes it to disappear,
but the window can still be written to and copied from until all open
bindings are closed. If \texttt{f} was a pipe or network connection,
\texttt{close()} returns the integer exit
status of the connection, otherwise it returns the closed file.

\bigskip
\hrule\vspace{0.1cm}
\index{cofail}
\noindent
{\bf cofail(CE) : any } \hfill {\bf transmit co-expression failure}

\noindent
\index{fail!co-expression}\index{co-expression}\texttt{cofail(ce)} activates
co-expression \texttt{ce}, transmitting failure instead of a result.

\bigskip
\hrule\vspace{0.1cm}
\index{collect}
\noindent
{\bf collect(i:0, i:0) : null } \hfill {\bf collect garbage}

\noindent
\index{collect garbage}\texttt{collect(i1,i2)} calls the
\index{garbage collector}garbage collector to ensure that \texttt{i2} bytes
are free in region \texttt{i1}. \texttt{i1} can be 0 (no region in particular)
1 (static region) 2 (string region) or 3 (block region).

\bigskip
\hrule\vspace{0.1cm}
\index{condvar}
\noindent
{\bf condvar() : condition variable } \hfill {\bf create condition variable}

\noindent
\index{condition variable}\texttt{condvar()} creates
a new condition variable.

\bigskip
\hrule\vspace{0.1cm}
\index{constructor}
\noindent
{\bf constructor(s, ...) : procedure } \hfill {\bf record constructor}

\noindent
\index{record constructor}\texttt{constructor(label, field, field, ...)}
creates a new record type named \texttt{label} with fields named by its
subsequent arguments, and returns a constructor procedure for this
record type.

\bigskip
\hrule\vspace{0.1cm}
\index{copy}
\noindent
{\bf copy(any) : any } \hfill {\bf copy value}\WarningNotThreadSafe

\noindent
\index{copy(x)}\texttt{copy(x)} produces a copy of \texttt{x}. For immutable
types (numbers, strings, csets, procedures) this is a no-op. For mutable
types (lists, tables, sets, records, objects) a one-level deep copy of
the object is made.

\bigskip\hrule\vspace{0.1cm}
\index{cos}
\noindent
{\bf cos(r) : real } \hfill {\bf cosine}

\noindent
\index{cosine}\texttt{cos(r)} produces the cosine of \texttt{r}. The argument
is given in radians.

\bigskip\hrule\vspace{0.1cm}
\index{cset}
\noindent
{\bf cset(any) : cset? } \hfill {\bf convert to cset}

\noindent
\index{convert!to cset}\texttt{cset(x)} converts \texttt{x} to a cset,
or fails if the conversion cannot be performed.

\bigskip\hrule\vspace{0.1cm}
\index{ctime}
\noindent
{\bf ctime(i) : string } \hfill {\bf format a time value into local time }

\noindent
\index{local time}\index{ctime(i)}\texttt{ctime(i)} converts an integer time
given in seconds since the epoch, Jan 1, 1970 00:00:00 into a string in
the local timezone. See also keywords \&clock and \&dateline.

\bigskip\hrule\vspace{0.1cm}
\index{dbcolumns}
\noindent
{\bf dbcolumns(D,s) : list } \hfill {\bf ODBC column information}

\noindent
\index{column!ODBC}\texttt{dbcolumns(db, tablename)} produces a list
of record entries with fields:
\texttt{catalog}, \texttt{schema}, \texttt{tablename},
\texttt{colname}, \texttt{datatype}, \texttt{typename}, \texttt{colsize},
\texttt{buflen}, \texttt{decdigits}, \texttt{numprecradix},
\texttt{nullable}, and \texttt{remarks}.The fields
\texttt{datatype} and \texttt{typename} are SQL-dependent and data
source dependent, respectively. Field \texttt{colsize} gives the
maximum length in characters for SQL\_CHAR or SQL\_VARCHAR columns..
Field \texttt{decdigits} gives the number of significant digits right
of the decimal. Field \texttt{numprecradix} specifies whether
\texttt{colsize} and \texttt{decdigits} are specified in bits or
decimal digits. Field \texttt{nullable} is 0 if the column does not
accept null values, 1 if it does accept null values, and 2 if it is not
known whether the column accepts null values.

\bigskip\hrule\vspace{0.1cm}
\index{dbdriver}
\noindent
{\bf dbdriver(D) : record } \hfill {\bf ODBC driver information}

\noindent
\index{ODBC driver}\texttt{dbdriver(db)} produces a record with fields
\texttt{name}, \texttt{ver}, \texttt{odbcver}, \texttt{connections},
\texttt{statements}, and \texttt{dsn} that describes the details of
the \index{ODBC}ODBC driver used to connect to database \texttt{db}.
Fields \texttt{connections} and \texttt{statements} are the maximums
the driver can support. Fields
\texttt{ver} and \texttt{odbcver} are the driver and ODBC version
numbers. Fields \texttt{name} and \texttt{dsn} are the driver filename
and Windows Data Source Name associated with the connection.

\bigskip\hrule\vspace{0.1cm}
\index{dbkeys}
\noindent
{\bf dbkeys(D,string) : list } \hfill {\bf ODBC key information}

\noindent
\index{key!ODBC}\texttt{dbkeys(db,tablename)} produces a list of records
with fields \texttt{columnname}, and \texttt{sequencenumber}
containing information about the primary keys in \texttt{tablename}.

\bigskip\hrule\vspace{0.1cm}
\index{dblimits}
\noindent
{\bf dblimits(D) : record } \hfill {\bf ODBC operation limits}

\noindent
\texttt{dblimits(db)} produces a record with fields \texttt{maxbinlitlen},
\texttt{maxcharlitlen, maxcolnamelen, maxgroupbycols, maxorderbycols},
\texttt{maxindexcols, maxselectcols, maxtblcols, maxcursnamelen, maxindexsize},
\texttt{maxrownamelen, maxprocnamelen, maxqualnamelen, maxrowsize},
\texttt{maxrowsizelong, maxstmtlen, maxtblnamelen, maxselecttbls}, and
\texttt{maxusernamelen} that contains the upper bounds of the database
for many parameters.

\bigskip\hrule\vspace{0.1cm}
\index{dbproduct}
\noindent
{\bf dbproduct(D) : record } \hfill {\bf database name}

\noindent
\texttt{dbproduct(db)} produces a record with fields \texttt{name}
and \texttt{ver} that gives the name and the
version of the DBMS product containing \texttt{db}.

\bigskip\hrule\vspace{0.1cm}
\index{dbtables}
\noindent
{\bf dbtables(D) : list } \hfill {\bf ODBC table information}

\noindent
\texttt{dbtables(db)} returns a list of records with fields
\texttt{qualifier}, \texttt{owner}, \texttt{name}, \texttt{type}, and
\texttt{remarks} that describe all of the tables in the database
associated with db.

\bigskip\hrule\vspace{0.1cm}
\index{delay}
\noindent
{\bf delay(i) : null } \hfill {\bf delay for i milliseconds}

\noindent
\index{delay(i)}\texttt{delay(i)} pauses the current thread for at least
\texttt{i} milliseconds. Runtime error 101 occurs if \texttt{i}
is a large integer.

\bigskip\hrule\vspace{0.1cm}
\index{delete}
\noindent
{\bf delete(x1, x2, ...) : x1 } \hfill {\bf delete element}\WarningNotThreadSafe

\noindent
\index{delete element}\texttt{delete(x1, x2)} deletes elements denoted by the
2\textsuperscript{nd} and following parameters from set, table, list,
DBM database, or POP connection \texttt{x1} if it is there. In any case, it
returns \texttt{x1}. If \texttt{x1} is a table or set, elements
\texttt{x\textsubscript{i}} denote
keys of arbitrary type. If \texttt{x1} is a DBM database, indices must be
strings. If \texttt{x1} is a list or a POP messaging connection,
the elements \texttt{x\textsubscript{i}} are
integer indices of elements to be deleted. POP messages are actually
deleted when the \texttt{close()} operation closes that connection.

\bigskip\hrule\vspace{0.1cm}
\index{detab}
\noindent
{\bf detab(string, integer:9,...) : string } \hfill {\bf replace tabs}

\noindent
\texttt{detab(s,i,...)} replaces tabs with spaces, with stops at columns
indicated by the second and following parameters, which must all be
integers. Tab stops are extended infinitely using the interval between
the last two specified tab stops.

\bigskip\hrule\vspace{0.1cm}
\index{display}
\noindent
{\bf display(i:\&level, f:\&errout, CE:\&current) : null } \hfill {\bf write variables}

\noindent
\index{display(i,f)}\texttt{display(i,f)} writes the local variables
of \texttt{i} most recent procedure activations, plus global
variables, to file \texttt{f}.

\bigskip\hrule\vspace{0.1cm}
\index{dtor}
\noindent
{\bf dtor(r) : real } \hfill {\bf convert degrees to radians}

\noindent
\index{convert!degrees to radians}\index{dtor(r)}\texttt{dtor(r)}
produces the equivalent of \texttt{r} degrees, expressed in radians.

\bigskip\hrule\vspace{0.1cm}
\index{entab}
\noindent
{\bf entab(s, i:9,...) : string } \hfill {\bf replace spaces}

\noindent
\texttt{entab(s,i,...)} replaces spaces with tabs, with stops at columns
indicated. Tab stops are extended infinitely using the interval between
the last two specified tab stops.

\bigskip\hrule\vspace{0.1cm}
\index{errorclear}
\noindent
{\bf errorclear() : null } \hfill {\bf clear error condition}

\noindent
\index{errorclear()}\texttt{errorclear()} resets keywords
\texttt{\&errornumber}, \texttt{\&errortext}, and
\texttt{\&errorvalue} to indicate that no error is present.

\bigskip\hrule\vspace{0.1cm}
\index{eventmask}
\noindent
{\bf eventmask(CE, cset) : cset {\textbar} null } \hfill {\bf \ \ \ \ \ \ \ \  get/set event mask}

\noindent
\index{eventmask(ce)}\texttt{eventmask(ce)} returns the event mask associated
with the program that created \texttt{ce}, or \texttt{\&null} if there
is no event mask. \texttt{eventmask(ce,cs)} sets that program's event
mask to \texttt{cs}.

\bigskip\hrule\vspace{0.1cm}
\index{EvGet}
\noindent
{\bf EvGet(c, flag) : string } \hfill {\bf get event from monitored program}

\noindent
\texttt{EvGet(c,flag)} activates a program being monitored until an event
in cset mask \texttt{c} occurs. Under normal circumstances this is a
one-character string event code.

\bigskip\hrule\vspace{0.1cm}
\index{EvSend}
\noindent
{\bf EvSend(i, x, CE) : any } \hfill {\bf transmit event}

\noindent
\index{EvSend(x, y, C)}\texttt{EvSend(x, y, C)} transmits an event with event
code \texttt{x} and event value \texttt{y} to a monitoring
co-expression \texttt{C}.

\bigskip\hrule\vspace{0.1cm}
\index{exit}
\noindent
{\bf exit(i:normalexit) } \hfill {\bf exit process}

\noindent
\index{exit(i)}\texttt{exit(i)} terminates the current program execution,
returning status code \texttt{i}. The default is the platform-dependent exit
code that indicates normal termination (0 on most systems).
Runtime error 101 occurs if \texttt{i} is a large integer.

\bigskip\hrule\vspace{0.1cm}
\index{exp}
\noindent
{\bf exp(r) : real } \hfill {\bf exponential}

\noindent
\index{exponential, exp(r)}\texttt{exp(r)} produces the result of
\texttt{\&e \^{} r}.

\bigskip\hrule\vspace{0.1cm}
\index{fetch}
\noindent
{\bf fetch(D, s?) : string {\textbar} row? } \hfill {\bf fetch database value}

\noindent
\index{fetch(d, k)}\texttt{fetch(d, k)} fetches the value
corresponding to key \texttt{k} from a \index{DBM}DBM or
\index{SQL!fetch}SQL database \texttt{d}. The result is
a string (for DBM databases) or a row (for SQL databases). For SQL
databases, when the string \texttt{k} is omitted,
\texttt{fetch(d)} produces the next row \WarningNotThreadSafe
in the current selection, and advances the cursor to the next row. A
row is a record whose field names and types are determined by the
columns specified in the current query. \texttt{fetch(d)} fails if there are no
more rows to return from the current query. Typically a call to
\texttt{dbselect()} will be followed by a while{}-loop that calls
\texttt{fetch()} repeatedly until it fails.

\bigskip\hrule\vspace{0.1cm}
\index{fieldnames}
\noindent
{\bf fieldnames(R) : string* } \hfill {\bf get field names}

\noindent
\index{fieldnames(r)}\texttt{fieldnames(r)} produces the names of the fields in
record \texttt{r}.

\bigskip\hrule\vspace{0.1cm}
\index{find}
\noindent
{\bf find(s, s, i, i) : integer* } \hfill {\bf find string}

\noindent
\index{find string}String scanning function \texttt{find(s1,s2,i1,i2)} generates
the positions in \texttt{s2} at which \texttt{s1} occurs as a
substring in \texttt{s2[i1:i2]}.

\bigskip\hrule\vspace{0.1cm}
\index{flock}
\noindent
{\bf flock(f, s) : ? } \hfill {\bf apply or remove file lock}\WarningNotThreadSafe

\noindent
\index{file!lock}\index{flock(f,s)}\texttt{flock(f,s)} applies an advisory
\index{lock, file}lock to the file. Advisory locks enable processes to
cooperate when accessing a shared file, but do not enforce exclusive
access. The following characters can be used to make up the operation
string: 

\ \ \ \ \ s \ \ \ \ \ \ \ shared lock\\
 \ \ \ \ x \ \ \ \ \ \ \ exclusive lock\\
 \ \ \ \ b \ \ \ \ \ \ \ don't block when
locking\\
 \ \ \ \ u \ \ \ \ \ \ \ unlock 

Locks cannot be applied to windows, directories or database files. A
file may not simultaneously have shared and exclusive locks.

\bigskip\hrule\vspace{0.1cm}
\index{flush}
\noindent
{\bf flush(f) : file } \hfill {\bf flush file}

\noindent
\index{flush(f)}\texttt{flush(f)} flushes all pending or buffered output
to file \texttt{f}.

\bigskip\hrule\vspace{0.1cm}
\index{function}
\noindent
{\bf function() : string* } \hfill {\bf name the functions}

\noindent
\texttt{function()} generates the names of the built-in functions.

\bigskip\hrule\vspace{0.1cm}
\index{get}
\noindent
{\bf get(L,i:1) : any? } \hfill {\bf get element from queue}\WarningNotThreadSafe

\noindent
\texttt{get(L)} returns an element which is removed from the head of the
\index{queue}queue \texttt{L}. \texttt{get(L, i)} removes \texttt{i}
elements, returning the last one removed.

\bigskip\hrule\vspace{0.1cm}
\index{getch}
\noindent
{\bf getch() : string? } \hfill {\bf get character from console}

\noindent
\texttt{getch()} waits for (if necessary) and returns a character typed
at the \index{keyboard}keyboard, even if standard input was redirected.
The character is not displayed.

\bigskip\hrule\vspace{0.1cm}
\index{getche}
\noindent
{\bf getche() : string? } \hfill {\bf get and echo character from console}

\noindent
\texttt{getche()} waits for (if necessary) and returns a character typed
at the console keyboard, even if standard input was redirected. The
character is echoed to the \index{screen}screen.

\bigskip\hrule\vspace{0.1cm}
\index{getenv}
\noindent
{\bf getenv(s) : string? } \hfill {\bf get environment variable}

\noindent
\texttt{getenv(s)} returns the value of
\index{environment variable}environment variable \texttt{s}
from the operating system.

\bigskip\hrule\vspace{0.1cm}
\index{gettimeofday}
\noindent
{\bf gettimeofday() : record } \hfill {\bf time of day}

\noindent
\index{time!of day}Returns the current time in seconds and microseconds
since the epoch, Jan 1, 1970 00:00:00. The \texttt{sec} value may be
converted to a date string with ctime or gtime. See also keywords
\texttt{\&now}, \texttt{\&clock}, and \texttt{\&dateline}. Return
value: \texttt{record posix\_timeval(sec, usec)} 

\bigskip\hrule\vspace{0.1cm}
\index{globalnames}
\noindent
{\bf globalnames(CE) : string* } \hfill {\bf name the global variables}

\noindent
\index{global}\texttt{globalnames(ce)} generates the names of the global
variables in the program that created co-expression \texttt{ce}.

\bigskip\hrule\vspace{0.1cm}
\index{gtime}
\noindent
{\bf gtime(i) : string } \hfill {\bf format a time value into UTC }

\noindent
Converts an integer time in seconds since the epoch, Jan 1, 1970
00:00:00 into a string in Coordinated Universal Time (UTC). 

\bigskip\hrule\vspace{0.1cm}
\index{iand}
\noindent
{\bf iand(i, i) : integer } \hfill {\bf bitwise and}

\noindent
\index{bitwise and}\texttt{iand(i1, i2)} produces the bitwise AND of
\texttt{i1} and \texttt{i2}.

\bigskip\hrule\vspace{0.1cm}
\index{icom}
\noindent
{\bf icom(i) : integer } \hfill {\bf bitwise complement}

\noindent
\texttt{icom(i)} produces the bitwise complement (one's
complement) of \texttt{i}.

\bigskip\hrule\vspace{0.1cm}
\index{image}
\noindent
{\bf image(any) : string } \hfill {\bf string image}

\noindent
\index{image(x)}\texttt{image(x)} returns the string image of the value
\texttt{x}.

\bigskip\hrule\vspace{0.1cm}
\index{insert}
\noindent
{\bf insert(x1, x2, x3:\&null) : x1 } \hfill {\bf insert element}\WarningNotThreadSafe

\noindent
\texttt{insert(x1, x2, x3)} inserts element \texttt{x2} into set, table,
or list or DBM database \texttt{x1} if not already there. Unless
\texttt{x1} is a set, the assigned value for element \texttt{x2} is
\texttt{x3}. For lists, \texttt{x2} is an integer index; for other
types, it is a key. \index{insert()}\texttt{insert()} always succeeds
and returns \texttt{x1}.

\bigskip\hrule\vspace{0.1cm}
\index{integer}
\noindent
{\bf integer(any) : integer? } \hfill {\bf convert to integer}

\noindent
\index{convert!to integer}\texttt{integer(x)} converts value \texttt{x}
to an integer, or fails if the conversion cannot be performed.

\bigskip\hrule\vspace{0.1cm}
\index{ior}
\noindent
{\bf ior(i, i) : integer } \hfill {\bf bitwise or}

\noindent
\index{bitwise or}\texttt{ior(i1, i2)} produces the bitwise OR of
\texttt{i1} and \texttt{i2}.

\bigskip\hrule\vspace{0.1cm}
\index{ishift}
\noindent
{\bf ishift(i, i) : integer } \hfill {\bf bitwise shift}

\noindent
\index{shift}\texttt{ishift(i, j)} produces the value obtained by
shifting \texttt{i} by \texttt{j} bit positions.
If \texttt{j} is positive, the shift is to the left, and vacated bit
positions are filled with zeros.
If \texttt{j} is negative, the shift is to the right with sign extension. 

\bigskip\hrule\vspace{0.1cm}
\index{istate}
\noindent
{\bf istate(CE, s) : integer } \hfill {\bf interpreter state}

\noindent
\texttt{istate(ce, attrib)} reports selected virtual machine interpreter
state information. \texttt{attrib} must be one of:
\texttt{{\textquotedblleft}count{\textquotedblright}},
\texttt{{\textquotedblleft}ilevel{\textquotedblright}},
\texttt{{\textquotedblleft}ipc{\textquotedblright}},
\texttt{{\textquotedblleft}ipc\_offset{\textquotedblright}},
\texttt{{\textquotedblleft}sp{\textquotedblright}},
\texttt{{\textquotedblleft}efp{\textquotedblright}},
\texttt{{\textquotedblleft}gfp{\textquotedblright}}. Used by monitors.

\bigskip\hrule\vspace{0.1cm}
\index{ixor}
\noindent
{\bf ixor(i, i) : integer } \hfill {\bf bitwise xor}

\noindent
\texttt{ixor(i1, i2)} produces the bitwise \index{exclusive or}exclusive
or of \texttt{i1} and \texttt{i2}.

\bigskip\hrule\vspace{0.1cm}
\index{kbhit}
\noindent
{\bf kbhit() : ? } \hfill {\bf check for console input}

\noindent
\index{kbhit()}\texttt{kbhit()} checks to see if there is a
\index{keyboard}keyboard character waiting to be read.

\bigskip\hrule\vspace{0.1cm}
\index{key}
\noindent
{\bf key(x) : any* } \hfill {\bf table keys}\WarningNotThreadSafe

\noindent
\index{key(x)}\texttt{key(T)} generates the key (entry) values from
table \texttt{T}. \texttt{key(L)} generates the indices from 1 to
\texttt{*L} in list \texttt{L}. \texttt{key(R)} generates the string
field names of record \texttt{R}.
\texttt{key(D)} generates the string key values of a DBM database \texttt{D}.

\bigskip\hrule\vspace{0.1cm}
\index{keyword}
\noindent
{\bf keyword(s,CE:\&current,i:0) : any* } \hfill {\bf produce keyword value}

\noindent
\index{keyword()}\texttt{keyword(s,ce,i)} produces the value of keyword
\texttt{s} in the context of \texttt{ce}'s execution,
\texttt{i} levels up in the stack from the current point of execution.
Used in execution monitors.

\bigskip\hrule\vspace{0.1cm}
\index{left}
\noindent
{\bf left(s, i:1, s:" ") : string } \hfill {\bf left format string}

\noindent
\index{left()}\texttt{left(s1,i,s2)} formats \texttt{s1} to be a string
of length \texttt{i}. If \texttt{s1} is more than \texttt{i}
characters, it is truncated. If \texttt{s1} is fewer than \texttt{i}
characters it is padded on the right with as many copies of \texttt{s2}
as needed to increase it to length \texttt{i}.

\bigskip\hrule\vspace{0.1cm}
\index{list}
\noindent
{\bf list(integer:0, any:\&null) : list } \hfill {\bf create list}

\noindent
\index{list(i, x)}\texttt{list(i, x)} creates a list of size \texttt{i},
in which all elements have the initial value \texttt{x}. If \texttt{x}
is a mutable value such as a list, all elements refer to the
\textit{same} value, not a separate copy of the value for each element.

\bigskip\hrule\vspace{0.1cm}
\index{load}
\noindent
{\bf load(s,L,f:\&input,f:\&output,f:\&errout,i,i,i) : co-expression } \hfill {\bf load Unicon program}

\noindent
\index{load!Unicon program}
\index{load()}
\texttt{load(s,arglist,input,output,error,blocksize,stringsize,stacksize)}
loads the icode file named \texttt{s} and returns that
program's execution as a co-expression ready to start
its \texttt{main()} procedure with parameter \texttt{arglist} as its
command line arguments. The three file parameters are used as that
program's \texttt{\&input}, \texttt{\&output}, and
\texttt{\&errout}. The three integers are used as its initial memory
region sizes.

\bigskip\hrule\vspace{0.1cm}
\index{loadfunc}
\noindent
{\bf loadfunc(s, s) : procedure } \hfill {\bf load C function}

\noindent
\index{load!C function}\texttt{loadfunc(filename,funcname)} dynamically
loads a compiled C function from the object library file given by
\texttt{filename}. \texttt{funcname} must be a specially written
interface function that handles Icon data representations and calling
conventions.

\bigskip\hrule\vspace{0.1cm}
\index{localnames}
\noindent
{\bf localnames(CE, i:0) : string* } \hfill {\bf local variable names}

\noindent
\index{local}\index{variable}\texttt{localnames(ce,i)} generates the
names of local variables in co-expression \texttt{ce}, \texttt{i}
levels up from the current procedure invocation. The default \texttt{i} of 0
generates names in the currently active procedure in \texttt{ce}.

\bigskip\hrule\vspace{0.1cm}
\index{lock}
\noindent
{\bf lock(x) : x } \hfill {\bf lock mutex}

\noindent
\index{lock}\texttt{lock(x)} locks the mutex \texttt{x} or the mutex
associated with thread-safe object \texttt{x}.
Mutexes are recursive (i.e. they may be locked again by the same co-expression
or thread without blocking) but must be unlocked as many times as they are
locked. It is an error to unlock a mutex more times than it has been locked.

\bigskip\hrule\vspace{0.1cm}
\index{log}
\noindent
{\bf log(r, r:\&e) : real } \hfill {\bf logarithm}

\noindent
\index{logarithm}\texttt{log(r1,r2)} produces the logarithm of
\texttt{r1} to base \texttt{r2}.

\bigskip\hrule\vspace{0.1cm}
\index{many}
\noindent
{\bf many(c, s, i, i) : integer? } \hfill {\bf many characters}

\noindent
\index{many()}String scanning function \texttt{many(c,s,i1,i2)} produces
the position in \texttt{s} after the longest initial sequence of
members of \texttt{c} within \texttt{s[i1:i2]}.

\bigskip\hrule\vspace{0.1cm}
\index{map}
\noindent
{\bf map(s, s:\&ucase, s:\&lcase) : string } \hfill {\bf map string}

\noindent
\index{map string}\texttt{map(s1,s2,s3)} maps \texttt{s1}, using
\texttt{s2} and \texttt{s3}. The resulting string will be a copy of
\texttt{s1}, with the exception that any of
\texttt{s1}'s characters that appear in \texttt{s2}
are replaced by characters at the same position in \texttt{s3}.

\bigskip\hrule\vspace{0.1cm}
\index{match}
\noindent
{\bf match(s, s:\&subject, i:\&pos, i:0) : integer? } \hfill {\bf match string}

\noindent
\index{match string}String scanning function \texttt{match(s1,s2,i1,i2)}
produces \texttt{i1+*s1} if \texttt{s1==s2[i1+:*s1]}, but fails
otherwise.

\bigskip\hrule\vspace{0.1cm}
\index{max}
\noindent
{\bf max(n, ...) : number } \hfill {\bf largest value}

\noindent
\index{max()}\texttt{max(x, ...)} returns the largest value among its
arguments, which must be numeric.

\bigskip\hrule\vspace{0.1cm}
\index{member}
\noindent
{\bf member(x, ...) : x? } \hfill {\bf test membership}

\noindent
\index{member()}\texttt{member(x, ...)} returns \texttt{x} if its second
and subsequent arguments are all members of set, cset, list, table or record
\texttt{x} but fails otherwise. If \texttt{x} is a cset, all of the
characters in subsequent string arguments must be present in \texttt{x}
in order to succeed.

\bigskip\hrule\vspace{0.1cm}
\index{membernames}
\noindent
{\bf membernames(x) : list } \hfill {\bf class member names}

\noindent
\texttt{membernames(x)} produces a list containing the string names of
the fields of \texttt{x}, where \texttt{x} is either an object or a
string name of a class.

\bigskip\hrule\vspace{0.1cm}
\index{methodnames}
\noindent
{\bf methodnames(x) : list } \hfill {\bf class method names}

\noindent
\texttt{methodnames(x)} produces a list containing the string names of
the methods defined in class \texttt{x}, where \texttt{x} is either an
object or a string name of a class.

\bigskip\hrule\vspace{0.1cm}
\index{methods}
\noindent
{\bf methods(x) : list } \hfill {\bf class method list}

\noindent
\texttt{methods(x)} produces a list containing the procedure values of
the methods of \texttt{x}, where \texttt{x} is either an object or a
string name of a class.

\bigskip\hrule\vspace{0.1cm}
\index{min}
\noindent
{\bf min(n, ...) : number } \hfill {\bf smallest value}

\noindent
\index{min()}\texttt{min(x, ...)} returns the smallest value among its
arguments, which must be numeric.

\bigskip\hrule\vspace{0.1cm}
\index{mkdir}
\noindent
{\bf mkdir(s, s?) : ? } \hfill {\bf create directory}

\noindent
\index{directory!create}\index{create!directory}\index{mkdir()}
\texttt{mkdir(path,mode)} creates a new directory named \texttt{path} with
mode \texttt{mode}. The optional \texttt{mode} parameter can be numeric or a
string of the form accepted by \texttt{chmod()}. The function succeeds
if a new directory is created.

\bigskip\hrule\vspace{0.1cm}
\index{move}
\noindent
{\bf move(i:1) : string } \hfill {\bf move scanning position}

\noindent
\index{move(i)}\texttt{move(i)} moves \texttt{\&pos} \texttt{i}
characters from the current position and returns the substring of
\texttt{\&subject} between the old and new positions. This function
reverses its effects by resetting the position to its old value if it
is resumed.

\bigskip\hrule\vspace{0.1cm}
\index{mutex}
\noindent
{\bf mutex(x,y) : x } \hfill {\bf create a mutex}

\noindent
\index{mutex()}\texttt{mutex()} creates a new mutex. For \texttt{mutex(x)}
associates the new mutex with structure \texttt{x}.
The call {\texttt mutex(x,y)} associates an existing mutex \texttt{y} (or
mutex associated with protected object \texttt{y}) with
structure \texttt{x}.

\bigskip\hrule\vspace{0.1cm}
\index{name}
\noindent
{\bf name(v, CE:\&current) : string } \hfill {\bf variable name}

\noindent
\index{name(v)}\texttt{name(v)} returns the name of variable \texttt{v}
within the program that created co-expression \texttt{c}. Keyword
variables are recognized and named correctly. \texttt{name()} returns
the base type and subscript or field information for variables that are
elements within other values, but does not produce the source code
variable name for such variables. 

\bigskip\hrule\vspace{0.1cm}
\index{numeric}
\noindent
{\bf numeric(any) : number } \hfill {\bf convert to number}

\noindent
\index{convert!to number}\texttt{numeric(x)} produces an integer or real
number resulting from the type conversion of \texttt{x}, but fails if
the conversion is not possible.

\bigskip\hrule\vspace{0.1cm}
\index{open}
\noindent
{\bf open(s, s:"rt", ...) : file? } \hfill {\bf open file}

\noindent
\index{open file}\texttt{open(s1, s2, ...)} opens a file named
\texttt{s1} with mode \texttt{s2} and attributes given in trailing
arguments. The modes recognized by \texttt{open()} are: 

\ \ \ \ \ \texttt{"a"\ \ \ \ }append; write
after current contents\\
 \ \ \ \ \texttt{"b"\ \ \ \ }open for both
reading and writing (b does not mean binary mode!)\\
 \ \ \ \ \texttt{"c"\ \ \ \ }create a new
file and open it\\
 \ \ \ \ \texttt{"d"\ \ \ \ }open a
[NG]\index{DBM}DBM database\\
 \ \ \ \ \texttt{"g"\ \ \ \ }create a 2D
graphics window\\
 \ \ \ \ \texttt{"gl"\ \ \ \ }create a 3D
graphics window\\
 \ \ \ \ \texttt{"n"\ \ \ \ }connect to a
remote TCP network socket\\
 \ \ \ \ \texttt{"na"\ \ \ \ }accept a
connection from a TCP network socket \\
 \ \ \ \ \texttt{"nau"\ \ }accept a
connection from a UDP network socket\\
 \ \ \ \ \texttt{"nl"\ \ \ \ }listen on a
TCP network socket \\
 \ \ \ \ \texttt{"nu"\ \ \ \ }connect to a
UDP network socket\\
 \ \ \ \ \texttt{"e"\ \ \ \ } use SSL/TLS protocol to
encrypt the network socket\\
 \ \ \ \ \texttt{"m"\ \ \ \ }connect to a
messaging server (HTTP, HTTPS, SMTP, POP, ...)\\
 \ \ \ \ \texttt{"o"\ \ \ \ }open an
\index{ODBC}ODBC connection to a (typically \index{SQL}SQL)
database\\
 \ \ \ \ \texttt{"p"\ \ \ \ }execute a
program given by command line s1 and open a pipe to it\\
 \ \ \ \ \texttt{"r"\ \ \ \ }read\\
 \ \ \ \ \texttt{"t"\ \ \ \ }use text mode,
with newlines translated\\
 \ \ \ \ \texttt{"u"\ \ \ \ }use a binary
untranslated mode\\
 \ \ \ \ \texttt{"w"\ \ \ \ }write

Directories may only be opened for reading, and produce the names of all
files, one per line. Pipes may be opened for reading or writing, but
not both. \texttt{open()} fails if the pipe is open for reading and
the command line given by \texttt{s1} produces no output:
\texttt{\&errornumber} may be used to distinguish between a successful
command that produces no output and a command that returns a non zero
(unsuccessful) exit code.

When opening a network socket: the first argument \texttt{s1} is the
name of the socket to connect. If \texttt{s1} is of the form
\texttt{"s:i"}, it is an Internet domain socket on
host \texttt{s} and port \texttt{i}; otherwise, it is the name of a Unix
domain socket. If the host name is null, it represents the current
host. Mode \texttt{"n"} allows an optional third parameter,
an integer timeout (in milliseconds) after which \texttt{open()} fails
if no connection has been established by that time.

For a UDP socket, there is not really a connection, but any writes to
that file will send a datagram to that address, so that the address
doesn't have to be specified each time. Also,
\texttt{read()} or \texttt{reads()} cannot be performed on a UDP
socket; use receive. UDP sockets must be in the INET domain; the
address must have a colon. 

For a DBM database, only one modifier character may be used: if
\texttt{s1} is \texttt{"dr"} it indicates that the database should be
opened in read-only mode.  For an ODBC database, following the mode
letter \texttt{"o"} comes an optional string default table name used
by functions such as \texttt{dbcolumns()}, followed by two generally
required strings giving the username and password authentication for the
connection.

The filename argument is a Uniform Resource Indicator (URI) when opening
a messaging connection. Mode \texttt{"m-"} may be given to skip the
validation of an encryption certificate for HTTPS connections.
Arguments after the mode "m" are sent as headers. The HTTP
User-Agent header defaults to "Unicon
Messaging/10.0" and Host defaults to the host and port
indicated in the URI. The SMTP From: header obtains its default from a
UNICON\_USERADDRESS environment variable if it is present.

For 2D and 3D windows, attribute values may be specified in the
following arguments to \texttt{open()}. \texttt{open()} fails if a
window cannot be opened or an attribute cannot be set to a requested
value.

\bigskip\hrule\vspace{0.1cm}
\index{opmask}
\noindent
{\bf opmask(CE, c) : cset } \hfill {\bf opcode mask}

\noindent
\texttt{opmask(ce)} gets \texttt{ce}'s
program's opcode mask. The function returns
\texttt{\&null} if there is no opcode mask. \texttt{opmask(ce,cs)} sets
\texttt{ce}'s program's opcode mask
to \texttt{cs}. This function is part of the execution monitoring
facilities.

\bigskip\hrule\vspace{0.1cm}
\index{oprec}
\noindent
{\bf oprec(x) : record } \hfill {\bf get methods vector}

\noindent
\texttt{oprec(r)} produces a variable reference for
\texttt{r}'s class' methods vector.

\bigskip\hrule\vspace{0.1cm}
\index{ord}
\noindent
{\bf ord(s) : integer } \hfill {\bf ordinal value}

\noindent
\index{ordinal value}\texttt{ord(s)} produces the integer ordinal
(value) of \texttt{s}, which must be of size 1.

\bigskip\hrule\vspace{0.1cm}
\index{paramnames}
\noindent
{\bf paramnames(CE, i:0) : string* } \hfill {\bf parameter names}

\noindent
\index{parameter names}\texttt{paramnames(ce,i)} produces the names of
the parameters in the procedure activation \texttt{i} levels above the
current activation in \texttt{ce}.

\bigskip\hrule\vspace{0.1cm}
\index{parent}
\noindent
{\bf parent(CE) : co{}-expression } \hfill {\bf parent program}

\noindent
\texttt{parent(ce)} returns \texttt{\&main} for ce's
parent program. This is interesting only when programs are dynamically
loaded using the \texttt{load()} function.

\bigskip\hrule\vspace{0.1cm}
\index{pipe}
\noindent
{\bf pipe() : list } \hfill {\bf create pipe}

\noindent
\index{pipe()}\texttt{pipe()} creates a pipe and returns a list of two
file objects. The first is for reading, the second is for writing. See
also function \texttt{filepair()}.

\bigskip\hrule\vspace{0.1cm}
\index{pop}
\noindent
{\bf pop(L {\textbar} Message) : any? } \hfill {\bf pop from stack}\WarningNotThreadSafe

\noindent
\index{pop(L)}\texttt{pop(L)} removes an element from the top of the
\index{stack}stack (\texttt{L[1]}) and returns it. \texttt{pop(M)}
removes and returns the first message in POP mailbox connection \texttt{M};
the actual deletion occurs when the messaging connection is closed.

\bigskip\hrule\vspace{0.1cm}
\index{pos}
\noindent
{\bf pos(i) : integer? } \hfill {\bf test scanning position}

\noindent
\index{pos(i)}\texttt{pos(i)} tests whether \texttt{\&pos} is at
position \texttt{i} in \texttt{\&subject}.

\bigskip\hrule\vspace{0.1cm}
\index{proc}
\noindent
{\bf proc(any, i:1, C) : procedure? } \hfill {\bf convert to procedure}

\noindent
\index{proc(s,i)}\texttt{proc(s,i)} converts \texttt{s} to a procedure
if that is possible. Parameter \texttt{i} is used to resolve ambiguous
string names; it must be either 0, 1, 2, or 3. If \texttt{i} is 0, a
built-in function is returned if it is available, even if the global
identifier by that name has been assigned differently. If \texttt{i} is
1, 2, or 3, the procedure for an operator with that number of operands
is produced. For example,
\texttt{proc("-",2)} produces the procedure
for subtraction, while
\ \ \texttt{proc("-")} produces the
procedure for unary negation. \texttt{proc(C,i)} returns the procedure
activated \texttt{i} levels up with \texttt{C}. \texttt{proc(p, i, C)}
returns procedure \texttt{p} if it belongs to the program which created
co-expression \texttt{C}.

\bigskip\hrule\vspace{0.1cm}
\index{pull}
\noindent
{\bf pull(L,i:1) : any? } \hfill {\bf remove from list end}\WarningNotThreadSafe

\noindent
\index{pull(L)}\texttt{pull(L)} removes and produces an element from the
end of a nonempty list \texttt{L.} \texttt{pull(L, i)} removes
\texttt{i} elements, producing the last one removed.

\bigskip\hrule\vspace{0.1cm}
\index{push}
\noindent
{\bf push(L, any, ...) : list } \hfill {\bf push on to stack}\WarningNotThreadSafe

\noindent
\texttt{push(L, x1, ..., xN)} pushes elements onto the beginning of list
\texttt{L}. The order of the elements added to the list is the reverse
of the order they are supplied as parameters to the call to
\index{push()}\texttt{push()}. \texttt{push()} returns the list that is
passed as its first parameter, with the new elements added.

\hrule\vspace{0.1cm}
\index{put}
\noindent
{\bf put(L, x1, ..., xN) : list } \hfill {\bf add to list end}\WarningNotThreadSafe

\noindent
\index{put()}\texttt{put(L, x1, ..., xN)} puts elements onto the end of
list \texttt{L}.

\bigskip\hrule\vspace{0.1cm}
\index{read}
\noindent
{\bf read(f:\&input) : string? } \hfill {\bf read line}

\noindent
\index{read(f)}\texttt{read(f)} reads a line from file \texttt{f}. The
end of line marker is discarded.

\bigskip\hrule\vspace{0.1cm}
\index{reads}
\noindent
{\bf reads(f:\&input, i:1) : string? } \hfill {\bf read characters}

\noindent
\index{reads(f,i)}\texttt{reads(f,i)} reads up to \texttt{i} characters
from file \texttt{f}. It fails on end of file. If \texttt{f} is a
network connection, \texttt{reads()} returns as soon as it has input
available, even if fewer than \texttt{i} characters were delivered. If
\texttt{i} is -1, \texttt{reads()} reads and produces the entire file
as a string. Care should be exercised when using this feature to read
very large files.

\bigskip\hrule\vspace{0.1cm}
\index{ready}
\noindent
{\bf ready(f:\&input, i:0) : string? } \hfill {\bf non{}-blocking read}

\noindent
\index{ready(f,i)}\texttt{ready(f,i)} reads up to \texttt{i} characters
from file \texttt{f}. If \texttt{i} is positive it returns immediately with available data or
fails if no data is available. If \texttt{i} is 0, \texttt{ready()}
returns all available input or an empty string if no data is available.
It is not currently implemented for window values.

\bigskip\hrule\vspace{0.1cm}
\index{real}
\noindent
{\bf real(any) : real? } \hfill {\bf convert to real}

\noindent
\index{convert!to real}\texttt{real(x)} converts \texttt{x} to a real,
or fails if the conversion cannot be performed.

\bigskip\hrule\vspace{0.1cm}
\index{receive}
\noindent
{\bf receive(f) : record } \hfill {\bf receive datagram}

\noindent
\index{receive datagram}\texttt{receive(f)} reads a datagram addressed
to the port associated with \texttt{f}, waiting if necessary. The
returned value is a record of type \texttt{posix\_message(addr, msg)},
containing the address of the sender and the contents of the message
respectively. 

\bigskip\hrule\vspace{0.1cm}
\index{remove}
\noindent
{\bf remove(s) : ? } \hfill {\bf remove file}

\noindent
\index{remove file}\index{file!remove}\texttt{remove(s)} removes the
file named \texttt{s}.

\bigskip\hrule\vspace{0.1cm}
\index{rename}
\noindent
{\bf rename(s, s) : ? } \hfill {\bf rename file}

\noindent
\index{file!rename}\texttt{rename(s1,s2)} renames the file named
\texttt{s1} to have the name \texttt{s2}.

\bigskip\hrule\vspace{0.1cm}
\index{repl}
\noindent
{\bf repl(x, i) : x } \hfill {\bf replicate}

\noindent
\index{replicate string}\texttt{repl(x, i)} concatenates and returns
\texttt{i} copies of string or list \texttt{x}.

\bigskip\hrule\vspace{0.1cm}
\index{reverse}
\noindent
{\bf reverse(x) : x } \hfill {\bf reverse sequence}

\noindent
\index{reverse(x)}\texttt{reverse(x)} returns a value that is the
reverse of string or list \texttt{x}.

\bigskip\hrule\vspace{0.1cm}
\index{right}
\noindent
{\bf right(s, i:1, s:" ") : string } \hfill {\bf right format string}

\noindent
\index{right()}\texttt{right(s1,i,s2)} produces a string of length
\texttt{i}. If \texttt{i{\textless}*s1}, \texttt{s1} is truncated.
Otherwise, the function pads \texttt{s1} on left with \texttt{s2} to
length \texttt{i}.

\bigskip\hrule\vspace{0.1cm}
\index{rmdir}
\noindent
{\bf rmdir(s) : ? } \hfill {\bf remove directory}

\noindent
\index{remove directory}\texttt{rmdir(d)} removes the directory named
\texttt{d}. \texttt{rmdir()} fails if \texttt{d} is not empty or does
not exist.

\bigskip\hrule\vspace{0.1cm}
\index{rtod}
\noindent
{\bf rtod(r) : real } \hfill {\bf convert radians to degrees}

\noindent
\index{convert!radians to degrees}\texttt{rtod(r)} produces the
equivalent of \texttt{r} radians, expressed in degrees.

\bigskip\hrule\vspace{0.1cm}
\index{runerr}
\noindent
{\bf runerr(i, any) } \hfill {\bf runtime error}

\noindent
\index{runtime error}\texttt{runerr(i,x)} produces runtime error
\texttt{i} with value \texttt{x}. Program execution is terminated.

\bigskip\hrule\vspace{0.1cm}
\index{seek}
\noindent
{\bf seek(f, any) : file? } \hfill {\bf seek to file offset}

\noindent
\index{seek(f,i)}\texttt{seek(f,i)} seeks to offset \texttt{i} in file
\texttt{f}, if it is possible. If \texttt{f} is a regular file,
\texttt{i} must be an integer. If \texttt{f} is a database, \texttt{i}
seeks a position within the current set of selected rows. The position
is selected numerically if \texttt{i} is convertible to an integer;
otherwise \texttt{i} must be convertible to a string and the position
is selected associatively by the primary key.

\bigskip\hrule\vspace{0.1cm}
\index{select}
\noindent
{\bf select(x1, x2, ?) : list } \hfill {\bf files with available input}

\noindent
\texttt{select(files?, timeout)} waits for a input to become available
on any of several files, typically network connections or windows. Its
arguments may be files or lists of files, ending with an optional
integer timeout value in milliseconds. It returns a list of those files
among its arguments that have input waiting.

If the final argument to \index{select()}\texttt{select()} is an
integer, it is an upper bound on the time elapsed before select
returns. A timeout of 0 causes \texttt{select()} to return immediately
with a list of files on which input is currently pending. If no files
are given, \texttt{select()} waits for its timeout to expire. If no
timeout is given, \texttt{select()} waits forever for available input
on one of its file arguments. Directories and databases cannot be
arguments to \texttt{select()}.

\bigskip\hrule\vspace{0.1cm}
\index{send}
\noindent
{\bf send(s, s) : ? } \hfill {\bf send datagram}

\noindent
\index{send datagram}\texttt{send(s1, s2)} sends a UDP datagram to the
address \texttt{s1} (in host:port format) with the contents
\texttt{s2}.

\bigskip\hrule\vspace{0.1cm}
\index{seq}
\noindent
{\bf seq(i:1, i:1) : integer* } \hfill {\bf generate sequence}

\noindent
\index{sequence, generate numeric}\texttt{seq(i, j)} generates the
progression \texttt{i}, \texttt{i+j}, \texttt{i+2*j}, ... .
\texttt{j} may not be 0.  Runtime error 101 occurs if either
\texttt{i} or \texttt{j} is a large integer.  Runtime error 203
occurs if the value to be generated is a large integer.

\bigskip\hrule\vspace{0.1cm}
\index{serial}
\noindent
{\bf serial(x) : integer? } \hfill {\bf structure serial number}

\noindent
\index{serial(x)}\texttt{serial(x)} returns the serial number for
structure \texttt{x}, if it has one. Serial numbers uniquely identify
structure values. \texttt{serial()} returns the serial number of the
current co-expression (or thread).

\bigskip\hrule\vspace{0.1cm}
\index{set}
\noindent
{\bf set(x, ...) : set } \hfill {\bf create set}

\noindent
\index{create!set}\index{set()}\texttt{set()} creates a set. Arguments
are inserted into the new set, with the exception of lists.
\texttt{set(L)} creates a set whose members are the elements of list
\texttt{L}.

\bigskip\hrule\vspace{0.1cm}
\index{setenv}
\noindent
{\bf setenv(s) : ? } \hfill {\bf set environment variable}

\noindent
\index{setenv()}\texttt{setenv()} sets an environment variable
\texttt{s} in the operating system.

\bigskip\hrule\vspace{0.1cm}
\index{signal}
\noindent
{\bf signal(cv, i:1) : ?? } \hfill {\bf signal a conditional variable}

\noindent
\index{signal}\texttt{signal(x, y)} signals the condition variable
\texttt{x}. If \texttt{y} is supplied, the condition variable is
signaled \texttt{y} times. If \texttt{y} is 0, a ``broadcast''
signal is sent waking up all threads waiting on \texttt{x}.
Condition variables have no memory: signalling a condition variable
that has no threads waiting on it has no effect.

\bigskip\hrule\vspace{0.1cm}
\index{sin}
\noindent
{\bf sin(r) : real } \hfill {\bf sine}

\noindent
\index{sine}\texttt{sin(r)} produces the sine of
\texttt{r}. The argument is given in radians.

\bigskip\hrule\vspace{0.1cm}
\index{sort}
\noindent
{\bf sort(x, i:1) : list } \hfill {\bf sort structure}

\noindent
\index{sort(x, i)}\texttt{sort(x, i)} sorts structure \texttt{x} in
ascending order. If
\texttt{x} is a table, parameter \texttt{i} is the sort method. If
\texttt{i} is 1 or 2, the table is sorted into a list of lists of the
form [key, value]. If \texttt{i} is 3 or 4, the table is sorted into a
list of alternating keys and values. Sorting is by keys for odd-values
of \texttt{i}, and by table element values for even-values of
\texttt{i}.

\bigskip\hrule\vspace{0.1cm}
\index{sortf}
\noindent
{\bf sortf(x, i:1) : list } \hfill {\bf sort by field}

\noindent
\index{sort by field}\texttt{sortf(x,i)} sorts a list, record, or set
\texttt{x} using field \texttt{i} of each element that has one.
Elements that don't have an
\texttt{i}'th field are sorted in standard order and
come before those that do have an \texttt{i}'th field.

\bigskip\hrule\vspace{0.1cm}
\index{spawn}
\noindent
{\bf spawn(CE, i, i, i) : thread } \hfill {\bf launch asynchronous thread}

\noindent
\index{spawn()}\texttt{spawn(ce)} launches co-expression \texttt{ce} as an
asynchronous thread that will execute concurrently with the current
co-expression. The three optional integers specify the memory in bytes
allocated for the thread's block and string regions and stack size.
The defaults are 10\% of the corresponding sizes for the main thread.

\bigskip\hrule\vspace{0.1cm}
\index{sql}
\noindent
{\bf sql(D, s) : integer } \hfill {\bf execute SQL statement}

\noindent
\index{sql()}\texttt{sql(db, query)} executes arbitrary SQL code on
\texttt{db}. This function allows the program to do vendor-specific SQL
and many SQL statements that cannot be expressed otherwise using the
Unicon database facilities. \texttt{sql()} can leave the database in an
arbitrary state and should be used with care.

\bigskip\hrule\vspace{0.1cm}
\index{sqrt}
\noindent
{\bf sqrt(r) : real } \hfill {\bf square root}

\noindent
\index{square root}\texttt{sqrt(r)} produces the square root of
\texttt{r}.

\bigskip\hrule\vspace{0.1cm}
\index{stat}
\noindent
{\bf stat(f) : record? } \hfill {\bf get file information}

\noindent
\index{file!information}\index{stat(f)}\texttt{stat(f)} returns a record
with information about the file \texttt{f} which may be a path or a
file object. The return value is of type:
\texttt{record posix\_stat(dev, ino, mode, nlink, uid, gid, rdev},
\texttt{size, atime, mtime, ctime, blksize, blocks, symlink)}.
Many of these fields are POSIX
specific, but a number are supported across platforms, such as the
\index{file size}file size in bytes (the \texttt{size} field), access
permissions (the \texttt{mode} field), and the last modified time (the
\texttt{mtime} field).

The \texttt{atime}, \texttt{mtime}, and \texttt{ctime} fields are
integers that may be formatted with the \texttt{ctime()} and
\texttt{gtime()} functions. The mode is a string similar to the long
listing option of the UNIX \texttt{ls(1)} command. For example,
\texttt{"-rwxrwsr-x"} represents a plain
file with a mode of 2775 (octal). \texttt{stat(f)} fails if filename or
path \texttt{f} does not exist.

\bigskip\hrule\vspace{0.1cm}
\index{staticnames}
\noindent
{\bf staticnames(CE:\&current, i:0) : string* } \hfill {\bf static variable names}

\noindent
\index{static}\texttt{staticnames(ce,i)} generates the names of static
variables in the procedure \texttt{i} levels above the current
activation in \texttt{ce}.

\bigskip\hrule\vspace{0.1cm}
\index{stop}
\noindent
{\bf stop(s{\textbar}f, ...) : } \hfill {\bf stop execution}

\noindent
\index{stop}\texttt{stop(args)} \index{halt}halts execution after
writing out its string arguments, followed by a newline, to
\texttt{\&errout}. If any argument is a file, subsequent string
arguments are written to that file instead of \texttt{\&errout}. The
program exit status indicates that an error has occurred.

\bigskip\hrule\vspace{0.1cm}
\index{string}
\noindent
{\bf string(x) : string? } \hfill {\bf convert to string}

\noindent
\index{convert!to string}\index{string(x)}\texttt{string(x)} converts
\texttt{x} to a string and returns the result, or fails if the value
cannot be converted.

\bigskip\hrule\vspace{0.1cm}
\index{system}
\noindent
{\bf system(x, f:\&input, f:\&output, f:\&errout, s) : integer } \hfill {\bf execute system command}

\noindent
\index{system command}\texttt{system(x, f1, f2, f3, waitflag)} launches
execution of a program in a separate process. \texttt{x} can be either
a string or a list of strings. In the former case, whitespace is used
to separate the arguments and the command is processed by the
platform's command interpreter. In the second case,
each member of the list is an argument and the second and subsequent
list elements are passed unmodified to the program named in the first
element of the list.

The three file arguments are files that will be used for the new
process' standard input, standard output and standard
error. The return value is the exit status from the process. If the
\texttt{waitflag} argument is
\texttt{"nowait"}, \texttt{system()}
returns immediately after spawning the new process, and the return
value is then the process id of the new process.

\bigskip\hrule\vspace{0.1cm}
\index{tab}
\noindent
{\bf tab(i:0) : string? } \hfill {\bf set scanning position}

\noindent
\index{tab(i)}\texttt{tab(i)} sets \texttt{\&pos} to \texttt{i} and
returns the substring of \texttt{\&subject} spanned by the former and
new positions. \texttt{tab(0)} moves the position to the end of the
string. This function reverses its effects by resetting the position to
its old value if it is resumed.

\bigskip\hrule\vspace{0.1cm}
\index{table}
\noindent
{\bf table(k,v, ..., x) : table } \hfill {\bf create table}

\noindent
\index{table(x)}\texttt{table(x)} creates a table with default value
\texttt{x}. If \texttt{x} is a mutable value such as a list, all
references to the default value refer to the \textit{same} value, not a
separate copy for each key. Given more than one argument,
\texttt{table(k,v,...x)} takes alternating keys and values and
populates the table with these initial contents.

\bigskip\hrule\vspace{0.1cm}
\index{tan}
\noindent
{\bf tan(r) : real } \hfill {\bf tangent}

\noindent
\index{tangent}\texttt{tan(r)} produces the tangent of \texttt{r} in
radians.

\bigskip\hrule\vspace{0.1cm}
\index{trap}
\noindent
{\bf trap(s, p) : procedure } \hfill {\bf trap or untrap signal}

\noindent
\index{trap signal}\texttt{trap(s, proc)} sets up a signal handler for
the signal \texttt{s} (the name of the signal). The old handler (if
any) is returned. If \texttt{proc} is null, the signal is reset to its
default value. Procedure \texttt{proc} will be called with a single parameter,
which is the string name of the signal received. Unicon knows about 40
names; most folks will care mainly about
\texttt{"SIGINT"} and \texttt{"SIGPIPE"}.

Caveat: This is not supported by the optimizing
\index{compiler}compiler (the -C command line option, which invokes iconc).

\bigskip\hrule\vspace{0.1cm}
\index{trim}
\noindent
{\bf trim(s, c:' ', i:{}-1) : string } \hfill {\bf trim string}

\noindent
\index{trim(s,c,i)}\texttt{trim(s,c,i)} removes characters in \texttt{c}
from \texttt{s} at the back (\texttt{i}=-1, the default), at the front
(\texttt{i}=1), or at both ends (\texttt{i}=0).

\bigskip\hrule\vspace{0.1cm}
\index{truncate}
\noindent
{\bf truncate(f, i) : ? } \hfill {\bf truncate file}

\noindent
\index{truncate file}\texttt{truncate(f, len)} changes the file
\texttt{f} (which may be a string filename, or an open file) to be no
longer than length \texttt{len}. \texttt{truncate()} does not work on
windows, network connections, pipes, or databases.

\bigskip\hrule\vspace{0.1cm}
\index{trylock}
\noindent
{\bf trylock(x) : x? } \hfill {\bf try locking mutex}

\noindent
\index{lock}\texttt{trylock(x)} attempts to lock the mutex {\textit x} or the
mutex associated with thread-safe object \texttt{x}. \texttt{trylock} fails
if \texttt{x} is locked by a different thread or co-expression. If \texttt{x}
is already locked by the calling thread or co-expression, \texttt{trylock}
will lock it again.

\bigskip\hrule\vspace{0.1cm}
\index{type}
\noindent
{\bf type(x) : string } \hfill {\bf type of value}

\noindent
\index{type(x)}\texttt{type(x)} returns a string that indicates the type
of \texttt{x}.

\bigskip\hrule\vspace{0.1cm}
\index{unlock}
\noindent
{\bf unlock(x) : x } \hfill {\bf unlock mutex}

\noindent
\index{lock}\texttt{unlock(x)} unlocks the mutex \texttt{x} or the mutex
associated with thread-safe object \texttt{x}.

\bigskip\hrule\vspace{0.1cm}
\index{upto}
\noindent
{\bf upto(c, s, i, i) : integer* } \hfill {\bf find characters in set}

\noindent
String scanning function \index{upto(c)}\texttt{upto(c,s,i1,i2)}
generates the sequence of integer positions in \texttt{s} up to a
character in \texttt{c} in \texttt{s[i1:i2]}, but fails if there is no
such position.

\bigskip\hrule\vspace{0.1cm}
\index{utime}
\noindent
{\bf utime(s, i, i) : null } \hfill {\bf file access/modification times}

\noindent
\texttt{utime(f, atime, mtime)} sets the \index{access time, set}access
time for a file named \texttt{f} to \texttt{atime} and the modification
time to \texttt{mtime}. The \texttt{ctime} is set to the current time.
The effects of this function are platform specific. Some file systems
support only a subset of these times.

\bigskip\hrule\vspace{0.1cm}
\index{variable}
\noindent
{\bf variable(s, CE:\&current, i:0) : any? } \hfill {\bf get variable}

\noindent
\index{variable(s,c,i)}\texttt{variable(s, c, i)} finds the variable
with name \texttt{s} and returns a variable descriptor that refers to
its value. The name \texttt{s} is searched for within co-expression
\texttt{c}, starting with local variables \texttt{i} levels above the
current procedure frame, and then among the global variables in the
program that created \texttt{c}.

\bigskip\hrule\vspace{0.1cm}
\index{wait}
\noindent
{\bf wait(x) : ? } \hfill {\bf wait for thread or condition variable}

\noindent
\index{wait()}\texttt{wait(x)} waits for \texttt{x}. If \texttt{x} is
a thread, \texttt{wait()} waits for it to finish. If \texttt{x} is
is a condition variable \texttt{wait()} waits until that variable is
subsequently signaled by another thread.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf where(f) : integer? } \hfill {\bf file position}

\noindent
\index{file!position}\index{where(f)}\texttt{where(f)} returns the
current offset position in file \texttt{f}. It fails on windows and
networks. The beginning of the file is offset 1.

\bigskip\hrule\vspace{0.1cm}
\index{write}
\noindent
{\bf write(s{\textbar}f, ...) : string{\textbar}file } \hfill {\bf write text line}

\noindent
\texttt{write(args)} outputs strings, followed by a newline, to a file
or files. Strings are written in order to their nearest preceding file,
defaulting to \texttt{\&output}. A newline is output to the preceding
file after the last argument, as well as whenever a non-initial file
argument directs output to a different file.
\index{write()}\texttt{write()} returns its last argument.

\bigskip\hrule\vspace{0.1cm}
\index{writes}
\noindent
{\bf writes(s{\textbar}f, ...) : string{\textbar}file } \hfill {\bf write strings}

\noindent
\texttt{writes(args)} outputs strings to one or more files. Each string
argument is written to the nearest preceding file argument, defaulting
to \texttt{\&output}. \index{writes()}\texttt{writes()} returns its
last argument.

\subsection*{Graphics functions}

The names of built-in graphics functions begin with upper case. The built-in
graphics functions are listed here. These functions are more thoroughly
described in [Griswold98]. Extensive procedure and class libraries for graphics
are described in [Griswold98] and in Appendix B.  In 2D, arguments named
\texttt{x} and \texttt{y} are pixel locations in zero-based integer
coordinates. In 3D windows coordinates are given using real numbers, and
functions by default take three coordinates (\texttt{x,y,z}) per
vertex. Attribute \texttt{dim} can be set to 2 or 4, changing most 3D functions
to take vertices in a (\texttt{x,y}) or (\texttt{x,y,z,w}) format. Arguments
named \texttt{row} and \texttt{col} are cursor locations in one-based integer
text coordinates. Most functions' first parameter named
\texttt{w} defaults to \texttt{\&window} and the window argument can be omitted
in the default case. \AreNotThreadSafe{Most 3D functions}

\bigskip\hrule\vspace{0.1cm}
\index{Active}
\noindent
{\bf Active() : window } \hfill {\bf produce active window}

\noindent
\texttt{Active()} returns a window that has one or more events pending.
If no window has an event pending, \texttt{Active()} blocks and waits
for an event to occur. \texttt{Active()} starts with a different
window on each call in order to avoid window
"starvation". \texttt{Active()} fails if
no windows are open.

\bigskip\hrule\vspace{0.1cm}
\index{Alert}
\noindent
{\bf Alert() : window } \hfill {\bf alert the user}

\noindent
\texttt{Alert()} produces a visual flash or audible beep that signifies
to the user the occurrence of some notable event in the application.

\bigskip\hrule\vspace{0.1cm}
\index{Bg}
\noindent
{\bf Bg(w,s) : string } \hfill {\bf background color}

\noindent
\texttt{Bg(w)} retrieves the background color. \texttt{Bg(w,s)} sets the
background color by name, rgb, or mutable color value. \texttt{Bg()}
fails if the background cannot be set to the requested color.

\bigskip\hrule\vspace{0.1cm}
\index{Clip}
\noindent
{\bf Clip(w,x:0,y:0,width:0,height:0) : window } \hfill {\bf clip to rectangle}

\noindent
\texttt{Clip(w,x,y,width,height)} clips output to a rectangular area
within the window. If \texttt{width} is 0, the clip region extends
from \texttt{x} to the right side of the window. If \texttt{height}
is 0, the clip region extends from \texttt{y} to the bottom of the
window.

\bigskip\hrule\vspace{0.1cm}
\index{Clone}
\noindent
{\bf Clone(w,s,...) : window } \hfill {\bf clone context}

\noindent
\texttt{Clone(w)} produces a new window binding in which a new graphics
context is copied from \texttt{w} and bound to
\texttt{w}'s canvas. Additional string arguments
specify attributes of the new binding, as in \texttt{WAttrib()}. If the
first string argument is
\texttt{{\textquotedblleft}g{\textquotedblright}} or
\texttt{{\textquotedblleft}gl{\textquotedblright}}, \texttt{Clone()}
binds the new context to a subwindow with separate canvas and input
queue inside of and relative to \texttt{w}. \texttt{Clone()} fails if
an attribute cannot be set to a requested value.

\bigskip\hrule\vspace{0.1cm}
\index{Color}
\noindent
{\bf Color(w, i, s,...) : window } \hfill {\bf set mutable color}

\noindent
\texttt{Color(w,i)} produces the current setting of mutable color
\texttt{i}. \texttt{Color(w,i,s,...)} sets the color map entries
identified by \texttt{i[j]} to the corresponding colors \texttt{s[j]}.
\ See [Griswold98].

\bigskip\hrule\vspace{0.1cm}
\index{ColorValue}
\noindent
{\bf ColorValue(w, s) : string } \hfill {\bf convert color name to rgb}

\noindent
\texttt{ColorValue(w,s)} converts the string color \texttt{s} into a
string with three comma-separated 16-bit integer values denoting the
color's RGB components. \texttt{ColorValue()} fails if
string \texttt{s} is not a valid name or recognized decimal or hex
encoding of a color.

\bigskip\hrule\vspace{0.1cm}
\index{CopyArea}
\noindent
{\bf CopyArea(w1, w2,x:0,y:0,width:0,height:0,x2:0,y2:0) : window } \hfill {\bf copy area}

\noindent
\texttt{CopyArea(w1,w2,x,y,width,height,x2,y2)} copies a rectangular
region within \texttt{w1} defined by
\texttt{x},\texttt{y},\texttt{width},\texttt{height} to window
\texttt{w2} at offset \texttt{x2},\texttt{y2}. \texttt{CopyArea()}
returns \texttt{w1}. \texttt{\&window} is not a default for this
function. The default copies all of \texttt{w1}.

\bigskip\hrule\vspace{0.1cm}
\index{Couple}
\noindent
{\bf Couple(w1, w2) : window } \hfill {\bf couple window to context}

\noindent
\texttt{Couple(w1,w2)} produces a new value that binds the window
associated with \texttt{w1} to the graphics context associated with
\texttt{w2}.

\bigskip\hrule\vspace{0.1cm}
\index{DrawArc}
\noindent
{\bf DrawArc(w, x, y, width, height:width, a1:0.0, a2:2*\&pi, ...) : window } \hfill {\bf draw arc}

\noindent
\texttt{DrawArc(w,x,y,width,height,a1,a2,...)} draws arcs or ellipses.
\ Each is defined by six integer coordinates. \texttt{x}, \texttt{y},
\texttt{width} and \texttt{height} define a bounding rectangle around
the arc; the center of the arc is the point
\texttt{(x+(width)/2,y+(height)/2)}. Angles are specified in radians.
\ Angle \texttt{a1} is the starting position of the arc, where 0.0 is
the 3 o'clock position and the positive direction is
counter-clockwise. Angle \texttt{a2} is not the end position, but
rather specifies the direction and extent of the arc.

\bigskip\hrule\vspace{0.1cm}
\index{DrawCircle}
\noindent
{\bf DrawCircle(w, x, y, radius, a1:0.0, a2:2*\&pi, ...) : window } \hfill {\bf draw circle}

\noindent
\texttt{DrawCircle()} draws a circle or arc, centered at
(\texttt{x},\texttt{y}) and otherwise similar to \texttt{DrawArc()}
with \texttt{width=height}.

\bigskip\hrule\vspace{0.1cm}
\index{DrawCube}
\noindent
{\bf DrawCube(w, x, y, z, len ...) : record } \hfill {\bf draw cube}

\noindent
\texttt{DrawCube(w, x, y, z, len{\dots})} draws a cube with sides of
length \texttt{len} at the position (\texttt{x}, \texttt{y},
\texttt{z}) on the 3D window \texttt{w}. The display list element is
returned. This procedure fails if the context attribute \texttt{dim} is
set to 2. 

\bigskip\hrule\vspace{0.1cm}
\index{DrawCurve}
\noindent
{\bf DrawCurve(w, x1, y1, ...) : window } \hfill {\bf draw curve}

\noindent
\texttt{DrawCurve(w,x1,y1,...,xn,yn)} draws a smooth curve connecting
each \texttt{x,y} pair in the argument list. If the first and last
point are the same, the curve is smooth and closed through that point.
If there is no window argument, and \&window is not set, DrawCurve()
returns the points as alternating x, y values in a single list.

\bigskip\hrule\vspace{0.1cm}
\index{DrawCylinder}
\noindent
{\bf DrawCylinder(w, x, y, z, h, r1, r2, ...) : record } \hfill {\bf draw cylinder}

\noindent
\texttt{DrawCylinder(w, x, y, z, h, r1, r2, {\dots})} draws a cylinder
with a top of radius \texttt{r1}, a bottom with radius \texttt{r2}, and
a height \texttt{h} on 3D window \texttt{w}. The disk is centered at
the point (\texttt{x}, \texttt{y}, \texttt{z}). The display list
element is returned. This procedure fails if the context attribute
\texttt{dim} is set to 2.

\bigskip\hrule\vspace{0.1cm}
\index{DrawDisk}
\noindent
{\bf DrawDisk(w, x, y, z, r1, r2, a1, a2, ...) : record } \hfill {\bf draw disk}

\noindent
\texttt{DrawDisk(W, x, y, z, r1, r2, a1, a2, {\dots})}\texttt{ }draws a
disk or partial disk centered at (\texttt{x}, \texttt{y}, \texttt{z})
on 3D window \texttt{w}. The inner circle has radius \texttt{r1} and
the outer circle has radius \texttt{r2}. The parameters \texttt{a1} and
\texttt{a2} are optional. If they are specified, a partial disk is
drawn with a starting angle \texttt{a1} and sweeping angle \texttt{a2}.
The display list element is returned.

\bigskip\hrule\vspace{0.1cm}
\index{DrawImage}
\noindent
{\bf DrawImage(w, x, y, s) : window } \hfill {\bf draw bitmapped figure}

\noindent
\texttt{DrawImage(w,x,y, s)} draws an image specified in string
\texttt{s} at location \texttt{x,y}.

\bigskip\hrule\vspace{0.1cm}
\index{DrawLine}
\noindent
{\bf DrawLine(w, x1, y1, z1 ...) : window [list] } \hfill {\bf draw line}

\noindent
\texttt{DrawLine(w,x1,y1,...,xn,yn)} draws lines between each adjacent
\texttt{x,y} pair of arguments. In 3D, \texttt{DrawLine()} takes from
2-4 coordinates per vertex and returns the list that represents the
lines on the display list for refresh purposes.

\bigskip\hrule\vspace{0.1cm}
\index{DrawPoint}
\noindent
{\bf DrawPoint(w, x1, y1, ...) : window [list] } \hfill {\bf draw point}

\noindent
\texttt{DrawPoint(w,x1,y1,...,xn,yn)} draws points. In 3D,
\texttt{DrawPoint()} takes from 2-4 coordinates per vertex and returns
the list that represents the points on the display list for refresh
purposes.

\bigskip\hrule\vspace{0.1cm}
\index{DrawPolygon}
\noindent
{\bf DrawPolygon(w, x1, y1, [z1,] ...) : window [list] } \hfill {\bf draw polygon}

\noindent
\texttt{DrawPolygon(w,x1,y1,...,xn,yn)} draws a polygon. In 3D,
\texttt{DrawPolygon()} takes from 2-4 coordinates per vertex and returns the
list that represents the polygon on the display list for refresh
purposes.

\bigskip\hrule\vspace{0.1cm}
\index{DrawRectangle}
\noindent
{\bf DrawRectangle(w, x1, y1, width1, height1 ...) : window } \hfill {\bf draw rectangle}

\noindent
\texttt{DrawRectangle(w,x1,y1,width1,height1,...)} draws rectangles.
Arguments \texttt{width} and \texttt{height} define the perceived size
of the rectangle; the actual rectangle drawn is \texttt{width+1} pixels
wide and \texttt{height+1} pixels high.

\bigskip\hrule\vspace{0.1cm}
\index{DrawSegment}
\noindent
{\bf DrawSegment(w, x1, y1, [z1,] ...) : window [list] } \hfill {\bf draw line segment}

\noindent
\texttt{DrawSegment(w,x1,y1,...,xn,yn)} draws lines between alternating
\texttt{x,y} pairs in the argument list. In 3D, \texttt{DrawSegment()}
takes from 2-4 coordinates per vertex and returns the list that
represents the segments on the display list for refresh purposes.

\bigskip\hrule\vspace{0.1cm}
\index{DrawSphere}
\noindent
{\bf DrawSphere(w, x, y, z, r, ...) : record } \hfill {\bf draw sphere}

\noindent
\texttt{DrawSphere(w, x, y, z, r,{\dots})} draws a sphere with radius
r centered at (x, y, z) on 3D window w. The display list element is
returned. This procedure fails if the context attribute \texttt{dim} is
set to 2.

\bigskip\hrule\vspace{0.1cm}
\index{DrawString}
\noindent
{\bf DrawString(w, x1, y1, s1, ...) : window } \hfill {\bf draw text}

\noindent
\texttt{DrawString(w,x,y,s)} draws text \texttt{s} at coordinates (x,
y). This function does not draw any background; only the
characters' actual pixels are drawn. It is possible to
use \texttt{"drawop=reverse"} with this
function to draw erasable text. \texttt{DrawString()} does not affect
the text cursor position. Newlines present in \texttt{s} cause
subsequent characters to be drawn starting at
(\texttt{x, current\_y + leading}), where \texttt{x} is the
\texttt{x} supplied to the function,
\texttt{current\_y} is the \texttt{y} coordinate the newline would have
been drawn on, and leading is the current leading associated with the
binding.

\bigskip\hrule\vspace{0.1cm}
\index{DrawTorus}
\noindent
{\bf DrawTorus(w, x, y, z, r1, r2, ...) : record } \hfill {\bf draw torus}

\noindent
\texttt{DrawTorus(w, x, y, z, r1, r2,{\dots})} draws a torus with
inner radius \texttt{r1}, outside radius \texttt{r2}, and centered at
(\texttt{x,y,z}) on 3D window \texttt{w}. The display list element is
returned. This procedure fails if the context attribute \texttt{dim} is
set to 2.

\bigskip\hrule\vspace{0.1cm}
\index{EraseArea}
\noindent
{\bf EraseArea(w, x:0, y:0, width:0, height:0. ...) : window } \hfill {\bf erase rectangular area}

\noindent
\texttt{EraseArea(w,x,y,width,height,...)} erases rectangular areas
within the window to the background color. If \texttt{width} is 0,
the region cleared extends from \texttt{x} to the right side of the
window. If \texttt{height} is 0, the region erased extends from
\texttt{y} to the bottom of the window. In 3D, \texttt{EraseArea(W)}
clears the contents of the entire window.

\bigskip\hrule\vspace{0.1cm}
\index{Event}
\noindent
{\bf Event(w, i:infinity) : string{\textbar}integer } \hfill {\bf  read event on window}

\noindent
\texttt{Event(w, i)} retrieves the next event available for window
\texttt{w}. If no events are available, \texttt{Event()} waits for
\texttt{i} milliseconds. Keystrokes are encoded as strings, while mouse
events are encoded as integers. The retrieval of an event is
accompanied by assignments to the keywords \texttt{\&x}, \texttt{\&y},
\texttt{\&row}, \texttt{\&col}, \texttt{\&interval},
\texttt{\&control}, \texttt{\&shift}, \texttt{\&meta}, and if 3D
attribute \texttt{{\textquotedblleft}pick=on{\textquotedblright}},
\texttt{\&pick}. \texttt{Event()} fails if the timeout expires before
an event occurs.

\bigskip\hrule\vspace{0.1cm}
\index{Fg}
\noindent
{\bf Fg(w, s) : string } \hfill {\bf foreground color}

\noindent
\texttt{Fg(w)} retrieves the current foreground color. \texttt{Fg(w,s)}
sets the foreground by name or value. \texttt{Fg()} fails if the
foreground cannot be set to the requested color. In 3D,
\texttt{Fg(w, s)} changes the material properties of subsequently drawn objects
to the material properties specified by \texttt{s}. The string \texttt{s}
must be one or more semi-colon separated material properties. A
material property is of the form 

\ \ \ \ \ \ \ \ [diffuse {\textbar} ambient {\textbar} specular
{\textbar} emission] \textit{color name} or
{\textquotedblleft}shininess n{\textquotedblright}, 0 {\textless}= n
{\textless}= 128.

If string \texttt{s} is omitted, the current values of the material
properties will be returned.

\bigskip\hrule\vspace{0.1cm}
\index{FillArc}
\noindent
{\bf FillArc(w, x, y, width, height, a1, a2, ...) : window } \hfill {\bf draw filled arc}

\noindent
\texttt{FillArc(w,x,y,width,height,a1,a2,...)} draws filled arcs,
ellipses, and/or circles. Coordinates are as in \texttt{DrawArc()}.

\bigskip\hrule\vspace{0.1cm}
\index{FillCircle}
\noindent
{\bf FillCircle(w, x, y, radius, a1, a2, ...) : window } \hfill {\bf draw filled circle}

\noindent
\texttt{FillCircle(w,x,y, radius,a1,a2,...)} draws filled circles.
\ Coordinates are as in \texttt{DrawCircle()}.

\bigskip\hrule\vspace{0.1cm}
\index{FillPolygon}
\noindent
{\bf FillPolygon(w, x1, y1, [z1,] ...) : window } \hfill {\bf draw filled polygon}

\noindent
\texttt{FillPolygon(w,x1,y1,...,xn,yn)} draws a filled polygon. The
beginning and ending points are connected if they are not the same. In
3D\texttt{, FillPolygon()} takes from 2-4 coordinates per vertex and
returns the list that represents the polygon on the display list for
refresh purposes. 

\bigskip\hrule\vspace{0.1cm}
\index{FillRectangle}
\noindent
{\bf FillRectangle(w, x:0, y:0, width:0, height:0, ...) : window } \hfill {\bf draw filled rectangle}

\noindent
\texttt{FillRectangle(w,x,y,width,height,...)} draws filled rectangles.

\bigskip\hrule\vspace{0.1cm}
\index{Font}
\noindent
{\bf Font(w, s) : string } \hfill {\bf font}

\noindent
\texttt{Font(w)} produces the name of the current font.
\texttt{Font(w,s)} sets the window context's font to
\texttt{s} and produces its name or fails if the font name is invalid.
\ The valid font names are largely system-dependent but follow the
format \texttt{family[,styles],size}, where styles optionally add bold
or italic or both. Four font names are portable: \texttt{serif} (Times
or similar), \texttt{sans} (Helvetica or similar), \texttt{mono} (a
mono spaced sans serif font) and \texttt{typewriter} (Courier or
similar). \texttt{Font()} fails if the requested font name does not
exist.

\bigskip\hrule\vspace{0.1cm}
\index{FreeColor}
\noindent
{\bf FreeColor(w, s, ...) : window } \hfill {\bf release colors}

\noindent
\texttt{FreeColor(w,s1,...,sn)} allows the window system to re-use the
corresponding color map entries. Whether this call has an effect is
dependent upon the particular implementation. If a freed color is
still in use at the time it is freed, unpredictable results will occur.

\bigskip\hrule\vspace{0.1cm}
\index{GotoRC}
\noindent
{\bf GotoRC(w, row:1, col:1) : window } \hfill {\bf go to row,column}

\noindent
\texttt{GotoRC(w,row,col)} moves the text cursor to a particular row and
column, given in numbers of characters; the upper-left corner is
coordinate (1,1). The column calculation used by \texttt{GotoRC()}
assigns to each column the pixel width of the widest character in the
current font. If the current font is of fixed width, this yields the
usual interpretation.

\bigskip\hrule\vspace{0.1cm}
\index{GotoXY}
\noindent
{\bf GotoXY(w, x:0, y:0) : window } \hfill {\bf go to pixel}

\noindent
\texttt{GotoXY(w,x,y)} moves the text cursor to a specific cursor
location in pixels.

\bigskip\hrule\vspace{0.1cm}
\index{IdentityMatrix}
\noindent
{\bf IdentityMatrix(w) : record } \hfill {\bf load the identity matrix}

\noindent
\texttt{IdentityMatrix(w)} changes the current matrix to the identity
matrix on 3D window \texttt{w}. The display list element is returned. 

\bigskip\hrule\vspace{0.1cm}
\index{Lower}
\noindent
{\bf Lower(w) : window } \hfill {\bf lower window}

\noindent
\texttt{Lower(w)} moves window \texttt{w} to the bottom of the window
stack.

\bigskip\hrule\vspace{0.1cm}
\index{MatrixMode}
\noindent
{\bf MatrixMode(w, s) : record } \hfill {\bf set matrix mode}

\noindent
\texttt{MatrixMode(w, s)} changes the matrix mode to \texttt{s} on 3D
window \texttt{w}. The string \texttt{s} must be either
\texttt{{\textquotedblleft}projection{\textquotedblright}} or
\texttt{{\textquotedblleft}modelview{\textquotedblright}}; otherwise
this procedure fails. The display list element is returned.

\bigskip\hrule\vspace{0.1cm}
\index{MultMatrix}
\noindent
{\bf MultMatrix(w, L) : record } \hfill {\bf multiply transformation matrix}

\noindent
\texttt{MultMatrix(w, L)} multiplies the current transformation matrix
used in 3D window w by the 4x4 matrix represented as a list of 16
values L.

\bigskip\hrule\vspace{0.1cm}
\index{NewColor}
\noindent
{\bf NewColor(w, s) : integer } \hfill {\bf allocate mutable color}

\noindent
\texttt{NewColor(w,s)} allocates an entry in the color map and returns a
small negative integer for this entry, usable in calls to routines that
take a color specification, such as \texttt{Fg()}. If \texttt{s} is
specified, the entry is initialized to the given color.
\texttt{NewColor()} fails if it cannot allocate an entry.

\bigskip\hrule\vspace{0.1cm}
\index{PaletteChars}
\noindent
{\bf PaletteChars(w, s) : string } \hfill {\bf pallete characters}

\noindent
\texttt{PaletteChars(w,s)} produces a string containing each of the
letters in palette \texttt{s}. The palletes
{\textquotedblleft}c1{\textquotedblright} through
{\textquotedblleft}c6{\textquotedblright} define different color
encodings of images represented as string data; see [Griswold98].

\bigskip\hrule\vspace{0.1cm}
\index{PaletteColor}
\noindent
{\bf PaletteColor(w, p, s) : string } \hfill {\bf pallete color}

\noindent
\texttt{PaletteColor(w,s)} returns the color of key \texttt{s} in
palette \texttt{p} in
\texttt{{\textquotedblleft}}\texttt{\textit{r}}\texttt{,}\texttt{\textit{g}}\texttt{,}\texttt{\textit{b}}\texttt{{\textquotedblright}}
format.

\bigskip\hrule\vspace{0.1cm}
\index{PaletteKey}
\noindent
{\bf PaletteKey(w, p, s) : integer } \hfill {\bf pallete key}

\noindent
\texttt{PaletteKey(w,s)} returns the key of closest color to \texttt{s}
in palette \texttt{p}.

\bigskip\hrule\vspace{0.1cm}
\index{Pattern}
\noindent
{\bf Pattern(w, s) : w } \hfill {\bf define stipple pattern}

\noindent
\texttt{Pattern(w,s)} selects stipple pattern \texttt{s} for use during
draw and fill operations. \texttt{s} may be either the name of a
system-dependent pattern or a literal of the form
\textit{width},\textit{bits}. Patterns are only used when the
\texttt{fillstyle} attribute is \texttt{stippled} or
\texttt{opaquestippled}. \texttt{Pattern()} fails if a named pattern
is not defined. An error occurs if \texttt{Pattern()} is given a
malformed literal.

\bigskip\hrule\vspace{0.1cm}
\index{Pending}
\noindent
{\bf Pending(w, x, ...) : L } \hfill {\bf produce event queue}

\noindent
\texttt{Pending(w)} produces the list of events waiting to be read from
window \texttt{w}. If no events are available, the list is empty (its
size is 0). \texttt{Pending(w,x1,...,xn)} adds \texttt{x1} through
\texttt{xn} to the end of \texttt{w}'s pending list in
guaranteed consecutive order.

\bigskip\hrule\vspace{0.1cm}
\index{Pixel}
\noindent
{\bf Pixel(w, x:0, y:0, width:0, height:0) : i1...in } \hfill {\bf generate window pixels}

\noindent
\texttt{Pixel(w,x,y,width,height)} generates pixel contents from a
rectangular area within window \texttt{w}. \texttt{width * height}
results are generated starting from the upper-left corner and advancing
down to the bottom of each column before the next one is visited.
\ Pixels are returned in integer values; ordinary colors are encoded
nonnegative integers, while mutable colors are negative integers that
were previously returned by \texttt{NewColor()}. Ordinary colors are
encoded with the most significant eight bits all zero, the next eight
bits contain the red component, the next eight bits the green
component, and the least significant eight bits contain the blue
component. \texttt{Pixel()} fails if part of the requested rectangle
extends beyond the canvas.

\bigskip\hrule\vspace{0.1cm}
\index{PopMatrix}
\noindent
{\bf PopMatrix(w) : record } \hfill {\bf pop the matrix stack}

\noindent
\texttt{PopMatrix(w)} pops the top matrix from either the projection or
modelview matrix stack on 3D window \texttt{w}, depending on the
current matrix mode\texttt{.} This procedure fails if there is only one
matrix on the matrix stack. The display list element is returned. 

\bigskip\hrule\vspace{0.1cm}
\index{PushMatrix}
\noindent
{\bf PushMatrix(w) : record } \hfill {\bf push the matrix stack}

\noindent
\texttt{PushMatrix(w)} pushes a copy of the current matrix onto the
matrix stack on 3D window \texttt{w}. The current matrix mode
determines on what stack is pushed. This procedure fails if the stack
is full. The \texttt{{\textquotedblleft}projection{\textquotedblright}}
stack is of size two; the
\texttt{{\textquotedblleft}modelview{\textquotedblright}} stack is of
size thirty two. The display list element is returned.

\bigskip\hrule\vspace{0.1cm}
\index{PushRotate}
\noindent
{\bf PushRotate(w, a, x, y, z) : record } \hfill {\bf push and rotate}

\noindent
\texttt{PushRotate()} is equivalent to \texttt{PushMatrix()} followed by
\texttt{Rotate()}.

\bigskip\hrule\vspace{0.1cm}
\index{PushScale}
\noindent
{\bf PushScale(w, x, y, z) : record } \hfill {\bf push and scale}

\noindent
\texttt{PushScale()} is equivalent to \texttt{PushMatrix()} followed
by \texttt{Scale()}.

\bigskip\hrule\vspace{0.1cm}
\index{PushTranslate}
\noindent
{\bf PushTranslate(w, x, y, z) : record } \hfill {\bf push and translate}

\noindent
\texttt{PushTranslate()} is equivalent to \texttt{PushMatrix()} followed
by \texttt{Translate()}.

\bigskip\hrule\vspace{0.1cm}
\index{QueryPointer}
\noindent
{\bf QueryPointer(w) : x, y } \hfill {\bf produce mouse position}

\noindent
\texttt{QueryPointer(w)} generates the \texttt{x} and \texttt{y}
coordinates of the mouse relative to window \texttt{w}. If \texttt{w}
is omitted, \texttt{QueryPointer()} generates the coordinates relative
to the upper-left corner of the entire screen.

\bigskip\hrule\vspace{0.1cm}
\index{Raise}
\noindent
{\bf Raise(w) : window } \hfill {\bf raise window}

\noindent
\texttt{Raise(w)} moves window \texttt{w} to the top of the window
stack, making it entirely visible and possibly obscuring other windows.

\bigskip\hrule\vspace{0.1cm}
\index{ReadImage}
\noindent
{\bf ReadImage(w, s, x:0, y:0) : integer } \hfill {\bf load image file}

\noindent
\texttt{ReadImage(w,s,x,y)} loads an image from the file named by s into
window (or texture) w at offset \texttt{x,y}. \texttt{\ x} and \texttt{y} are
optional and default to 0,0. GIF, JPG, PNG, and BMP formats are supported,
along with platform-specific formats. If \texttt{ReadImage()} reads the
image into \texttt{w}, it returns either an integer 0 indicating no
errors occurred or a nonzero integer indicating that one or more colors
required by the image could not be obtained from the window system.
\ \texttt{ReadImage()} fails if file \texttt{s} cannot be opened for
reading or is an invalid file format.

\bigskip\hrule\vspace{0.1cm}
\index{Refresh}
\noindent
{\bf Refresh(w) : window } \hfill {\bf redraw the window}

\noindent
\texttt{Refresh(w) }redraws the contents of window \texttt{w}. It is
used mainly when objects have been moved in a 3D scene. The window
\texttt{w} is returned. 

\bigskip\hrule\vspace{0.1cm}
\index{Rotate}
\noindent
{\bf Rotate(w, a, x, y, z) : record } \hfill {\bf rotate objects}

\noindent
\texttt{Rotate(w, a, x, y, z,{\dots})} rotates subsequent objects drawn
on 3D window \texttt{w} by angle \texttt{a} degrees, in the direction
(\texttt{x,y,z}). The display list element is returned.

\bigskip\hrule\vspace{0.1cm}
\index{Scale}
\noindent
{\bf Scale(w, x, y, z) : record \hfill\ scale objects}

\noindent
\texttt{Scale(w, x, y, z,{\dots})} scales subsequent objects drawn on 3D
window \texttt{w} according to the given coordinates. The display list
element is returned.

\bigskip\hrule\vspace{0.1cm}
\index{Texcoord}
\noindent
{\bf Texcoord(w, x, y, ...) : list } \hfill {\bf define texture coordinates}

\noindent
\texttt{Texcoord(W, x\textsubscript{1},y\textsubscript{1},}
\texttt{{\dots}, x\textsubscript{n}, y\textsubscript{n})}
sets the texture coordinates to
\texttt{x\textsubscript{1}, y\textsubscript{1}, {\dots},}
\texttt{x\textsubscript{n}, y\textsubscript{n}} in
3D window w. Each x, y, pair forms one texture coordinate.
\texttt{Texcoord(W, L)} sets the texture coordinates to those specified
in the list \texttt{L}. \texttt{Texcoord(W, s) }sets the texture
coordinates to those specified by \texttt{s}. The string \texttt{s}
must be \texttt{{\textquotedblleft}auto{\textquotedblright}} otherwise
the procedure will fail. In all cases the display list element is
returned.

\bigskip\hrule\vspace{0.1cm}
\index{TextWidth}
\noindent
{\bf TextWidth(w, s) : integer } \hfill {\bf pixel width of text}

\noindent
\texttt{TextWidth(w,s)} computes the pixel width of string \texttt{s} in
the font currently defined for window \texttt{w}.

\bigskip\hrule\vspace{0.1cm}
\index{Texture}
\noindent
{\bf Texture(w, s) : record } \hfill {\bf apply texture}

\noindent
\texttt{Texture(w, s) }specifies a texture image that is applied to
subsequent objects drawn on 3D window \texttt{w}. The string \texttt{s}
specifies the texture image as a filename, a string of the form
\texttt{width,pallet,data} or \texttt{width,\#,data}, where pallet is a
pallet from the Unicon 2D graphics facilities and data is the
hexadecimal representation of an image. \texttt{Texture(w1, w2)}
specifies that the contents of 2D or 3D window \texttt{w2} be used as
a texture image that is applied to subsequent objects on the window
\texttt{w1}. The display list element is returned.

\bigskip\hrule\vspace{0.1cm}
\index{Translate}
\noindent
{\bf Translate(w, x, y, z, ...) : record } \hfill {\bf translate object positions}

\noindent
\texttt{Translate(w, x, y, z,{\dots})} moves objects drawn subsequently
on 3D window w in the direction (\texttt{x,y,z}). The display list
element is returned.

\bigskip\hrule\vspace{0.1cm}
\index{Uncouple}
\noindent
{\bf Uncouple(w) : window } \hfill {\bf release binding}

\noindent
\texttt{Uncouple(w)} releases the binding associated with file
\texttt{w}. \texttt{Uncouple()} closes the window only if all other
bindings associated with that window are also closed.

\bigskip\hrule\vspace{0.1cm}
\index{WAttrib}
\noindent
{\bf WAttrib(w, s1, ...) : x, ... } \hfill {\bf generate or set attributes}

\noindent
\texttt{WAttrib(w, s1, ...)} retrieves and/or sets window and context
attributes. If called with exactly one attribute, integers are produced
for integer-value attributes; all other values are represented by
strings. If called with more than one attribute argument,
\texttt{WAttrib()} produces one string result per argument, prefixing
each value by the attribute name and an equals sign (=). If
\texttt{xi} is a window, subsequent attributes apply to \texttt{xi}.
\ \texttt{WAttrib()} fails if an attempt is made to set the attribute
\texttt{font}, \texttt{fg}, \texttt{bg}, or \texttt{pattern} to a value
that is not supported. A run-time error occurs for an invalid attribute
name or invalid value.

\bigskip\hrule\vspace{0.1cm}
\index{WDefault}
\noindent
{\bf WDefault(w, program, option) : string } \hfill {\bf query user preference}

\noindent
\texttt{WDefault(w,program,option)} returns the value of option for
program as registered with the X resource manager. In typical use this
supplies the program with a default value for window attribute option
from a program.option entry in an .XDefaults file.
\ \texttt{WDefault()} fails if no user preference for the specified
option is available.

\bigskip\hrule\vspace{0.1cm}
\index{WFlush}
\noindent
{\bf WFlush(w) : window } \hfill {\bf flush window output}

\noindent
\texttt{WFlush(w)} flushes window output on window systems that buffer
text and graphics output. Window output is automatically flushed
whenever the program blocks on window input. When this behavior is
not adequate, a call to \texttt{WFlush()} sends all window output
immediately, but does not wait for all commands to be received and
acted upon. \texttt{WFlush()} is a no-op on window systems that do not
buffer output.

\bigskip\hrule\vspace{0.1cm}
\index{WindowContents}
\noindent
{\bf WindowContents(w) : list } \hfill {\bf window display list}

\noindent
\texttt{WindowContents(w)} returns a list of display elements, which are
records or lists. Each element has a function name followed by the
parameters of the function, or an attribute followed by its value.

\bigskip\hrule\vspace{0.1cm}
\index{WriteImage}
\noindent
{\bf WriteImage(w, s, x:0, y:0, width:0, height:0) : window } \hfill {\bf save image file}

\noindent
\texttt{WriteImage(w,s,x,y,width,height)} saves an image of dimensions
width, height from window w at offset \texttt{x,y} to a file named
\texttt{s}. The default is to write the entire window. The file
is written according to the filename extension, in either GIF, JPG,
BMP, PNG, or a platform specific format such as XBM or XPM.
\ \texttt{WriteImage()} fails if \texttt{s} cannot be opened for
writing.

\bigskip\hrule\vspace{0.1cm}
\index{WSection}
\noindent
{\bf WSection(w, s) : record} \hfill {\bf define window section}

\noindent
\texttt{WSection(w,s)} starts a new window section named \texttt{s} on
3D window \texttt{w} and returns a display list section marker record.
During window refreshes if the section marker's
\texttt{skip} field is 1, the section is skipped. The section name
\texttt{s} is produced by \texttt{\&pick} if a primitive in the block
is clicked on while attribute
\texttt{{\textquotedblleft}pick=on{\textquotedblright}}.
\texttt{WSection(w)} marks the end of a preceding section.
\texttt{WSection()} blocks may be nested.

\bigskip\hrule\vspace{0.1cm}
\index{WSync}
\noindent
{\bf WSync(w, s) : w} \hfill {\bf synchronize with window system server}

\noindent
\texttt{WSync(w,s)} synchronizes the program with the server attached to
window \texttt{w} on those window systems that employ a client-server
model. Output to the window is flushed, and \texttt{WSync()} waits
for a reply from the server indicating all output has been processed.
If \texttt{s} is \texttt{"yes"}, all
events pending on \texttt{w} are discarded. \texttt{WSync()} is a no-op
on window systems that do not use a client-server model.

\subsection*{Pattern functions}

\bigskip\hrule\vspace{0.1cm}
\index{Abort}
\noindent{\bf Abort()} \hfill{\bf pattern cancel}\\

\noindent
\texttt{Abort()} causes an immediate failure of the entire pattern match.\\


\bigskip\hrule\vspace{0.1cm}
\index{Any}
\noindent{\bf Any(c)} \hfill{\bf match any}\\

\noindent
\texttt{Any(c)} matches any single character contained in c appearing
in the subject string.\\

\bigskip\hrule\vspace{0.1cm}
\index{Arb}
\noindent{\bf Arb()} \hfill{\bf arbitrary pattern}\\

\noindent
\texttt{Arb()} matches zero or more characters in the subject string.\\


\bigskip\hrule\vspace{0.1cm}
\index{Arbno}
\noindent{\bf Arbno(p)} \hfill{\bf repetitive arbitrary pattern}\\

\noindent
\texttt{Arbno(p)} matches repetitive sequences of p in the subject string.\\


\bigskip\hrule\vspace{0.1cm}
\index{Bal}
\noindent{\bf Bal()} \hfill{\bf balanced parentheses}\\

\noindent
\texttt{Bal()} matches the shortest non-null string which parentheses
are balanced in the subject string.\\


\bigskip\hrule\vspace{0.1cm}
\index{Break}
\noindent{\bf Break(c)} \hfill{\bf pattern break}\\

\noindent
\texttt{Break(c)} matches any characters in the subject string up to
but not including any of the characters in cset c.\\


\bigskip\hrule\vspace{0.1cm}
\index{Breakx}
\noindent{\bf Breakx(c)} \hfill{\bf extended pattern break}\\

\noindent
\texttt{Breakx(c)} matches any characters up to any of the subject
characters in c, and 
will search beyond the break position for a possible larger match.\\


\bigskip\hrule\vspace{0.1cm}
\index{Fail}
\noindent{\bf Fail()} \hfill{\bf pattern back}\\

\noindent
\texttt{Fail()} signals a failure in the current portion of the
pattern match and sends 
an instruction to go back and try a different alternative.\\


\bigskip\hrule\vspace{0.1cm}
\index{Fence}
\noindent{\bf Fence()} \hfill{\bf pattern fence}\\

\noindent
\texttt{Fence()} signals a failure in the current portion of the pattern match
if it is trying to backing up to try other alternatives.\\


\bigskip\hrule\vspace{0.1cm}
\index{Len}
\noindent{\bf Len(i)} \hfill{\bf match fixed-length string}\\

\noindent
\texttt{Len(i)} matches a string of a length of \texttt{i} characters
in the subject string.
It fails if \texttt{i} is greater than the number of characters remaining
in the subject string.\\


\bigskip\hrule\vspace{0.1cm}
\index{NotAny}
\noindent{\bf NotAny(c)} \hfill{\bf match anything but}\\

\noindent
\texttt{NotAny(c)} matches any single character not contained in
character set \texttt{c} appearing in the subject string.\\


\bigskip\hrule\vspace{0.1cm}
\index{Nspan}
\noindent{\bf Nspan(c)} \hfill{\bf optional pattern span}\\

\noindent
\texttt{Nspan()} matches the longest available sequence of zero or
more characters from the subject string that are contained in \texttt{c}.  \\


\bigskip\hrule\vspace{0.1cm}
\index{Pos}
\noindent{\bf Pos(i)} \hfill{\bf cursor position}\\

\noindent
\texttt{Pos(i)} sets the cursor or index position of the subject string to
the position \texttt{i} according the Unicon index system shown below:
\begin{verbatim}
                   -6  -5  -4  -3  -2  -1  0
                   | U | n | i | c | o | n |
                   1   2   3   4   5   6   7
\end{verbatim}


\bigskip\hrule\vspace{0.1cm}
\index{Rem}
\noindent{\bf Rem()} \hfill{\bf remainder pattern}\\

\noindent
\texttt{Rem()} matches the remainder of the subject string.\\


\bigskip\hrule\vspace{0.1cm}
\index{Span}
\noindent{\bf Span(c)} \hfill{\bf pattern span}\\

\noindent
\texttt{Span(c)} matches one or more characters from the subject string that
are contained in \texttt{c}.  It must match at least one character.\\


\bigskip\hrule\vspace{0.1cm}
\index{Succeed}
\noindent{\bf Succeed()} \hfill{\bf pattern succeeds}\\

\noindent
\texttt{Succeed()} produces a pattern that, when matched, will cause
the surrounding pattern match to succeed without further scrutiny.\\


\bigskip\hrule\vspace{0.1cm}
\index{Tab}
\noindent{\bf Tab(n)} \hfill{\bf pattern tab}\\

\noindent
\texttt{Tab(n)} matches any characters from the current cursor or
index position up to
the specified position of the subject string.  \texttt{Tab()} uses the
Unicon index system shown in \texttt{Pos()} and position \texttt{n} must
be to the right of the current position.\\


\bigskip\hrule\vspace{0.1cm}
\index{Rpos}
\noindent{\bf Rpos(n)} \hfill{\bf reverse cursor position}\\

\noindent
\texttt{Rpos(n)} sets the cursor or index position of the subject string to
the position \texttt{n} back from the end of the string, equivalent to
using Unicon's negative indices in \texttt{Pos()}.
\begin{verbatim}
                   6   5   4   3   2   1   0
                   | S | N | O | B | O | L |
\end{verbatim}


\bigskip\hrule\vspace{0.1cm}
\index{Rtab}
\noindent{\bf Rtab(i)} \hfill{\bf pattern reverse tab}\\

\noindent
\texttt{Rtab(i)} matches any characters from the current cursor or
index position up to 
the specified position (back from the end) of the subject string,
equivalent to using a negative index in \texttt{Tab()}.
Position \texttt{n} must be to the right of the current position.\\


\section{Preprocessor}

Unicon features a simple \index{preprocessor}preprocessor that supports file
inclusion and symbolic constants. It is a subset of the capabilities found in
the C preprocessor, and is used primarily to support platform-specific code
sections and large collections of symbols.

\subsection*{Preprocessor commands}

Preprocessor directives are lines beginning with a dollar sign. The
available preprocessor commands are:

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \$define symbol text } \hfill {\bf symbolic substitution}

\noindent
\index{define symbols}All subsequent occurrences of \textit{symbol} are
replaced by the \textit{text} within the current file. Note that
\$define does not support arguments, unlike C.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \$include filename } \hfill {\bf insert source file}

\noindent
\index{include}The named file is inserted into the compilation in place
of the \$include line.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \$ifdef symbol } \hfill {\bf conditional compilation}

\noindent
\index{ifdef symbol}{\textbf \$ifndef \textit{symbol} } \hfill {\bf conditional compilation}
\linebreak
{\textbf \$else } \hfill {\bf conditional alternative}
\linebreak
{\textbf \$endif } \hfill {\bf end of conditional code}

The subsequent lines of code, up to an \$else or \$endif, are discarded
unless \textit{symbol} is defined by some \$define directive. \$ifndef
reverses this logic.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \$error text } \hfill {\bf compile error}

\noindent
\index{compile}The \index{compiler}compiler will emit an error with the
supplied text as a message.


\bigskip\hrule\vspace{0.1cm}
\noindent
{\textbf \$line \textit{number} [\textit{filename}] } \hfill {\bf source code line}
\index{source code \$line}
{\textbf \#line \textit{number} [\textit{filename}] } \hfill {\bf source code line}

\noindent
The subsequent lines of code are treated by the compiler as commencing
from line \textit{number} in the file \textit{filename} or the current
file if no filename is given.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf \$undef symbol } \hfill {\bf remove symbol definition}

\noindent
\index{undef}Subsequent occurrences of \textit{symbol} are no longer
replaced by any substitute text.

\bigskip\hrule\vspace{0.1cm}
\noindent
{\bf EBCDIC transliterations } \hfill {\bf alternative bracket characters}

\noindent
These character combinations were introduced for legacy keyboards that
were missing certain bracket characters.

\iconcode{
{\textbf \$( for \{ } \\
{\textbf \$) for \} } \\
{\textbf \${\textless}\ for $[$ } \\
{\textbf \${\textgreater} for $]$ }
}%iconcode

These character combinations are substitutes for curly and square
brackets on keyboards that do not have these characters.

\subsection*{Predefined symbols}

\index{predefined symbols}Predefined symbols are provided for each
platform and each feature that is optionally compiled in on some
platforms. These symbols include:

{\bfseries Preprocessor Symbol\ \ \ \ Feature}

\_V9\ \ \ \ \ \ \ \ \ \ Version 9\\
\_CMS\ \ \ \ \ \ \ \ \ \ CMS\\
\_MSDOS\_386\ \ \ \ \ \ MS-DOS/386\\
\_MS\_WINDOWS\_NT\ \ \ \ MS Windows NT\\
\_MSDOS\ \ \ \ \ \ \ \ MS-DOS\\
\_MVS\ \ \ \ \ \ \ \ \ \ MVS\\
\_OS2\ \ \ \ \ \ \ \ \ \ OS/2\\
\_PORT\ \ \ \ \ \ \ \ PORT\\
\_UNIX\ \ \ \ \ \ \ \ \ \ UNIX\\
\_POSIX\ \ \ \ \ \ \ \ POSIX\\
\_DBM\ \ \ \ \ \ \ \ \ \ \index{DBM}DBM\\
\_VMS\ \ \ \ \ \ \ \ \ \ VMS\\
\_ASCII\ \ \ \ \ \ \ \ \index{ASCII}ASCII\\
\_EBCDIC\ \ \ \ \ \ \ \ \index{EBCDIC}EBCDIC\\
\_CO\_EXPRESSIONS\ \ \ \ co-expressions\\
\_CONSOLE\_WINDOW\ \ \ \ console window\\
\_DYNAMIC\_LOADING\ \ \ \ dynamic loading\\
\_EVENT\_MONITOR\ \ \ \ event monitoring\\
\_EXTERNAL\_FUNCTIONS\ \ external functions\\
\_KEYBOARD\_FUNCTIONS\ \ \index{keyboard}keyboard functions\\
\_LARGE\_INTEGERS\ \ \ \ large integers\\
\_MULTITASKING\ \ \ \ \ \ multiple programs\\
\_PIPES\ \ \ \ \ \ \ \ pipes\\
\_RECORD\_IO\ \ \ \ \ \ record I/O\\
\_SYSTEM\_FUNCTION\ \ \ \ system function\\
\_MESSAGING\ \ \ \ \ \ messaging\\
\_GRAPHICS\ \ \ \ \ \ \ \ graphics\\
\_X\_WINDOW\_SYSTEM\ \ \ \ X Windows\\
\_MS\_WINDOWS\ \ \ \ \ \ MS Windows\\
\_WIN32\ \ \ \ \ \ \ \ \ \ \ Win32\\
\_PRESENTATION\_MGR\ \ \ \ Presentation Manager\\
\_DOS\_FUNCTIONS\ \ \ \ \ \ MS-DOS extensions\\
\_DEVMODE\ \ \ \ \ \ \ \ developer mode

\section{Execution Errors}

There are two kinds of errors that can occur during the execution of an
Icon program: runtime errors and system errors. Runtime errors occur
when a semantic or logic error in a program results in a computation
that cannot perform as instructed. System errors occur when an
operating system call \index{fail!system call}fails to perform a
required service.

\subsection*{Runtime errors}

By default, a \index{runtime error}runtime error causes program
execution to abort. Runtime errors are reported by name as well as by
number. They are accompanied by an error traceback that shows the
procedure call stack and value that caused the error, if there is one.
The errors are listed below to illustrate the kinds of situations that
can cause execution to terminate.

The keyword \texttt{\&error} turns runtime errors into
expression failure. When an expression fails due to a converted runtime
error, the keywords \texttt{\&errornumber}, \texttt{\&errortext}, and
\texttt{\&errorvalue} provide information about the nature of the
error. When a system function fails, keyword \texttt{\&errno} and
\texttt{\&errortext} are set to indicate the nature of the
system call failure; the numbering systems of \texttt{\&errornumber}
and \texttt{\&errno} are unrelated; \texttt{\&errno} numbers are
platform dependent.

101 \ \ \ \ \ \ \ integer expected or out of range\\
102 \ \ \ \ \ \ \ numeric expected\\
103 \ \ \ \ \ \ \ string expected\\
104 \ \ \ \ \ \ \ cset expected\\
105 \ \ \ \ \ \ \ file expected\\
106 \ \ \ \ \ \ \ procedure or integer expected\\
107 \ \ \ \ \ \ \ record expected\\
108 \ \ \ \ \ \ \ list expected\\
109 \ \ \ \ \ \ \ string or file expected\\
110 \ \ \ \ \ \ \ string or list expected\\
111 \ \ \ \ \ \ \ variable expected\\
112 \ \ \ \ \ \ \ invalid type to size operation\\
113 \ \ \ \ \ \ \ invalid type to random operation\\
114 \ \ \ \ \ \ \ invalid type to subscript operation\\
115 \ \ \ \ \ \ \ structure expected\\
116 \ \ \ \ \ \ \ invalid type to element generator\\
117 \ \ \ \ \ \ \ missing main procedure\\
118 \ \ \ \ \ \ \ co-expression expected\\
119 \ \ \ \ \ \ \ set expected\\
120 \ \ \ \ \ \ \ two csets, two sets, or two tables expected\\
121 \ \ \ \ \ \ \ function not supported\\
122 \ \ \ \ \ \ \ set or table expected\\
123 \ \ \ \ \ \ \ invalid type\\
124 \ \ \ \ \ \ \ table expected\\
125 \ \ \ \ \ \ \ list, record, or set expected\\
126 \ \ \ \ \ \ \ list or record expected\\
127 \ \ \ \ \ \ \ pattern expected\\
128 \ \ \ \ \ \ \ unevaluated variable or function call expected\\
129 \ \ \ \ \ \ \ unable to convert unevaluated variable to pattern\\
130 \ \ \ \ \ \ \ incorrect number of arguments\\
131 \ \ \ \ \ \ \ string is not a class name\\
140 \ \ \ \ \ \ \ window expected\\
141 \ \ \ \ \ \ \ program terminated by window manager\\
142 \ \ \ \ \ \ \ attempt to read/write on closed window\\
143 \ \ \ \ \ \ \ malformed event queue\\
144 \ \ \ \ \ \ \ window system error\\
145 \ \ \ \ \ \ \ bad window attribute\\
146 \ \ \ \ \ \ \ incorrect number of arguments to drawing
function\\
147 \ \ \ \ \ \ \ window attribute cannot be read or written as requested\\
148 \ \ \ \ \ \ \ graphics is not enabled in this virtual machine\\
150 \ \ \ \ \ \ \ drawing a 3D object while in 2D mode\\
151 \ \ \ \ \ \ \ pushed/popped too many matrices\\
152 \ \ \ \ \ \ \ modelview or projection expected\\
153 \ \ \ \ \ \ \ texture not in correct format\\
154 \ \ \ \ \ \ \ must have an even number of texture coordinates\\
155 \ \ \ \ \ \ \ 3D graphics is not enabled in this virtual machine\\
160 \ \ \ \ \ \ \ nonexistent variable name\\
161 \ \ \ \ \ \ \ cannot convert unevaluated variable to pattern\\
162 \ \ \ \ \ \ \ uninitialized pattern\\
163 \ \ \ \ \ \ \ object, method, or method parameter problem in
unevaluated expression\\
164 \ \ \ \ \ \ \ unsupported unevaluated expression\\
165 \ \ \ \ \ \ \ null pattern argument where name was expected\\
166 \ \ \ \ \ \ \ unable to produce pattern image, possible malformed pattern\\
%%----------------------------------------
%% These codes are not in unicon/src/runtime/data.r or are different
%% 160 \ \ \ \ \ \ \ cannot open file\\
%% 161 \ \ \ \ \ \ \ bad file attribute\\
%% 162 \ \ \ \ \ \ \ cannot open socket\\
%% 171 \ \ \ \ \ \ \ posix header file not included\\
%% 172 \ \ \ \ \ \ \ posix record overridden by global value\\
%% 173 \ \ \ \ \ \ \ directory opened for writing\\
%% 174 \ \ \ \ \ \ \ directory or database invalid as file\\
%% 175 \ \ \ \ \ \ \ invalid mode string\\
%% 176 \ \ \ \ \ \ \ invalid signal\\
%% 177 \ \ \ \ \ \ \ invalid operation to flock/fcntl\\
%% 178 \ \ \ \ \ \ \ invalid procedure type\\
%% 179 \ \ \ \ \ \ \ fdup of closed file\\
%% 180 \ \ \ \ \ \ \ low-level read or select mixed with buffered
%% read\\
%% 181 \ \ \ \ \ \ \ not a network connection\\
%% 182 \ \ \ \ \ \ \ not a UDP socket\\
%% 183 \ \ \ \ \ \ \ invalid protocol name\\
%% 184 \ \ \ \ \ \ \ invalid permission string for umask\\
170 \ \ \ \ \ \ \ string or integer expected\\
171 \ \ \ \ \ \ \ UDP socket expected\\
172 \ \ \ \ \ \ \ signal handler procedure must take one argument\\
173 \ \ \ \ \ \ \ cannot open directory for writing\\
174 \ \ \ \ \ \ \ invalid file operation\\
175 \ \ \ \ \ \ \ network connection expected\\
180 \ \ \ \ \ \ \ invalid mutex\\
181 \ \ \ \ \ \ \ invalid condition variable\\
182 \ \ \ \ \ \ \ illegal recursion in initial clause\\
183 \ \ \ \ \ \ \ concurrent threads are not enabled in
this virtual machine\\
184 \ \ \ \ \ \ \ structure cannot have more than one mutex at 
the same time\\
185 \ \ \ \ \ \ \ converting an active co-expression to a thread
is not yet supported\\
%%----------------------------------------
190 \ \ \ \ \ \ \ dbm database expected\\
191 \ \ \ \ \ \ \ cannot open dbm database\\
201 \ \ \ \ \ \ \ division by zero\\
202 \ \ \ \ \ \ \ remaindering by zero\\
203 \ \ \ \ \ \ \ integer overflow\\
204 \ \ \ \ \ \ \ real overflow, underflow, or division by zero\\
205 \ \ \ \ \ \ \ invalid value\\
206 \ \ \ \ \ \ \ negative first argument to real exponentiation\\
207 \ \ \ \ \ \ \ invalid field name\\
208 \ \ \ \ \ \ \ second and third arguments to map of unequal
length\\
209 \ \ \ \ \ \ \ invalid second argument to open\\
210 \ \ \ \ \ \ \ non-ascending arguments to detab/entab\\
211 \ \ \ \ \ \ \ by value equal to zero\\
212 \ \ \ \ \ \ \ attempt to read file not open for reading\\
213 \ \ \ \ \ \ \ attempt to write file not open for writing\\
214 \ \ \ \ \ \ \ input/output error\\
215 \ \ \ \ \ \ \ attempt to refresh \&main\\
216 \ \ \ \ \ \ \ external function not found\\
217 \ \ \ \ \ \ \ unsafe inter-program variable assignment\\
218 \ \ \ \ \ \ \ invalid file name\\
301 \ \ \ \ \ \ \ evaluation stack overflow\\
302 \ \ \ \ \ \ \ memory violation\\
303 \ \ \ \ \ \ \ inadequate space for evaluation stack\\
304 \ \ \ \ \ \ \ inadequate space in qualifier list\\
305 \ \ \ \ \ \ \ inadequate space for static allocation\\
306 \ \ \ \ \ \ \ inadequate space in string region\\
307 \ \ \ \ \ \ \ inadequate space in block region\\
308 \ \ \ \ \ \ \ system stack overflow in co-expression\\
309 \ \ \ \ \ \ \ pattern stack overflow\\
316 \ \ \ \ \ \ \ interpreter stack too large\\
318 \ \ \ \ \ \ \ co-expression stack too large\\
401 \ \ \ \ \ \ \ co-expressions not implemented\\
402 \ \ \ \ \ \ \ program not compiled with debugging option\\
500 \ \ \ \ \ \ \ program malfunction\\
600 \ \ \ \ \ \ \ vidget usage error\\
1040 \ \ \ \ \ \ \ socket error \\
1041 \ \ \ \ \ \ \ cannot initialize network library \\
1042 \ \ \ \ \ \ \ fdup of closed file \\
1043 \ \ \ \ \ \ \ invalid signal \\
1044 \ \ \ \ \ \ \ invalid operation to flock/fcntl\\
1045 \ \ \ \ \ \ \ invalid mode string\\
1046 \ \ \ \ \ \ \ invalid permission string for umask\\
1047 \ \ \ \ \ \ \ invalid protocol name\\
1048 \ \ \ \ \ \ \ low-level read or select mixed with buffered read\\
1049 \ \ \ \ \ \ \ nonexistent service or services database error\\
1050 \ \ \ \ \ \ \ command not found\\
1051 \ \ \ \ \ \ \ cannot create temporary file\\
1052 \ \ \ \ \ \ \ cannot create pipe\\
1053 \ \ \ \ \ \ \ empty pipe\\
1100 \ \ \ \ \ \ \ ODBC connection expected\\
1200 \ \ \ \ \ \ \ system error (see \&errno)\\
1201 \ \ \ \ \ \ \ malformed URL\\
1202 \ \ \ \ \ \ \ missing username in URL\\
1203 \ \ \ \ \ \ \ unknown scheme in URL\\
1204 \ \ \ \ \ \ \ cannot parse URL\\
1205 \ \ \ \ \ \ \ cannot connect\\
1206 \ \ \ \ \ \ \ unknown host\\
1207 \ \ \ \ \ \ \ invalid field in header\\
1208 \ \ \ \ \ \ \ messaging file expected\\
1209 \ \ \ \ \ \ \ cannot determine smtpserver\\
1210 \ \ \ \ \ \ \ cannot determine user return address\\
1211 \ \ \ \ \ \ \ invalid email address\\
1212 \ \ \ \ \ \ \ server error\\
1213 \ \ \ \ \ \ \ POP messaging file expected\\
1214 \ \ \ \ \ \ \ cannot find certificate store\\
1215 \ \ \ \ \ \ \ cannot verify peer's certificate\\
1300 \ \ \ \ \ \ \ SSL error\\
1301 \ \ \ \ \ \ \ SSL context error\\
1302 \ \ \ \ \ \ \ bad ssl attribute\\
1303 \ \ \ \ \ \ \ private key error\\
1304 \ \ \ \ \ \ \ certificate error\\
1305 \ \ \ \ \ \ \ certificate authority error\\
1306 \ \ \ \ \ \ \ cipher error\\
1307 \ \ \ \ \ \ \ private key and certificate mismatch\\
1308 \ \ \ \ \ \ \ unknown protocol\\

\subsection*{System errors}

If an error occurs during the execution of a \index{error!system}system
function, the program terminates. Unlike runtime errors, there is no way
to convert the error to a failure (and continue execution).

The complete set of \index{system error}system errors is by definition platform
specific. Error numbers above the value 1000 are used for system errors. Many of
the POSIX standard system errors are supported across platforms, and error
numbers between 1001 and 1040 are reserved for the system errors listed
below. Platforms may report other system error codes so long as they do not
conflict with existing runtime or system error codes.

1001 \ \ \ \ \ Operation not permitted\\
1002 \ \ \ \ \ No such file or directory\\
1003 \ \ \ \ \ No such process\\
1004 \ \ \ \ \ Interrupted system call\\
1005 \ \ \ \ \ I/O error\\
1006 \ \ \ \ \ No such device or address\\
1007 \ \ \ \ \ Arg list too long\\
1008 \ \ \ \ \ Exec format error\\
1009 \ \ \ \ \ Bad file number\\
1010 \ \ \ \ \ No child processes\\
1011 \ \ \ \ \ Try again\\
1012 \ \ \ \ \ Out of memory\\
1013 \ \ \ \ \ Permission denied\\
1014 \ \ \ \ \ Bad address\\
1016 \ \ \ \ \ Device or resource busy\\
1017 \ \ \ \ \ File exists\\
1018 \ \ \ \ \ Cross-device \index{link!file system}link\\
1019 \ \ \ \ \ No such device\\
1020 \ \ \ \ \ Not a directory\\
1021 \ \ \ \ \ Is a directory\\
1022 \ \ \ \ \ Invalid argument\\
1023 \ \ \ \ \ File table overflow\\
1024 \ \ \ \ \ Too many open files\\
1025 \ \ \ \ \ Not a typewriter\\
1027 \ \ \ \ \ File too large\\
1028 \ \ \ \ \ No space left on device\\
1029 \ \ \ \ \ Illegal seek\\
1030 \ \ \ \ \ Read-only file system\\
1031 \ \ \ \ \ Too many links\\
1032 \ \ \ \ \ Broken pipe\\
1033 \ \ \ \ \ Math argument out of domain of func\\
1034 \ \ \ \ \ Math result not representable\\
1035 \ \ \ \ \ Resource deadlock would occur\\
1036 \ \ \ \ \ File name too long\\
1037 \ \ \ \ \ No record locks available\\
1038 \ \ \ \ \ Function not implemented\\
1039 \ \ \ \ \ Directory not empty

%% Extra definitions from unicon/src/runtime/data.r
1040 \ \ \ \ \ socket error\\

\bigskip\hrule\vspace{0.1cm}

1041 \ \ \ \ \ cannot initialize network library\\
1042 \ \ \ \ \ fdup of closed file\\
1043 \ \ \ \ \ invalid signal\\
1044 \ \ \ \ \ invalid operation to flock/fcntl\\
1045 \ \ \ \ \ invalid mode string\\
1046 \ \ \ \ \ invalid permission string for umask\\
1047 \ \ \ \ \ invalid protocol name\\
1048 \ \ \ \ \ low-level read or select mixed with buffered read\\
1100 \ \ \ \ \ ODBC connection expected\\
1200 \ \ \ \ \ system error (see \&errno)\\
1201 \ \ \ \ \ malformed URL\\
1202 \ \ \ \ \ missing username in URL\\
1203 \ \ \ \ \ unknown scheme in URL\\
1204 \ \ \ \ \ cannot parse URL\\
1205 \ \ \ \ \ cannot connect\\
1206 \ \ \ \ \ unknown host\\
1207 \ \ \ \ \ invalid field in header\\
1208 \ \ \ \ \ messaging file expected\\
1209 \ \ \ \ \ cannot determine smtpserver
(set UNICON\_SMTPSERVER)\\
1210 \ \ \ \ \ cannot determine user return address
(set UNICON\_USERADDRESS)\\
1211 \ \ \ \ \ invalid email address\\
1212 \ \ \ \ \ server error\\
1213 \ \ \ \ \ POP messaging file expected\\

\newpage
\section{Syntax}
%definitions for the "Railroad" syntax diagrams
\newcommand{\sep}{0.5mm}%        Extra separation before and after nodes.
\newcommand{\rad}{3.5mm}%      The space allowed for a bend.
\newcommand{\guillemets}[1]{\guillemotleft#1\guillemotright}
% Styles are named systematically with a combination of
%     d down   u up    x forwards (to the right)   -x backwards (to the left)
% So d-xu is a loop going down, then backwards then up
%    uxd  goes up then forwards then down
%    ux   goes up then forwards
%    u-x  goes up then backwards
%    -xu  goes backwards then up
% etc.
%
% Styles that go up and then down again (or vice versa) have a parameter
% specifying how far up or down to go.
% Note that 2*\rad is added to the parameter to make space for the bends.
%
\tikzset{
  d-xu/.style= {to path={let \p{st}=(\tikztostart) in let \p{fn}= (\tikztotarget) in
      -| ++(\sep+\rad,-\rad) |- ++(-\rad,-#1-\rad)
      -| ++(\x{fn}-\x{st}-\rad-\sep-\sep,\rad) |- ++(\rad+\sep,#1+\rad)}},
  u-xd/.style= {to path={let \p{st}=(\tikztostart) in let \p{fn}= (\tikztotarget) in
      -| ++(\sep+\rad,\rad) |- ++(-\rad,#1+\rad)
      -| ++(\x{fn}-\x{st}-\rad-\sep-\sep,-\rad) |- ++(\rad+\sep,-#1-\rad)}},
  d-xd/.style= {to path={let \p{st}=(\tikztostart) in let \p{fn}= (\tikztotarget) in
      -| ++(\sep+\rad,-\rad) |- ++(-\rad, -\rad)
      -| ++(\x{fn}-\x{st}-\rad-\sep-\sep,-\rad) |- ++(\rad+\sep,-\rad)}},
  uxd/.style= {to path={let \p{st}=(\tikztostart) in let \p{fn}=(\tikztotarget) in
      -| ++(\sep+\rad,\rad) |- ++(\rad,#1+\rad)
      -| ++(\x{fn}-\x{st}-3*\rad-\sep-\sep,-\rad) |- ++(\rad+\sep,-#1-\rad)}},
  dxu/.style= {to path={let \p{st}=(\tikztostart) in let \p{fn}= (\tikztotarget) in
      -| ++(\sep+\rad,-\rad) |- ++(\rad,-#1-\rad)
      -| ++(\x{fn}-\x{st}-3*\rad-\sep-\sep,\rad) |- ++(\rad+\sep,#1+\rad)}},
  ux/.style= {to path={let \p{st}=(\tikztostart) in let \p{fn}=(\tikztotarget) in
      -| ++(\sep+\rad,\rad) |- ++(\rad,\y{fn}-\y{st}-\rad)}},
  xu/.style= {to path={let \p{st}=(\tikztostart) in let \p{fn}=(\tikztotarget) in
      -| ++(\x{fn}-\x{st}-\rad-\sep,\rad) |- ++(\rad+\sep,\y{fn}-\y{st}-\rad)}},
  dx/.style= {to path={let \p{st}=(\tikztostart) in let \p{fn}=(\tikztotarget) in
      -| ++(\sep+\rad,-\rad) |- ++(\rad,\y{fn}-\y{st}+\rad) -- (\tikztotarget)}},
  xd/.style= {to path={let \p{st}=(\tikztostart) in let \p{fn}=(\tikztotarget) in
      -| ++(\x{fn}-\x{st}-\rad-\sep,-\rad) |- ++(\rad,\y{fn}-\y{st}+\rad) -- (\tikztotarget) }},
  d-x/.style= {to path={let \p{st}=(\tikztostart) in let \p{fn}=(\tikztotarget) in
      -| ++(\sep+\rad,-\rad) |- ++(-\rad,\y{fn}-\y{st}+\rad) -- (\tikztotarget)}},
  u-x/.style= {to path={let \p{st}=(\tikztostart) in let \p{fn}=(\tikztotarget) in
      -| ++(\sep+\rad,\rad) |- ++(-\rad,\y{fn}-\y{st}-\rad) -- (\tikztotarget)}},
  -xu/.style= {to path={let \p{st}=(\tikztostart) in let \p{fn}=(\tikztotarget) in
      -| ++(\x{fn}-\x{st}-\rad-\sep,\rad) |- ++(\rad+\sep,\y{fn}-\y{st}-\rad)}},
  -xd/.style= {to path={let \p{st}=(\tikztostart) in let \p{fn}=(\tikztotarget) in
      -| ++(\x{fn}-\x{st}-\rad-\sep,-\rad) |- ++(\rad+\sep,\y{fn}-\y{st}+\rad)}},
%styles for the symbols
  In/.style={{arrows={Triangle[open,reversed]-}}},
  Out/.style={{arrows={-Triangle[open]}}},
  T/.style = {% Terminal symbol
    rounded rectangle, minimum size=6mm, very thick, draw=black!50, top color=white,
    bottom color=black!20, font=\ttfamily, text height=1.5ex, text depth=.25ex},
  NT/.style= {% Non Terminal symbol
           rectangle, minimum size=6mm, very thick, draw=red!50!black!50, top color=white,
           bottom color=red!50!black!20, font=\itshape, text height=1.5ex,text depth=.25ex},
  GATE/.style={% Gate symbol, denoting a restriction
    signal, minimum size=6mm, very thick, font=\ttfamily,
    signal from=west, signal to=east,draw=red!50!black!50,
    top color=white,bottom color=black!20,
    text height=1.5ex,text depth=.25ex},
}

The Unicon syntax is described here using ``Railroad diagrams''. Note
that a newline may be substituted for the semicolon symbol (i.e.
\raisebox{-1.3mm}{\tikz \node[scale=0.75,T]{;};}
) wherever it appears in the diagrams. Some non-terminal symbols, which could be
further expanded using another diagram, are represented by a single
terminal symbol with the name enclosed in {\em guillemets}, for example
\raisebox{-1.3mm}{\tikz \node[scale=0.75,T]{\guillemets{infix-operator}};}.
\vfill

\noindent
\begin{tikzpicture}% ----- Program
[
  draw=black,very thick,shape=coordinate,
  graphs/every graph/.style = {edges={rounded corners=0.5*\rad}}
]
\graph [ grow right sep=8mm,simple, branch down={4.3*\rad}]{
  Program[NT],
  / --[In] entry -!-
  {
    gl0 -- gl1/global[T] -- gl2/"\guillemets{name}"[T] -- gl3/","[T] -!- glx,
    lk0 -- lk1/link[T] -- lk2/"\guillemets{file name}"[T] -- lk3/","[T] -!- lkx,
    iva0 -- iva1/invocable[T] -- iva2/all[T] -- ivax,
    iv0 -- iv1/invocable[T] --  iv2/\"[T] -- iv3/"\guillemets{name}"[T]-- iv4/\"[T]
        -- iv5/","[T] -!- ivx,
    pr0 -- pr1/"procedure declaration"[NT] -- prx,
    cl0 -- cl1/"class declaration"[NT] -- clx,
    rc0 -- rc1/record[T] --  rc2/"\guillemets{name}"[T] -- rc3/"("[T] --/-- rc4/"\guillemets{name}"[T]
        -- rc5/","[T] -!- rc6 -- rc7/")"[T] -- rcx,
    pk0 -- pk1/"0:1"[GATE] -- pk2/package[T]
        -- pk3/"\guillemets{name} or \guillemets{file name}"[T] -- pkx,
    im0 -- im1/import[T] -- im2/"\guillemets{name}"[T] -- im3/","[T] -!- imx,
  }
  -!- exit --/--[Out] /;
  entry -- gl0; glx -- exit;
  exit --[u-xd=2mm] entry;
  %
  gl2.east --[uxd=0] glx; gl3.east --[d-xu=0] gl2.west;
  lk2.east --[uxd=0] lkx; lk3.east --[d-xu=0] lk2.west;
  iv4.east --[uxd=0] ivx; iv5.east --[d-xu=0] iv2.west;
  rc3.east --[uxd=0] rc6; % yes, a null record is allowed.
  rc4.east --[uxd=0] rc6; rc5.east --[d-xu=0] rc4.west;
  im2.east --[uxd=0] imx; im3.east --[d-xu=0] im2.west;
  \foreach \in / \out in
           {lk0/lkx, iva0/ivax, iv0/ivx, pr0/prx, cl0/clx, rc0/rcx, pk0/pkx, im0/imx}
           {entry --[xd] \in; \out --[xu] exit};
};
\end{tikzpicture}

\vfill
The \raisebox{-1.3mm}{\tikz \node[scale=0.75,GATE]{n:m};}
symbol is an extension to the usual railway syntax and denotes that a
path may be taken between \verb/n/ and \verb/m/ times.
\raisebox{-1.3mm}{\tikz \node[scale=0.75,GATE]{1};}
is an abbreviation for \raisebox{-1.3mm}{\tikz \node[scale=0.75,GATE]{1:1};}
meaning the path is compulsory and must appear exactly once.

\vspace{0.5cm}
\noindent
\begin{tikzpicture}% ----- Procedure Declaration
[
  draw=black,very thick,shape=coordinate,
  graphs/every graph/.style = {edges={rounded corners=0.5*\rad}}
]
\graph [ grow right sep=8mm,simple, branch down={3*\rad}]{
  "procedure declararation"[NT],
  / --[In] entry --
  {
    pr1/procedure[T] -- pr2/"proc header"[NT] -- pr3/";"[T]
    -- pr4/"proc body"[NT] -- pr5/";"[T] -- pr6/end[T]
  }
  -- exit --[Out] /;
  %
  pr3.east --[d-xu=0] pr3.west; pr5.east--[d-xu=0] pr5.west;
};
\end{tikzpicture}

\vspace{0.5cm}
\noindent
\begin{tikzpicture}% ----- Procedure Header
[
  draw=black,very thick,shape=coordinate,
  graphs/every graph/.style = {edges={rounded corners=0.5*\rad}}
]
\graph [ grow right sep=6mm,simple, branch down={3*\rad}]{
  "proc header"[NT],
  / --[In] entry -!-
  {
    ph0/"\guillemets{name}"[T] --
    ph2/"("[T] -- / -- ph3/parameter[NT] -- ph4/","[T] -- /
    -- ph5/"\guillemets{name}"[T] -- ph6/"["[T] -- ph7/"]"[T] -- ph8/")"[T]
  }
  -- exit --[Out] /;
  %
  ph2.east --[uxd=0] ph8.west; ph3.east --[uxd=0] ph8.west;
  ph2.east --[dxu=\rad] ph5.west;
  ph4.east --[d-xu=0] ph3.west;
  entry -- ph0.west;
};
\end{tikzpicture}

\noindent
\begin{tikzpicture}% ----- Procedure parameter
[
  draw=black,very thick,shape=coordinate,
  graphs/every graph/.style = {edges={rounded corners=0.5*\rad}}
]
\graph [ grow right sep=7mm,simple, branch down={3*\rad}]{
  parameter[NT],
  / --[In] entry -!-
  {
    pa1/"\guillemets{name}"[T] -- pa2/":"[T] -- pa3/"\guillemets{name}"[T]
    -!-/-!- pa4/":"[T] -- pa5/"\guillemets{string or number or cset value}"[T]
  }
  -- exit --[Out] /;
  %
  pa1.east --[uxd=0] exit; pa3.east --[uxd=0] pa4.west; pa3.east --[uxd=0] exit;
  entry -- pa1.west;
};
\end{tikzpicture}

\vspace{0.5cm}
\noindent
\begin{tikzpicture}% ----- Procedure body
[
  draw=black,very thick,shape=coordinate,
  graphs/every graph/.style = {edges={rounded corners=0.5*\rad}}
]
\graph [ grow right sep=5.6mm,simple, branch down={4*\rad}]{
  "proc body"[NT],
  / --[In] / -- entry -!-
  {
    pb1 -- pb2/"var(s) declaration"[NT]
    -!- pb5/";"[T] --/-- pb6/initial[T] -- pb7/expr[NT] -- /
    -- pb8/";"[T] -- pb9/expr[NT] --/-- pbx,
  }
  -- exit --[Out] /;
  %
  entry -- pb2.west; pb2.east -- pb5.west;
  entry --[dxu=0] exit;
  entry --[dxu=0] pb6.west;
  pb5.east --[u-xd=0] entry;
  pb7.east --[uxd=0.5*\rad] exit;
  pb8.east --[u-xd=0] pb8.west;
  pb9.east --[u-xd=0] pb8.west;
};
\end{tikzpicture}

\vspace{0.5cm}
\noindent
\begin{tikzpicture}% ----- Variable(s) declaration
[
  draw=black,very thick,shape=coordinate,
  graphs/every graph/.style = {edges={rounded corners=0.5*\rad}}
]
\graph [ grow right sep=7mm,simple, branch down={4*\rad}]{
  "var(s) declaration"[NT],
  / --[In] / -- entry -!-
  {
    {[branch down=3*\rad]{vd1/local[T],vd2/static[T]}}
    -!-/-!-/-!-/-!-/-!- vd3/"\guillemets{name}"[T] --/-- vd4/":="[T]
    -- vd5/"expr"[NT] -- / -- vd6/","[T]
  }
  --/--/-- exit --[Out] /;
  %
  entry -- vd1.west; vd1.east -- vd3.west;
  entry --[dx] vd2.west; vd2.east --[ux]vd3.west;
  vd6.east --[u-xd=0] vd3.west;
  vd3.east --[dxu=0] vd6.west;
};
\end{tikzpicture}

\vspace{0.5cm}
\noindent
\begin{tikzpicture}% ----- Class Declaration
[
  draw=black,very thick,shape=coordinate,
  graphs/every graph/.style = {edges={rounded corners=0.5*\rad}}
]
\graph [ grow right sep=8mm,simple, branch down={3.5*\rad}]{
  "class declararation"[NT],
  / --[In] entry -!-
  {
    cl1/class[T] -- cl2/"\guillemets{name}"[T] -- cl3/":"[T] -!- {cl4/"("[T], join}
      -!- cl5/"\guillemets{name}"[T] -- cl6/","[T] -!- cl7/")"[T],
    / -!-/-!- md1/";"[T] -- md2/"method declaration"[NT] --/-- md3/";"[T] --mdx,
    / -!-/-!- in1/";"[T] -- cl9/initially[T] -- cl10/"proc header"[NT]
    -- cl11/";"[T] -- cl12/"proc body"[NT] -- cl13/";"[T],
  }
  -!- exit/"end"[T] --[Out] /;
  entry -- cl1.west;
  cl3.east --[u-xd=0] cl2.west; cl2.east --[dxu=0] cl4.west;
  cl6.east --[u-xd=0] cl5.west; cl5.east --[dxu=0] cl7.west;
  cl4.east --[dxu=0] cl7.west; cl4.east -- cl5.west;
  cl7.east --[d-x] join; join --[-xd] md1.west;  join --[-xd] in1.west;
  md2.east --[u-x] join;
  cl7.east -- exit.west;
  cl13.east --[xu] exit.west; mdx --[xu] exit.west;
  %
};
\end{tikzpicture}

\vspace{0.5cm}
\noindent
\begin{tikzpicture}% ----- Method Declaration
[
  draw=black,very thick,shape=coordinate,
  graphs/every graph/.style = {edges={rounded corners=0.5*\rad}}
]
\graph [ grow right sep=8mm,simple, branch down={3*\rad}]{
  "method declararation"[NT],
  / --[In] entry --
  {
    md1/method[T] -- md2/"proc header"[NT] -- md3/";"[T]
    -- md4/"proc body"[NT] -- md5/";"[T] -- md6/end[T]
  }
  -- exit --[Out] /;
  %
  md3.east --[d-xu=0] md3.west; md5.east--[d-xu=0] md5.west;
};
\end{tikzpicture}

\noindent
\begin{tikzpicture}% ----- Expression
[
  draw=black,very thick,shape=coordinate,
  graphs/every graph/.style = {edges={rounded corners=0.5*\rad}}
]
\graph [ grow right sep=7mm,simple, branch down={3.9*\rad}]{
  expr[NT],
  / --[In] entry -!-
  {
    id0  -!- id1 -!- id2/expr[NT] -!- id3 --/-- id4/"."[T]
         -- id5/"\guillemets{name}"[T] --/-- idx,
    qn0 --/-- qn1--/--  qn2/"::"[T] -- qn3/"\guillemets{name}"[T] -- qnx,
    lit0 -- / -- li1/"\guillemets{string or number or cset value}"[T] -- litx,
    pe0  -- / -- pe1/"\guillemets{prefix-operator}"[T] -- pe2/expr[NT] -- pex,
    ie0  -- / -- ie1/expr[NT] -- ie2/"\guillemets{infix-operator}"[T]
         -- ie3/expr[NT] -- iex,
    ky0  -- / -- ky1/"\&keyword"[T] -- kyx,
    tob0 -- / --tob1/expr[NT] -- tob2/to[T] -- tob3/expr[NT] -- tob4/by[T]
         -- tob5/expr[NT] -- tobx,
    inv0 -- inv1 -- inv2/"meth-expr"[NT] -- inv3/"("[T] --/-- inv4/expr[NT]
         -!-/-!- inv5/","[T] --/-- inv6/")"[T] -- invx,
    ce0 -- / -- ce1/"control expr"[NT] -- cex,
    pc0 -- pc1 -- pc2/expr[NT] -- pc3/"\{"[T] --/-- pc4/expr[NT]
        -!-/-!- pc5/","[T] --/-- pc6/"\}"[T] -- pcx,
    ex0 -- / -- ex1/"[:"[T] -- ex2/expr[NT] -- ex3/":]"[T] -- exx,
    seq0 -- / -- seq1/"\{"[T] --/-- seq2/expr[NT] -!-/-!- seq3/";"[T]
         --/-- seq4/"\}"[T] -- seqx,
    ir0 -- / -- ir1/expr[NT] -- ir3/"["[T] -- ir4/expr[NT] -- ir5/": or +: or -:"[T]
        -- ir6/expr[NT] -- ir7/"]"[T] -- irx,
    ind0 -- ind1 -- ind2/expr[NT] -- ind2a -- ind3/"["[T] --/-- ind4/expr[NT]
         -!-/-!- ind5/","[T] --/-- ind6/"]"[T] -- indx,
  }
  -!- exit --[Out] /;
%
  id0 -- id2 -- id3;
  qn1 --[uxd=0] qn3.west; qn3.east--[d-xu=0] qn2.west;
  id5.east --[d-xu=0] id4.west; id3 --[uxd=0] idx;
  tob3.east --[uxd=0] tobx;
  inv1 --[uxd=0] inv3.west;  inv5.east --[d-xu=0] inv4.west;
  inv5.east --[d-xu=0] inv5.west; inv3.east --[uxd=0] inv5.west;
  inv3.east --[uxd=0] inv6.west; inv4.east --[uxd=0] inv6.west;
  pc1 --[uxd=0] pc3.west;  pc5.east --[d-xu=0] pc4.west;pc5.east --[d-xu=0] pc5.west;
  pc3.east --[uxd=0] pc5.west;  pc3.east --[uxd=0] pc6.west; pc4.east --[uxd=0] pc6.west;
  seq1.east --[uxd=0] seq3.west; seq1.east --[uxd=0] seq4.west; seq2.east --[uxd=0] seq4.west;
  seq3.east --[d-xu=0] seq2.west;seq3.east --[d-xu=0] seq3.west;
  ind1 --[uxd=0] ind3.west;  ind5.east --[d-xu=0] ind4.west; ind5.east --[d-xu=0] ind5.west;
  ind3.east --[uxd=0] ind5.west; ind3.east --[uxd=0] ind6.west; ind4.east --[uxd=0] ind6.west;
  ind6.east --[d-xu=\rad] ind2a.west;
%
  entry -- id0; idx -- exit;
  \foreach \in / \out in
           { qn0/qnx, lit0/litx, ky0/kyx, pe0/pex, ie0/iex, inv0/invx, tob0/tobx,
             ce0/cex, pc0/pcx, ex0/exx, seq0/seqx,ir0/irx, ind0/indx}
           {entry --[dx] \in; \out --[xu] exit};
};
\end{tikzpicture}

\noindent
\begin{tikzpicture}% ----- Method or expression
[
  draw=black,very thick,shape=coordinate,
  graphs/every graph/.style = {edges={rounded corners=0.5*\rad}}
]
\graph [ grow right sep=7mm,simple, branch down={3.5*\rad}]{
  "meth-expr"[NT],
  / --[In] entry -!-
  {
    e0 -- e1/expr[NT] -- ex,
    m0 -- m1/expr[NT] -- m2/"\$"[T] -- m3/"\guillemets{name}"[T]
       --/-- m4/"."[T] -- m5/"\guillemets{name}"[T] --/-- mx,
    i0 -- i1/expr[NT] -- i2/"\$"[T] -- / -- i3/"\guillemets{name}"[T]
       -- i4/"."[T] -- / --  i5/initially[T] -- ix,
  }
  -!- exit --[Out] /;
%
  m5.east --[d-xu=0] m4.west; m3.east --[uxd=0] mx;
  i4.east --[d-xu=0] i3.west; i2.east --[dxu=\rad] i5.west;
%
  entry -- e0; ex -- exit;
  \foreach \in / \out in
           {m0/mx, i0/ix}
           {entry --[dx] \in; \out --[xu] exit};
};
\end{tikzpicture}

\noindent
\begin{tikzpicture}% ----- Control Expr
[
  draw=black,very thick,shape=coordinate,
  graphs/every graph/.style = {edges={rounded corners=0.5*\rad}}
]
\graph [ grow right sep=8mm,simple, branch down={4*\rad}]{
  "control expr"[NT],
  / --[In] entry -!-
  {
    if0/if[T] -- if1/expr[NT] -- if2/then[T] -- if3/expr[NT]
         -- if4/else[T] -- if5/expr[NT] -- ifx,
    iter0 --  / -- "loop expr"[NT] -- iterx,
    br0 --  / -- break[T] -- br1/expr[NT] -- brx,
    nx0 -- / --  next[T] -- nxx,
    crt0 -- / -- critical[T] -- crt1/expr[NT] -- crt2/":"[T] -- crt3/expr[NT] -- crtx,
    cs0  -- / -- case[T] -- cs1/expr[NT] -- of[T] -- cs2/"\{"[T],
    / -!- cs4/";"[T] -- cs5 -!- {[branch down=10mm] cs9a/"0:1"[GATE]
      -- cs9b/default[T], / -!- cs10/expr[NT]}
      -!- / -!- / -!- / -!- / -!- / -!- cs6/":"[T] -- cs7/expr[NT]
      -- cs8/"\}"[T] -- csx, /,
    cr0 -- / --  create[T] -- cr1/expr[NT] -- crx,
    th0 -- / --  thread[T] -- th1/expr[NT] -- thx,
    ret0 -- / -- return[T] -- ret1/expr[NT] -- retx,
    fl0 -- / --  fail[T] -- flx,
  }
  -!- exit --[Out] /;
%
  if3.east --[uxd=0] ifx;
  break.east --[uxd=0] brx;
  return.east --[uxd=0] retx;
  cs7.east --[d-xu=2.5*\rad] cs4.west;
  cs2.east --[d-xd] cs5.west;
  cs5 -- cs9a.west; cs9b.east -- cs6;
  cs5 --[dx] cs10 --[xu] cs6.west;
  %
  entry -- if0; ifx -- exit;
  \foreach \in / \out in
           {iter0/iterx, br0/brx,ret0/retx, crt0/crtx, cs0/csx,
            cr0/crx, th0/thx, fl0/flx, nx0/nxx}
           {entry --[dx] \in; \out --[xu] exit};
};
\end{tikzpicture}

\noindent
\begin{tikzpicture}% ----- Loop Expr
[
  draw=black,very thick,shape=coordinate,
  graphs/every graph/.style = {edges={rounded corners=0.5*\rad}}
]
\graph [ grow right sep=8mm,simple, branch down={4*\rad}]{
  "loop expr"[NT],
  /--[In] entry -!-
  {
    ev0 --  / -- every[T] -- ev1/expr[NT] -- ev2/do[T] -- ev3/expr[NT] -- evx,
    wh0 --  / -- while[T] -- wh1/expr[NT] -- wh2/do[T] -- wh3/expr[NT] -- whx,
    un0 --  / -- until[T] -- un1/expr[NT] -- un2/do[T] -- un3/expr[NT] -- unx,
    sus0 -- / -- suspend[T] -- sus1/expr[NT] -- sus2/do[T]
         -- sus3/expr[NT] -- susx,
    rpt0 -- / -- repeat[T] -- rpt1/expr[NT] -- rptx,
  }
  -!- exit --[Out] /;
  \foreach \fr / \to in
           {ev1/evx, wh1/whx, un1/unx, sus1/susx}
           {\fr.east --[uxd=0]\to};
  suspend.east --[uxd=0] susx;
  %
  entry -- ev0; evx -- exit;
  \foreach \in / \out in
           {wh0/whx, un0/unx, sus0/susx, rpt0/rptx}
           {entry --[dx] \in; \out --[xu] exit};
};
\end{tikzpicture}

\vspace{0.5cm}
\subsection*{Operator precedence and associativity}
Except where mentioned, infix operators are left--associative.
The operators are listed in two columns and grouped from highest precedence
to lowest: the groups are separated by horizontal lines and all operators
in a group have the same precedence (i.e. the order within a group, or the
column an operator is placed in, is not significant).

% Make it easy to change the look and feel.
\newcommand{\etxt}[1]{{\sl #1}}%       expression text
\newcommand{\e}[1]{{\etxt{expr#1}}}%   expr1, expr2 etc. -- use \e{} for expr.
\newcommand{\etc}{{\tiny\ldots}}
% two columns
\newcommand{\mc}[1]{\multicolumn{2}{l}{\tt#1}\\}
% two columns with (right-associative)
\newcommand{\rass}{~~~~{\rm (right--associative)}}
\newcommand{\mra}[1]{\multicolumn{2}{l}{\tt#1 \rass\hfill}\\}
%two columns with a comment
\newcommand{\mcc}[2]{\multicolumn{2}{l}{\tt#1~~~~{\rm #2}\hfill}\\}
\newcommand{\separator}{%
\multicolumn{2}{l}{\rule[1mm]{4cm}{.3mm}%
\makebox[4cm]{\small$\Uparrow$~higher~~~lower~$\Downarrow$}%
\rule[1mm]{5cm}{.3mm}}\\}
%
% Define the table furniture.
%
\tablefirsthead{\hline \multicolumn{2}{c}{\textbf{Operator Precedence}}\\}
\tablehead{\multicolumn{2}{c}{{\textbf{Operator Precedence}} (continued)}\\}
\tabletail{\multicolumn{2}{r}{\small continued \ldots}\\}
%\tablelasttail{\hline}
% the default value (of 0.1) gives very short pages: this works better for this table.
\xentrystretch{-0.1}
%
\begin{center}
\begin{xtabular}{%
    >{\tt\bgroup}p{6cm}<{\egroup}% 1st column
    @{\hspace{2cm}}%             inter column space
    >{\tt\bgroup}p{6cm}<{\egroup}% 2nd column
    }
%
% Note that \e1 is 'technically' a call to \e with a parameter of 1,
% not a call to a macro called e1 (macros cannot have digits in their name).
%
( \e{} )                   & [ \e1, \e2 \etc ]\\
\e{} (\e1, \e2 \etc )      & \e1 [ \e2, \e3 \etc ]\\
\{ \e1; \e2 \etc \}        & \e1 [ \e2 : \e3 ]\\
\e{} \{ \e1; \e2 \etc \}   & \e1 [ \e2 +: \e3 ]\\
\e{}.{\it f}               & \e1 [ \e2 -: \e3 ]\\
\e1\$initially(\e2 \etc)   & \e1\$\etxt{id}(\e2 \etc)\\
\e1\$\etxt{id}.initially(\e2 \etc)
                           & \e1\$\etxt{id1}.\etxt{id2}(\e2 \etc)\\
{}[:~\e{}~:]    &\\
\mcc{< \etxt{regexp} >}{(regular expressions have different precedence rules)}
@<              & @>\\
@<{}<           & @>{}>\\
\separator
not \e{}        &     {\textbar} \e{}\\
! \e{}          &     * \e{}\\
+ \e{}          &     - \e{}\\
/ \e{}          &     {\textbackslash} \e{}\\
. \e{}          &     ++ \e{}\\
? \e{}          &     \verb/~/ \e{}\\
\verb/^/ \e{}   &     {\tt @} \e{}\\
@> \e()         &     @>{}> \e{}\\
@< \e{}         &     @<{}< \e{}\\
|| \e{}         &     ||| \e{}\\
-{}- \e{}       &     ** \e{}\\
= \e{}          &     \verb/~/= \e{}\\
== \e{}         &     \verb/~/== \e{}\\
=== \e{}        &     \verb/~/=== \e{}\\
.| \e{}         & \\
\separator
\e1 {\textbackslash} \e2 &\\
\e1 {\tt @} \e2 &     \e1 ! \e2\\
\e1  @> \e2     &    \e1 @>{}> \e2\\
\e1  @< \e2     &    \e1 @<{}< \e2\\
\separator
\e{} @>         &     \e{} @>{}>\\
\e{} @<         &     \e{} @<{}<\\
\separator
% [DonW] /verb cannot be used in the arg of another command, at least,
% not without a lot of jiggery-pokery, so this is the best we can do
% for \verb/^/  ( \^{} is too small and too high).
\mra{\e1~\char`\^~\e2}
\separator
\e1 * \e2       &    \e1 / \e2\\
\e1 ** \e2      &    \e1 \% \e2\\
\separator
\e1 + \e2       &    \e1 - \e2\\
\e1 ++ \e2      &    \e1 -{}- \e2\\
\e1 \$\$ \e2    &    \e1 -> \e2\\
\separator
\e1 || \e2      &    \e1 ||| \e2\\
\separator
\e1 < \e2       &    \e1 <= \e2\\
\e1 > \e2       &    \e1 >= \e2\\
\e1 = \e2       &    \e1 \verb'~'= \e2\\
\e1 == \e2      &    \e1 \verb'~'== \e2\\
\e1 === \e2     &    \e1 \verb'~'=== \e2\\
\e1 <{}< \e2    &    \e1 <{}<= \e2\\
\e1 >{}> \e2    &    \e1 >{}>= \e2\\
\separator
\e1 | \e2       & \e1 \&\& \e2\\
\separator
\e1 .| \e2      &\\
\e1 to \e2      & \e1 to \e2 by \e3\\
\separator
\e1 ?? \e2      &\\
\separator
\mra{\e1 := \e2}
\mra{\e1 <- \e2}
\mra{\e1 :=: \e2}
\mra{\e1 <=> \e2}
\mcc{\e1 \etxt{op}:= \e2}{(operators that may be augmented are listed below)}
\separator
\e1 ? \e2 &\\
\separator
\e1 \& \e2 &\\
\separator
\mc{break \e1}
\mc{case \e{} of \{\e1:~\e2; ~~\e3:~\e4; \etc \}}
\mc{create \e{}}
\mc{every \e1 do \e2}
\mc{fail}
\mc{if \e1 then \e2 else \e3}
\mc{next}
\mc{repeat \e{}}
\mc{return \e{}}
\mc{suspend \e1 do \e2}
\mc{until \e1 do \e2}
\mc{while \e1 do \e2}
\mc{critical \e1 : \e2}
\mc{thread \e{}}
\separator
\e1 ; \e2 &\\
\end{xtabular}
\end{center}
%
% Remove the table furniture.
% (without this, the next table is typeset with these definitions!)
%
\tablefirsthead{}
\tablehead{}
\tabletail{}
\tablelasttail{}
\xentrystretch{0.1}
%
\subsubsection*{Augmented operators}
\label{AugOps}
The following operators may be augmented with \verb/:=/
\begin{center}
  \begin{xtabular}{%
      >{\tt\bgroup}c<{\egroup}@{\hspace{1cm}}%
      >{\tt\bgroup}c<{\egroup}@{\hspace{1cm}}%
      >{\tt\bgroup}c<{\egroup}@{\hspace{1cm}}%
      >{\tt\bgroup}c<{\egroup}@{\hspace{1cm}}%
      >{\tt\bgroup}c<{\egroup}@{\hspace{1cm}}%
      >{\tt\bgroup}c<{\egroup}@{\hspace{1cm}}%
      >{\tt\bgroup}c<{\egroup}@{\hspace{1cm}}%
      >{\tt\bgroup}c<{\egroup}@{\hspace{1cm}}%
      >{\tt\bgroup}c<{\egroup}@{\hspace{1cm}}%
      >{\tt\bgroup}c<{\egroup}%
    }
% One per line, so they're easy to rearrange.
    || &
    ||| &
    + &
    - &
    * &
    ++ &
    -{}- &
    ** &
    / &
    \% \\
%
    = &
    == &
    === &
    \verb/~/= &
    \verb/~/== &
    \verb/~/=== &
    \verb/^/ &
    ? &
    \& &
    @ \\
%
    >{}>= &
    >{}> &
    <{}<= &
    <{}< &
    >= &
    > &
    <= &
    <\\
  \end{xtabular}
\end{center}



